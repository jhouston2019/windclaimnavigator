<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Claim Navigation Tool - $997 | Claim Navigator</title>
  <meta name="description" content="Get the complete AI Claim Navigation Tool for $997. Includes 20 AI-generated responses, professional templates, and comprehensive claim navigation for property and business interruption claims.">
  <meta name="keywords" content="AI claim navigation tool, claim navigation tool, insurance claim navigation, claim document solution, property damage claim help, business interruption claim tool, claim settlement software, insurance claim response generator, claim analysis tool, property damage claim navigation, business interruption claim analysis">
  <meta name="author" content="Claim Navigator">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="{{ SITE_URL }}/product.html">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="AI Claim Navigation Tool - $997 | Claim Navigator">
  <meta property="og:description" content="Get the complete AI Claim Navigation Tool for $997. Includes 20 AI-generated responses, professional templates, and comprehensive claim navigation for property and business interruption claims.">
  <meta property="og:type" content="product">
  <meta property="og:url" content="{{ SITE_URL }}/product.html">
  <meta property="og:image" content="{{ SITE_URL }}/og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Claim Navigator">
  <meta property="og:locale" content="en_US">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="AI Claim Navigation Tool - $997 | Claim Navigator">
  <meta name="twitter:description" content="Get the complete AI Claim Navigation Tool for $997. Includes 20 AI-generated responses, professional templates, and comprehensive claim navigation for property and business interruption claims.">
  <meta name="twitter:image" content="{{ SITE_URL }}/og-image.png">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  
  <!-- Preload Critical Resources -->
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm" as="script">
  
  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ GA4_ID }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '{{ GA4_ID }}');
  </script>
  
  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Service",
    "name": "AI Claim Navigation Tool",
    "description": "Complete AI-powered claim navigation tool and document solution package with 20 AI-generated responses, professional templates, and comprehensive claim navigation for property and business interruption claims.",
    "url": "{{ SITE_URL }}/product.html",
    "image": "{{ SITE_URL }}/og-image.png",
    "serviceType": "AI-Powered Claim Navigation Tool and Document Solution",
    "provider": {
      "@type": "Organization",
      "name": "Claim Navigator",
      "url": "{{ SITE_URL }}/"
    },
    "areaServed": "United States",
    "offers": {
      "@type": "Offer",
      "price": "997",
      "priceCurrency": "USD",
      "availability": "https://schema.org/InStock",
      "seller": {
        "@type": "Organization",
        "name": "Claim Navigator"
      },
      "description": "AI Claim Navigation Tool - Complete claim navigation and document solution package with 20 AI responses"
    },
    "category": "Insurance Services"
  }
  </script>
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --primary: #1e40af;
      --primary-dark: #0f172a;
      --primary-header: #0f172a;
      --accent: #3b82f6;
      --success: #10b981;
      --text-primary: #111827;
      --text-secondary: #6b7280;
      --bg-white: #ffffff;
      --bg-light: #f9fafb;
      --bg-gray: #f3f4f6;
      --border: #e5e7eb;
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--bg-white);
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Header */
    header {
      background: var(--primary-header);
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 0;
    }
    
    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: white;
    }
    
    .nav-links {
      display: flex;
      gap: 2rem;
      align-items: center;
    }
    
    .nav-links a {
      color: rgba(255, 255, 255, 0.9);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }
    
    .nav-links a:hover {
      color: white;
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 0.5rem;
      font-weight: 600;
      text-decoration: none;
      display: inline-block;
      transition: all 0.2s;
      cursor: pointer;
    }
    
    .btn-primary:hover {
      background: var(--accent);
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }
    
    .btn-secondary {
      background: var(--success);
      color: white;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 0.5rem;
      font-weight: 600;
      text-decoration: none;
      display: inline-block;
      transition: all 0.2s;
      cursor: pointer;
    }
    
    .btn-secondary:hover {
      background: #059669;
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }
    
    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, var(--primary-header) 0%, var(--primary) 100%);
      color: white;
      padding: 6rem 0;
      text-align: center;
    }
    
    .section-header h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      line-height: 1.2;
    }
    
    .subtitle {
      font-size: 1.25rem;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 2.5rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }
    
    .section-header h2 {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 1rem;
    }
    
    .section-subtitle {
      font-size: 1.1rem;
      color: var(--text-secondary);
      max-width: 600px;
      margin: 0 auto;
    }
    
    /* Pricing Section */
    .pricing {
      padding: 6rem 0;
      background: var(--bg-light);
    }
    
    .pricing-card {
      background: white;
      border-radius: 1rem;
      padding: 3rem;
      box-shadow: var(--shadow-lg);
      text-align: center;
      max-width: 600px;
      margin: 0 auto;
      border: 1px solid var(--border);
    }
    
    .pricing-card h3 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 1rem;
    }
    
    .price-amount {
      font-size: 4rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 1rem;
    }
    
    .price-description {
      font-size: 1.1rem;
      color: var(--text-secondary);
      margin-bottom: 2rem;
      line-height: 1.6;
    }
    
    .price-features {
      list-style: none;
      text-align: left;
      margin-bottom: 2.5rem;
    }
    
    .price-features li {
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border);
      font-weight: 500;
      color: var(--text-primary);
    }
    
    .price-features li:last-child {
      border-bottom: none;
    }
    
    .checkout-btn {
      width: 100%;
      font-size: 1.1rem;
      padding: 1rem 2rem;
      margin-bottom: 1rem;
      border-radius: 0.75rem;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .checkout-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .checkout-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Footer */
    footer {
      background: var(--primary-header);
      color: white;
      padding: 3rem 0;
      text-align: center;
    }
    
    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 2rem;
    }
    
    .footer-section h4 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }
    
    .footer-section a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      display: block;
      margin-bottom: 0.5rem;
      transition: color 0.2s;
    }
    
    .footer-section a:hover {
      color: white;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .section-header h1 {
        font-size: 2rem;
      }
      
      .subtitle {
        font-size: 1.1rem;
      }
      
      .pricing-card {
        padding: 2rem;
        margin: 0 1rem;
      }
      
      .price-amount {
        font-size: 3rem;
      }
      
      .nav-links {
        gap: 1rem;
      }
      
      .nav-links a {
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="container">
      <nav>
        <div class="logo">Claim Navigator</div>
        <div class="nav-links">
          <a href="index.html">Home</a>
          <a href="#features">Features</a>
          <a href="#how-it-works">How it Works</a>
          <a href="#pricing">Pricing</a>
          <a href="#faq">FAQ</a>
          <a href="app/register.html" class="btn-primary">Get Started</a>
        </div>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="section-header">
        <h1>Claim Resource & AI Response Center</h1>
        <p class="subtitle">Professional claim documentation tools with AI-powered response generation to maximize your settlement potential</p>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features" id="features">
    <!-- keep features section unchanged -->
  </section>

  <!-- How it Works -->
  <section class="how-it-works" id="how-it-works">
    <!-- keep how-it-works section unchanged -->
  </section>

  <!-- Pricing Section -->
  <section class="pricing" id="pricing">
    <div class="container">
      <div class="section-header">
        <h2>Simple, Transparent Pricing</h2>
        <p class="section-subtitle">One-time payment for complete access to all tools and AI responses</p>
      </div>
      
      <div class="pricing-card">
        <h3>AI Claim Toolkit</h3>
        <div class="price-amount">$997</div>
        <p class="price-description">
          Fixed fee regardless of claim size or complexity<br>
          <strong>Includes 20 AI-generated insurer responses</strong><br>
          Each additional AI response: $29
        </p>
        <ul class="price-features">
          <li>✓ Complete AI-powered documentation package</li>
          <li>✓ 20 AI-generated insurer responses included</li>
          <li>✓ All necessary forms and templates</li>
          <li>✓ State-specific compliance documents</li>
          <li>✓ Spanish language support for all documents</li>
          <li>✓ Appeal and escalation templates</li>
          <li>✓ 30-day action plan and timeline</li>
          <li>✓ Bonus: Recommended tools guide with exclusive discounts</li>
        </ul>
        <!-- Main Package -->
        <button onclick="startCheckout('main')" class="btn-primary checkout-btn" style="display: block; margin: 0 auto; max-width: 400px;" data-original-text="Get My AI-Powered Claim Toolkit – $997">
          Get My AI-Powered Claim Toolkit – $997
        </button>

        <!-- Top-Up -->
        <button onclick="startCheckout('topup')" class="btn-secondary checkout-btn" style="display: block; margin: 1rem auto 0 auto; max-width: 400px;" data-original-text="Buy Extra AI Response – $29">
          Buy Extra AI Response – $29
        </button>

        <!-- Appeal Builder -->
        <button onclick="startCheckout('appeal')" class="btn-appeal checkout-btn" style="display: block; margin: 1rem auto 0 auto; max-width: 400px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border: none;" data-original-text="Purchase Appeal Builder – $249">
          Purchase Appeal Builder – $249
        </button>

        <p style="text-align: center; margin-top: 1rem; color: var(--text-secondary); font-size: 0.875rem;">
          Digital products are delivered immediately. All sales are final.
        </p>
      </div>

      <!-- Appeal Builder Section -->
      <div class="pricing-card appeal-builder-card" style="margin-top: 3rem; border: 2px solid #f59e0b; background: linear-gradient(135deg, #fef3c7, #fde68a);">
        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 1rem;">
          <span style="font-size: 1.5rem;">⚖️</span>
          <h3 style="color: #92400e; margin: 0;">Appeal Builder - Premium Access</h3>
        </div>
        <div class="price-amount" style="color: #92400e;">$249</div>
        <p class="price-description" style="color: #92400e;">
          Generate complete, customized appeal letters + evidence package<br>
          <strong>Per appeal - one-time purchase</strong>
        </p>
        <ul class="price-features" style="color: #92400e;">
          <li>✓ AI-powered appeal letter generation</li>
          <li>✓ Multi-language support (English, Spanish, French, Portuguese)</li>
          <li>✓ Multiple appeal types (Internal, External, Arbitration, Litigation)</li>
          <li>✓ Professional tone customization</li>
          <li>✓ Evidence package with supporting documents</li>
          <li>✓ Appeal tracking dashboard</li>
          <li>✓ Professional partner referrals</li>
          <li>✓ PDF and DOCX document generation</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq" id="faq">
    <!-- keep faq section unchanged -->
  </section>

  <!-- Final CTA Section -->
  <section class="final-cta">
    <!-- keep final cta section unchanged -->
  </section>

  <!-- Footer -->
  <footer>
    <!-- keep footer unchanged -->
  </footer>

  <!-- Scripts -->
  <script>
    // Use ES6 modules for reliable Supabase loading (same as response center)
    let supabase = null;
    
    // Initialize Supabase using ES6 modules (more reliable than dynamic script loading)
    async function initializeSupabase() {
      if (supabase) {
        return supabase;
      }

      try {
        // Use dynamic import for ES6 modules (more reliable than script tags)
        const { createClient } = await import('https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm');
        
        supabase = createClient(
          "{{ SUPABASE_URL }}",
          "{{ SUPABASE_ANON_KEY }}"
        );
        
        console.log('Supabase client initialized successfully with ES6 modules');
        return supabase;
      } catch (error) {
        console.error('Error initializing Supabase with ES6 modules:', error);
        
        // Fallback: Try alternative CDN
        try {
          console.log('Trying alternative CDN...');
          const { createClient } = await import('https://unpkg.com/@supabase/supabase-js@2/+esm');
          
          supabase = createClient(
            "{{ SUPABASE_URL }}",
            "{{ SUPABASE_ANON_KEY }}"
          );
          
          console.log('Supabase client initialized successfully with alternative CDN');
          return supabase;
        } catch (fallbackError) {
          console.error('Error with alternative CDN:', fallbackError);
          return null;
        }
      }
    }

    // Check authentication status on page load
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        // Initialize Supabase first
        await initializeSupabase();
        
        if (!supabase) {
          console.error('Failed to initialize Supabase');
          // Show login required buttons
          document.querySelectorAll('.checkout-btn').forEach(btn => {
            btn.disabled = false;
            btn.textContent = 'Login Required - Click to Login';
            btn.onclick = () => {
              window.location.href = '/app/login.html';
            };
          });
          return;
        }

        const { data: { user } } = await supabase.auth.getUser();
        if (user) {
          console.log('User is authenticated:', user.email);
          // User is logged in, enable checkout buttons
          document.querySelectorAll('.checkout-btn').forEach(btn => {
            btn.disabled = false;
            btn.textContent = btn.dataset.originalText || 'Get My AI-Powered Claim Toolkit';
          });
        } else {
          console.log('User is not authenticated');
          // User is not logged in, show login prompt
          document.querySelectorAll('.checkout-btn').forEach(btn => {
            btn.disabled = false;
            btn.textContent = 'Login Required - Click to Login';
            btn.onclick = () => {
              window.location.href = '/app/login.html';
            };
          });
        }
      } catch (error) {
        console.error('Auth check error:', error);
        // On error, assume not logged in
        document.querySelectorAll('.checkout-btn').forEach(btn => {
          btn.disabled = false;
          btn.textContent = 'Login Required - Click to Login';
          btn.onclick = () => {
            window.location.href = '/app/login.html';
          };
        });
      }
    });

    async function startCheckout(type) {
      const buttons = document.querySelectorAll(".checkout-btn");
      buttons.forEach(btn => { 
        btn.disabled = true; 
        btn.textContent = "Redirecting to checkout..."; 
      });

      try {
        // Ensure Supabase is initialized
        await initializeSupabase();
        
        if (!supabase) {
          alert("Authentication service unavailable. Please try again.");
          buttons.forEach(btn => { 
            btn.disabled = false; 
            btn.textContent = btn.dataset.originalText || "Get My AI-Powered Claim Toolkit"; 
          });
          return;
        }

        // Get logged-in user
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) {
          alert("Please log in first to purchase credits.");
          window.location.href = "/app/login.html";
          return;
        }

        console.log(`Starting checkout for user: ${user.email}`);

        // Determine which function to call based on type
        let endpoint = "/.netlify/functions/create-checkout-session";
        if (type === 'appeal') {
          endpoint = "/.netlify/functions/create-appeal-checkout";
        }

        // Call Netlify function with proper authentication
        const response = await fetch(endpoint, {
          method: "POST",
          headers: { 
            "Content-Type": "application/json",
            "Authorization": `Bearer ${(await supabase.auth.getSession()).data.session?.access_token}`
          },
          body: JSON.stringify({ 
            userEmail: user.email, 
            type: type || "claim_toolkit"
          })
        });

        const data = await response.json();

        if (data.url) {
          console.log("Redirecting to Stripe checkout:", data.url);
          window.location.href = data.url;
        } else {
          throw new Error(data.error || "Checkout failed");
        }
      } catch (err) {
        console.error("Checkout error:", err);
        alert(`Checkout failed: ${err.message}. Please try again.`);
        buttons.forEach(btn => { 
          btn.disabled = false; 
          btn.textContent = btn.dataset.originalText || "Buy Now - $997"; 
        });
      }
    }

    // FAQ Toggle
    function toggleFAQ(question) {
      const answer = question.nextElementSibling;
      const icon = question.querySelector("span:last-child");
      answer.classList.toggle("active");
      icon.textContent = answer.classList.contains("active") ? "▲" : "▼";
    }
    window.toggleFAQ = toggleFAQ;
  </script>

</body>
</html>
