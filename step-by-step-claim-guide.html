<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claim Management Center - Claim Navigator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/app/assets/css/tool-visual-alignment.css">
  <link rel="stylesheet" href="/app/assets/css/workflow-tools-ai.css">
  
  <!-- CRITICAL: Load auth and paywall BEFORE any other scripts -->
  <script src="/app/assets/js/supabase-client.js"></script>
  <script src="/app/assets/js/auth.js" type="module"></script>
  <script src="/app/assets/js/paywall-enforcement.js"></script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="storage/claimStorage.js"></script>
  <script src="ai-expert-config.js"></script>
  <script src="/app/assets/js/tool-registry.js"></script>
  <script src="/app/assets/js/disclaimer-component.js"></script>
  <script src="/app/assets/js/workflow-tools-ai.js"></script>
  
  <!-- BLOCKING GUARD: Hide content until access verified -->
  <!-- TEMPORARILY DISABLED FOR LOCAL TESTING -->
  <script>
    // AUTHENTICATION DISABLED - Allow page to display for local testing
    console.log('Authentication checks disabled for local testing');
    document.documentElement.style.visibility = 'visible';
    document.documentElement.style.opacity = '1';
    
    /* ORIGINAL AUTH CODE - COMMENTED OUT
    // Block rendering immediately
    document.documentElement.style.visibility = 'hidden';
    document.documentElement.style.opacity = '0';
    
    // Enforce access control before page loads
    (async function() {
      try {
        // Wait for auth system to load
        let attempts = 0;
        while (!window.CNAuth && attempts < 50) {
          await new Promise(resolve => setTimeout(resolve, 100));
          attempts++;
        }
        
        if (!window.CNAuth) {
          console.error('CN Auth system failed to load');
          window.location.href = '/app/access-denied.html';
          return;
        }
        
        // Check authentication
        const user = await window.CNAuth.currentUser();
        if (!user) {
          console.warn('CN Access Denied: No authenticated user');
          window.location.href = '/app/login.html?redirect=' + encodeURIComponent(window.location.pathname);
          return;
        }
        
        // Wait for Supabase client
        attempts = 0;
        while (!window.getSupabaseClient && attempts < 50) {
          await new Promise(resolve => setTimeout(resolve, 100));
          attempts++;
        }
        
        const supabase = await window.getSupabaseClient();
        if (!supabase) {
          console.error('CN Access Denied: Supabase unavailable');
          window.location.href = '/app/access-denied.html';
          return;
        }
        
        // Check for active claim
        const { data: claims, error } = await supabase
          .from('claims')
          .select('id, status')
          .eq('user_id', user.id)
          .eq('status', 'active')
          .limit(1);
        
        if (error) {
          console.error('CN Access Denied: Database error', error);
          window.location.href = '/app/access-denied.html';
          return;
        }
        
        if (!claims || claims.length === 0) {
          console.warn('CN Access Denied: No active claim');
          window.location.href = '/paywall/locked.html';
          return;
        }
        
        // Access granted - show page
        document.documentElement.style.visibility = 'visible';
        document.documentElement.style.opacity = '1';
        
      } catch (error) {
        console.error('CN Access Denied: Exception', error);
        window.location.href = '/app/access-denied.html';
      }
    })();
    */
  </script>
  
  <style>
    /* ===================================================================
       TYPOGRAPHIC HIERARCHY SCALE
       
       LEVEL 1 (Impossible to Miss):
       - Critical deadlines: 24px
       - Deadline numbers: 28px
       - Action buttons: 18px
       
       LEVEL 2 (Primary Content):
       - Value statements: 16px
       - Phase descriptions: 15px
       
       LEVEL 3 (Secondary Content):
       - Phase headers: 18px (reduced from dominant)
       - Card headers: 15px
       - Body text: 14px
       
       LEVEL 4 (Supporting Detail):
       - Helper text: 13px
       - Scripts/examples: 13px
       - Table content: 13px
       
       SPACING SCALE:
       - Around critical warnings: 48px
       - Around action buttons: 48px  
       - Between phases: 40px
       - Between sections: 32px
       - Between elements: 24px
       - Between cards: 16px
       
       =================================================================== */

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --navy-primary: #0B2545;
      --navy-dark: #0B2545;
      --navy-light: #123A63;
      --teal-primary: #17BEBB;
      --teal-hover: #13a09d;
      --bg-page: #ffffff;
      --bg-white: #ffffff;
      --bg-light: #F7F9FC;
      --bg-card: #ffffff;
      --bg-card-hover: #F7F9FC;
      --border-light: #e5e7eb;
      --border-medium: #d1d5db;
      --border-dark: #9ca3af;
      --text-primary: #1f2937;
      --text-secondary: #4b5563;
      --text-muted: #6b7280;
      --text-white: #ffffff;
      --accent-blue: #3b82f6;
      --accent-green: #10b981;
      --accent-red: #ef4444;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
      --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
    }

    /* Global Navigation Header */
    .global-header,
    header.global-header,
    body .global-header,
    body > .global-header,
    body header.global-header {
      background: linear-gradient(135deg, #0B2545 0%, #123A63 100%) !important;
      background-color: #0B2545 !important;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
      position: sticky !important;
      top: 0 !important;
      z-index: 1000 !important;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
    }

    .global-nav {
      max-width: 1100px !important;
      margin: 0 auto !important;
      display: flex !important;
      align-items: center !important;
      justify-content: flex-start !important;
      padding: 0.5rem 0 0.5rem 20px !important;
      height: auto !important;
      background: transparent !important;
    }

    .nav-brand {
      font-size: 1.125rem !important;
      font-weight: 700 !important;
      color: #ffffff !important;
      text-decoration: none !important;
      margin-right: auto !important;
      padding-right: 40px !important;
      white-space: nowrap !important;
      order: -1 !important;
      flex-shrink: 0 !important;
    }

    .nav-menu {
      display: flex !important;
      align-items: center !important;
      gap: 1rem !important;
      list-style: none !important;
      margin: 0 !important;
      padding: 0 !important;
    }

    .nav-item {
      position: relative !important;
    }

    .nav-link {
      display: flex !important;
      align-items: center !important;
      padding: 10px 20px !important;
      color: #ffffff !important;
      text-decoration: none !important;
      font-size: 0.875rem !important;
      font-weight: 500 !important;
      transition: all 0.2s ease !important;
      border-bottom: 3px solid transparent !important;
      white-space: nowrap !important;
    }

    .nav-link:hover {
      background: rgba(255, 255, 255, 0.1) !important;
      color: #ffffff !important;
    }

    .nav-link.active {
      background: rgba(255, 255, 255, 0.15) !important;
      color: #ffffff !important;
      border-bottom-color: #ffffff !important;
      font-weight: 600 !important;
    }

    .nav-link-primary {
      color: #ffffff !important;
      font-weight: 500 !important;
    }

    .nav-dropdown {
      position: relative;
    }

    .dropdown-toggle::after {
      content: '▼';
      font-size: 10px;
      margin-left: 6px;
      opacity: 0.7;
      transition: transform 0.2s ease;
      display: inline-block;
    }

    .nav-dropdown.open .dropdown-toggle::after {
      transform: rotate(180deg);
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 0 0 8px 8px;
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
      min-width: 200px;
      display: none;
      z-index: 1001;
    }

    /* Show dropdown when .open class is present */
    .nav-dropdown.open .dropdown-menu {
      display: block;
    }

    .dropdown-item {
      display: block;
      padding: 12px 20px;
      color: #1f2937;
      text-decoration: none;
      font-size: 0.875rem;
      transition: background 0.2s;
      border-bottom: 1px solid #e5e7eb;
    }

    .dropdown-item:last-child {
      border-bottom: none;
      border-radius: 0 0 8px 8px;
    }

    .dropdown-item:hover {
      background: #F7F9FC;
      color: #0B2545;
    }

    .nav-subtext {
      display: block;
      font-size: 11px;
      color: rgba(255, 255, 255, 0.6);
      font-weight: 400;
      margin-top: 2px;
    }

    /* Mobile Navigation */
    @media (max-width: 968px) {
      .global-nav {
        padding: 0.5rem 20px;
        height: auto;
        flex-direction: row;
        align-items: center;
      }

      .nav-brand {
        padding: 0;
      }

      .nav-menu {
        display: none;
      }

      .nav-item {
        width: auto;
        border-top: none;
      }

      .nav-link {
        width: auto;
        padding: 0;
        flex-direction: row;
        align-items: center;
        border-bottom: none;
      }

      .nav-link.active {
        border-bottom: none;
        border-left: none;
        padding-left: 0;
      }

      .nav-subtext {
        font-size: 0.75rem;
      }

      .dropdown-menu {
        position: absolute;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        border: 1px solid #e5e7eb;
        border-left: 1px solid #e5e7eb;
        border-radius: 0.5rem;
        margin-left: 0;
        background: #ffffff;
        display: none;
      }

      .nav-dropdown.open .dropdown-menu {
        display: block;
      }

      .dropdown-item {
        color: #1f2937;
        font-size: 0.875rem;
        padding: 10px 16px;
        border-bottom: 1px solid #e5e7eb;
      }

      .dropdown-item:hover {
        background: #F7F9FC;
        color: #0B2545;
      }
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #F7F9FC;
      color: #1f2937;
      min-height: 100vh;
      line-height: 1.6;
      letter-spacing: 0.2px;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0;
    }

    /* Hero Header */
    .page-header {
      margin-bottom: 0;
      text-align: center;
      background: linear-gradient(135deg, #0B2545 0%, #123A63 100%);
      padding: 0.9375rem 0;
      border-radius: 0;
      box-shadow: none;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      width: 100vw;
      margin-left: calc(-50vw + 50%);
      margin-right: calc(-50vw + 50%);
    }

    .page-title {
      font-size: clamp(1.25rem, 2.5vw, 1.875rem);
      font-weight: 700;
      color: #ffffff;
      letter-spacing: -0.02em;
      margin-bottom: 0.5625rem;
      line-height: 1.3;
    }

    .page-subtitle {
      font-size: 1.1rem;
      color: rgba(255, 255, 255, 0.9);
      max-width: 900px;
      margin: 0 auto;
      font-weight: 400;
      line-height: 1.6;
      padding: 0 40px;
    }

    /* Quiet Progress Bar */
    .quiet-progress-bar {
      background: linear-gradient(135deg, #0B2545 0%, #123A63 100%);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 8px 0;
      width: 100vw;
      margin-left: calc(-50vw + 50%);
      margin-right: calc(-50vw + 50%);
    }

    .quiet-progress-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 40px;
    }

    .quiet-progress-text {
      font-size: 0.75rem;
      color: #ffffff;
      font-weight: 500;
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .quiet-progress-track {
      height: 3px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 2px;
      overflow: hidden;
    }

    .quiet-progress-fill {
      height: 100%;
      background: #ffffff;
      transition: width 0.3s ease;
    }

    /* Upcoming Deadlines Section */
    .upcoming-deadlines-section {
      background: #ffffff;
      border: 1px solid #E5E7EB;
      border-radius: 6px;
      padding: 16px 24px;
      margin-bottom: 2rem;
    }

    .upcoming-deadlines-title {
      font-size: 0.875rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 8px;
      text-transform: none;
      letter-spacing: 0;
    }

    .upcoming-deadlines-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .deadline-item {
      font-size: 0.875rem;
      color: #4b5563;
      line-height: 1.5;
    }

    .deadline-item strong {
      color: #1f2937;
      font-weight: 500;
    }

    /* Step Status Indicators */
    .step-status {
      display: inline-block;
      font-size: 0.6875rem;
      font-weight: 500;
      padding: 3px 8px;
      border-radius: 3px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-left: 12px;
    }

    .step-status.completed {
      background: #f3f4f6;
      color: #6b7280;
    }

    .step-status.in-progress {
      background: #f3f4f6;
      color: #0B2545;
    }

    .step-status.upcoming {
      background: #f3f4f6;
      color: #9ca3af;
    }
    
    @media (max-width: 768px) {
      .page-header {
        padding: 0.5625rem 0;
      }
      .page-title {
        font-size: 1.125rem;
        padding: 0 20px;
        margin-bottom: 0.375rem;
      }
      .page-subtitle {
        font-size: 1rem;
        padding: 0 20px;
      }
      
      .quiet-progress-container {
        padding: 0 20px;
      }
      
      .quiet-progress-text {
        font-size: 0.6875rem;
      }
      
      .upcoming-deadlines-section {
        padding: 12px 16px;
        margin-bottom: 1.5rem;
      }
      
      .upcoming-deadlines-title {
        font-size: 0.8125rem;
      }
      
      .deadline-item {
        font-size: 0.8125rem;
      }
      
      .step-status {
        font-size: 0.625rem;
        padding: 2px 6px;
        margin-left: 8px;
      }
    }

    /* Claim Information Panel */
    .claim-info-panel {
      background: linear-gradient(135deg, #0B2545 0%, #123A63 100%);
      border: none;
      border-radius: 0;
      padding: 0;
      margin-bottom: 0;
      box-shadow: none;
      width: 100vw;
      margin-left: calc(-50vw + 50%);
      margin-right: calc(-50vw + 50%);
    }

    .claim-info-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 40px;
      cursor: pointer;
      transition: background 0.2s ease;
      border-bottom: none;
    }

    .claim-info-header:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .claim-info-title {
      font-size: 0.75rem;
      font-weight: 600;
      color: #ffffff;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .claim-info-summary {
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 400;
      margin-left: 6px;
    }

    .panel-toggle-icon {
      font-size: 0.625rem;
      color: rgba(255, 255, 255, 0.8);
      transition: transform 0.2s ease;
      margin-left: 6px;
    }

    .claim-info-panel.expanded .panel-toggle-icon {
      transform: rotate(180deg);
    }

    .claim-info-content {
      display: none;
      padding: 8px 40px 12px 40px;
      background: #ffffff;
    }

    .claim-info-panel.expanded .claim-info-content {
      display: block;
    }

    .btn-edit {
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 0.625rem;
      font-weight: 600;
      color: #ffffff;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-edit:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.5);
      color: #ffffff;
    }

    .claim-info-header-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .claim-info-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 16px;
      margin-bottom: 0;
    }

    .claim-info-details {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 16px;
      margin-top: 8px;
      padding-top: 8px;
      border-top: none;
    }

    .claim-info-item {
      display: inline-flex;
      align-items: baseline;
      gap: 4px;
      white-space: nowrap;
    }

    .info-label {
      font-size: 0.6875rem;
      font-weight: 500;
      color: #6b7280;
      text-transform: none;
      letter-spacing: 0;
    }

    .info-label::after {
      content: ':';
    }

    .info-value {
      font-size: 0.75rem;
      font-weight: 600;
      color: #1f2937;
    }

    .info-value.urgent {
      color: #ef4444;
      font-weight: 700;
    }

    .info-value.status-active {
      color: #17BEBB;
    }

    .deadline-alert {
      background: #fef3c7;
      border: 1px solid #fbbf24;
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 0.6875rem;
      color: #92400e;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 8px;
    }

    .deadline-alert strong {
      font-weight: 700;
      color: #92400e;
    }

    /* Where Are You Section */
    .where-are-you-section {
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      border: 2px solid #3b82f6;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
    }

    .section-heading {
      font-size: 18px;
      font-weight: 700;
      color: var(--navy-dark);
      text-align: center;
      margin-bottom: 6px;
    }

    .section-description {
      font-size: 13px;
      color: var(--text-secondary);
      text-align: center;
      margin-bottom: 12px;
    }

    .quick-jump-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 8px;
    }

    .quick-jump-btn {
      background: white;
      border: 1px solid var(--border-light);
      border-radius: 6px;
      padding: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: left;
    }

    .quick-jump-btn:hover {
      border-color: var(--navy-primary);
      box-shadow: var(--shadow-sm);
      transform: translateY(-1px);
    }

    .jump-icon {
      font-size: 20px;
      flex-shrink: 0;
    }

    .jump-text {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-primary);
      line-height: 1.3;
    }

    .content-area {
      max-width: 1100px;
      margin: 0 auto;
      padding: 3rem 20px;
    }
    
    @media (max-width: 768px) {
      .content-area {
        padding: 1.5rem 20px;
      }
    }

    /* Side Deadlines Block (replaces old progress indicator) */
    .progress-indicator {
      position: fixed;
      top: 80px;
      right: 24px;
      background: #ffffff;
      border: 1px solid #E5E7EB;
      border-radius: 6px;
      padding: 16px;
      max-width: 280px;
      z-index: 1000;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .progress-indicator .upcoming-deadlines-title {
      font-size: 0.875rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 12px;
      text-transform: none;
      letter-spacing: 0;
    }

    .progress-indicator .upcoming-deadlines-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .progress-indicator .deadline-item {
      font-size: 0.8125rem;
      color: #4b5563;
      line-height: 1.5;
    }

    .progress-indicator .deadline-item strong {
      color: #1f2937;
      font-weight: 500;
    }

    /* Hide old progress elements */
    .progress-ring,
    .progress-text,
    .progress-percent,
    .progress-stage,
    .progress-readiness,
    .readiness-icon,
    .readiness-status {
      display: none;
    }
    
    @media (max-width: 768px) {
      .progress-indicator {
        display: none;
      }
    }

    /* Step Accordion - Clean Linear Blocks */
    .step-accordion {
      background: transparent;
      border-radius: 0;
    }

    .accordion-item {
      background: #ffffff;
      border: 1px solid #E5E7EB;
      border-radius: 8px;
      margin-top: 0;
      margin-bottom: 3rem;
      padding: 0;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25), 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: box-shadow 0.2s ease;
      overflow: hidden;
    }
    
    .accordion-item:hover {
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3), 0 6px 16px rgba(0, 0, 0, 0.2);
      transform: none;
    }

    .accordion-item:first-child {
      margin-top: 0;
    }

    .accordion-item:last-child {
      margin-bottom: 0;
    }

    .accordion-item.active {
      background: #ffffff;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25), 0 4px 12px rgba(0, 0, 0, 0.15);
      border-color: #E5E7EB;
    }
    
    .accordion-item.active:hover {
      transform: none;
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3), 0 6px 16px rgba(0, 0, 0, 0.2);
    }
    
    .accordion-item.completed {
      background: #ffffff;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25), 0 4px 12px rgba(0, 0, 0, 0.15);
      opacity: 0.7;
    }
    
    .accordion-item.completed:hover {
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3), 0 6px 16px rgba(0, 0, 0, 0.2);
    }
    
    .accordion-item.step-complete-flash {
      animation: none;
    }
    
    @keyframes stepCompleteFlash {
      0%, 100% {
        background: #ffffff;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25), 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      50% {
        background: #ffffff;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25), 0 4px 12px rgba(0, 0, 0, 0.15);
        transform: none;
      }
    }

    .accordion-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 24px 32px;
      cursor: pointer;
      transition: background 0.2s ease;
      background: transparent;
      border-radius: 0;
      border-bottom: 1px solid #e5e7eb;
    }

    .accordion-header:hover {
      background: rgba(255, 255, 255, 0.5);
    }

    .accordion-item.active .accordion-header {
      background: transparent;
      border-bottom-color: #e5e7eb;
    }

    .accordion-item.completed .accordion-header {
      background: transparent;
      border-bottom-color: #e5e7eb;
    }

    .accordion-left {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      flex: 1;
    }

    .accordion-number-container {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 0;
      flex-shrink: 0;
      margin-right: 20px;
    }

    .accordion-step-label {
      font-size: 0.75rem;
      font-weight: 500;
      color: #6b7280;
      text-transform: none;
      letter-spacing: 0;
      margin-bottom: 4px;
    }

    .accordion-item.active .accordion-step-label {
      color: #6b7280;
    }

    .accordion-item.completed .accordion-step-label {
      color: #6b7280;
    }

    .accordion-number {
      width: auto;
      height: auto;
      border-radius: 0;
      background: transparent;
      border: none;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      font-weight: 600;
      font-size: 2rem;
      color: #0B2545;
      flex-shrink: 0;
      transition: none;
      box-shadow: none;
    }

    .accordion-item.active .accordion-number {
      background: transparent;
      border-color: transparent;
      color: #0B2545;
      box-shadow: none;
    }

    .accordion-item.completed .accordion-number {
      background: transparent;
      border-color: transparent;
      color: #0B2545;
      box-shadow: none;
    }

    .accordion-item.completed .accordion-number::after {
      content: '';
    }

    .accordion-title-area {
      flex: 1;
    }

    .accordion-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1e40af;
      margin-bottom: 8px;
      margin-top: 0;
      line-height: 1.4;
      padding-bottom: 0;
      border-bottom: none;
      letter-spacing: 0;
    }
    
    .accordion-item.active .accordion-title {
      color: #1e40af !important;
      border-bottom-color: transparent;
    }
    
    .accordion-item.completed .accordion-title {
      color: #1e40af;
    }

    .accordion-subtitle {
      font-size: 0.9375rem;
      color: #6b7280;
      line-height: 1.6;
      margin-top: 0;
    }

    .accordion-item.active .accordion-subtitle {
      color: #6b7280 !important;
    }

    .accordion-toggle {
      font-size: 1rem;
      color: #9ca3af;
      transition: transform 0.2s ease;
      flex-shrink: 0;
    }

    .accordion-item.active .accordion-toggle {
      transform: rotate(180deg);
      color: #9ca3af !important;
    }

    .accordion-content {
      display: none;
      padding: 32px;
      background: #ffffff;
      margin: 0;
      margin-top: 0;
      border-radius: 0;
      border-top: none;
    }

    .accordion-item.active .accordion-content {
      display: block;
      background: #ffffff;
    }
    
    .accordion-item.completed .accordion-content {
      background: #ffffff;
    }
    
    @media (max-width: 768px) {
      .accordion-content {
        padding: 24px 20px;
      }
    }

    /* Accordion Content Sections */
    .accordion-content .step-warning {
      background: #fef9e7;
      border-left: 3px solid #f59e0b;
      padding: 10px 14px;
      border-radius: 6px;
      margin-bottom: 16px;
    }

    .accordion-content .step-warning strong {
      color: #92400e;
      font-weight: 700;
      display: block;
      margin-bottom: 4px;
    }

    .accordion-content .step-warning-text {
      font-size: 13px;
      color: #78350f;
    }

    .accordion-content .content-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 16px;
    }

    @media (max-width: 968px) {
      .accordion-content .content-grid {
        grid-template-columns: 1fr;
      }
    }

    .accordion-content .section-block {
      background: white;
      border: 1px solid #e5e9ef;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
      transition: all 0.2s ease;
    }
    
    .accordion-content .section-block:hover {
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      transform: translateY(-1px);
    }

    .accordion-content .section-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-primary);
      margin-bottom: 12px;
    }

    .accordion-content .task-list {
      list-style: none;
      padding: 0;
    }

    .accordion-content .task-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 10px 12px;
      margin-bottom: 6px;
      background: white;
      border-radius: 6px;
      border: 1px solid #e5e9ef;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03);
      transition: all 0.15s ease;
    }
    
    .accordion-content .task-item:hover {
      border-color: #cbd5e1;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      transform: translateX(2px);
    }

    .accordion-content .task-checkbox {
      width: 18px;
      height: 18px;
      border: 2px solid var(--border-dark);
      border-radius: 4px;
      flex-shrink: 0;
      margin-top: 2px;
      cursor: pointer;
      background: white;
    }

    .accordion-content .task-checkbox.checked {
      background: #10b981;
      border-color: #10b981;
      position: relative;
    }

    .accordion-content .task-checkbox.checked::after {
      content: '✓';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 11px;
      font-weight: bold;
    }

    .accordion-content .task-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .accordion-content .tool-grid {
      display: grid;
      gap: 8px;
    }

    .accordion-content .tool-card {
      background: white;
      border: 1px solid #e5e9ef;
      border-radius: 8px;
      padding: 12px 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03);
    }

    .accordion-content .tool-card:hover {
      border-color: #3b82f6;
      box-shadow: 0 3px 10px rgba(59, 130, 246, 0.12);
      transform: translateY(-1px);
      background: linear-gradient(135deg, #ffffff 0%, #eff6ff 100%);
    }

    .accordion-content .tool-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .accordion-content .tool-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
    }

    .accordion-content .tool-arrow {
      color: var(--navy-primary);
      font-weight: bold;
    }

    .accordion-content .tool-desc {
      font-size: 12px;
      color: var(--text-secondary);
    }

    .accordion-content .tool-badge {
      display: inline-block;
      font-size: 9px;
      font-weight: 700;
      padding: 3px 6px;
      border-radius: 3px;
      margin-top: 6px;
      text-transform: uppercase;
    }

    .accordion-content .tool-badge.required {
      background: #fee2e2;
      color: #dc2626;
    }

    .accordion-content .tool-badge.recommended {
      background: #dbeafe;
      color: #2563eb;
    }

    .accordion-content .tool-badge.situational {
      background: #fef3c7;
      color: #d97706;
    }

    .accordion-content .step-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid var(--border-light);
    }

    .accordion-content .btn {
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .accordion-content .btn-primary {
      background: var(--gold-accent);
      color: var(--navy-dark);
    }

    .accordion-content .btn-primary:hover {
      background: #c49b2e;
    }

    /* Next Step Preview - Minimal */
    .next-step-preview {
      margin-top: 32px;
      padding: 0;
      background: transparent;
      border: none;
      border-radius: 0;
      font-size: 0.75rem;
      color: #9ca3af;
      text-align: center;
    }

    .next-step-preview-label {
      font-weight: 500;
      text-transform: none;
      letter-spacing: 0;
      margin-bottom: 4px;
    }

    .next-step-preview-title {
      color: #6b7280;
      font-weight: 400;
      font-size: 0.875rem;
    }

    /* Claim Readiness Status Indicator */
    .readiness-indicator {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 4px;
      padding: 8px 12px;
      margin-top: 48px;
      margin-bottom: 8px;
      display: flex;
      justify-content: center;
      text-align: center;
    }

    /* Instruction Summary Block */
    .instruction-summary {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 24px 32px;
      margin-bottom: 32px;
      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .instruction-summary-title {
      font-size: 20px;
      font-weight: 700;
      color: #0f172a;
      margin: 0 0 24px 0;
      text-align: center;
    }

    .instruction-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 16px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .instruction-card {
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      padding: 16px;
      display: flex;
      align-items: flex-start;
      gap: 12px;
      transition: all 0.2s ease;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .instruction-card:hover {
      border-color: #cbd5e1;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
      transform: translateY(-1px);
    }

    .instruction-card-number {
      flex-shrink: 0;
      width: 28px;
      height: 28px;
      background: #0a1628;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 13px;
    }

    .instruction-card-text {
      flex: 1;
      font-size: 14px;
      line-height: 1.5;
      color: #374151;
      padding-top: 4px;
    }

    /* Step-by-Step Claim Guide Section Title */
    .claim-steps-title {
      font-size: 1.8rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 1.25rem;
      margin-top: 0;
      text-align: center;
      letter-spacing: 0;
      max-width: 100%;
      margin-left: auto;
      margin-right: auto;
      white-space: nowrap;
      padding: 0 20px;
    }

    .claim-steps-subtitle {
      font-size: 1rem;
      font-weight: 400;
      color: #6b7280;
      margin: 0 0 2.25rem 0;
      text-align: center;
      letter-spacing: 0;
    }
    
    @media (max-width: 768px) {
      .claim-steps-title {
        font-size: 1.62rem;
        white-space: normal;
      }
      .claim-steps-subtitle {
        margin-bottom: 1.5rem;
      }
    }

    .step-critical-warning {
      background: #fef3c7;
      border-left: 3px solid #f59e0b;
      padding: 12px 16px;
      border-radius: 5px;
      margin-bottom: 24px;
      font-size: 0.875rem;
      color: #92400e;
      font-weight: 500;
    }

    /* What This Prevents */
    .what-prevents {
      background: #eff6ff;
      border-left: 4px solid #3b82f6;
      padding: 12px 16px;
      border-radius: 6px;
      margin-bottom: 16px;
      font-size: 13px;
      color: #1e40af;
    }

    .what-prevents strong {
      font-weight: 700;
      display: block;
      margin-bottom: 4px;
    }

    /* Guardrail Warning */
    .guardrail-warning {
      background: #fee2e2;
      border-left: 4px solid #dc2626;
      padding: 12px 16px;
      border-radius: 6px;
      margin-bottom: 16px;
      font-size: 13px;
      color: #991b1b;
    }

    .guardrail-warning strong {
      font-weight: 700;
      display: block;
      margin-bottom: 4px;
    }

    /* Step 1 Refactored - Minimized Informational Note */
    .step-info-note {
      font-size: 0.875rem;
      color: #6b7280;
      margin-top: 24px;
      margin-bottom: 0;
      line-height: 1.6;
      font-style: italic;
    }

    .step-info-note-icon {
      display: none;
    }

    /* Tasks Intro (for Steps 2+) */
    .tasks-intro {
      font-size: 14px;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 16px;
      padding: 12px 16px;
      background: #eff6ff;
      border-left: 3px solid #3b82f6;
      border-radius: 4px;
    }

    /* Before You Continue (for Steps 2+) */
    .before-you-continue {
      background: #fef9e7;
      border: 2px solid #f59e0b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 20px;
    }

    .before-you-continue-title {
      font-size: 15px;
      font-weight: 700;
      color: #92400e;
      margin-bottom: 12px;
    }

    .before-you-continue-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .before-you-continue-item {
      font-size: 13px;
      color: #78350f;
      margin-bottom: 6px;
      padding-left: 0;
      line-height: 1.5;
    }

    .before-you-continue-item:last-child {
      margin-bottom: 0;
    }

    .before-you-continue-item strong {
      font-weight: 700;
      color: #92400e;
    }

    /* Step 1 - Primary Action Container */
    .primary-action-container {
      margin-bottom: 32px;
      padding: 0;
      background: transparent;
      border-radius: 0;
      border: none;
    }

    .primary-action-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: #1f2937;
      margin: 0 0 12px 0;
    }

    .primary-action-description {
      font-size: 0.9375rem;
      color: #6b7280;
      line-height: 1.6;
      margin: 0 0 16px 0;
    }

    /* Step 1 - Report Sections Container */
    .report-sections-container {
      margin-bottom: 32px;
      padding: 0;
      background: transparent;
      border-radius: 0;
      border: none;
    }

    .report-sections-title {
      font-size: 1rem;
      font-weight: 600;
      color: #1f2937;
      margin: 0 0 8px 0;
    }

    .report-sections-description {
      font-size: 0.875rem;
      color: #6b7280;
      line-height: 1.6;
      margin: 0 0 16px 0;
    }

    .report-sections-list {
      margin-top: 16px;
      padding: 0;
      background: transparent;
      border-radius: 0;
      font-size: 0.875rem;
      color: #6b7280;
    }

    .report-sections-list strong {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #1f2937;
    }

    .report-sections-list ul {
      margin: 0;
      padding-left: 20px;
      list-style: disc;
    }

    .report-sections-list li {
      margin-bottom: 6px;
      line-height: 1.6;
    }

    .report-sections-list li:last-child {
      margin-bottom: 0;
    }

    /* TASKS - PRIMARY WORK SURFACE (HIGHEST VISUAL WEIGHT) */
    
    /* Section Anchor */
    .section-anchor-tasks {
      font-size: 0.875rem;
      font-weight: 600;
      color: #1f2937;
      text-transform: none;
      letter-spacing: 0;
      margin-bottom: 16px;
      margin-top: 0;
    }

    /* Task List Container - Full width, clear work surface */
    .task-list-sequential {
      list-style: none;
      padding: 0;
      margin: 0 0 32px 0;
      background: transparent;
      border: none;
      border-left: none;
      padding: 0;
      border-radius: 0;
      position: relative;
    }

    /* Vertical guide line */
    .task-list-sequential::before {
      display: none;
    }

    .task-item-sequential {
      margin-bottom: 24px;
      padding: 0;
      background: transparent;
      border: none;
      border-radius: 0;
      transition: none;
      box-shadow: none;
    }

    .task-item-sequential:last-child {
      margin-bottom: 0;
    }

    .task-item-sequential:hover {
      border-color: transparent;
      box-shadow: none;
      transform: none;
      background: transparent;
    }

    .task-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: auto;
      height: auto;
      background: transparent;
      color: #0B2545;
      border-radius: 0;
      font-weight: 500;
      font-size: 0.875rem;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .task-header-sequential {
      display: flex;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .task-title-sequential {
      font-size: 1rem;
      font-weight: 600;
      color: #1f2937;
      flex: 1;
      line-height: 1.5;
    }

    .task-description-sequential {
      font-size: 0.9375rem;
      color: #6b7280;
      margin-left: 0;
      margin-top: 8px;
      line-height: 1.6;
    }

    /* TOOLS - CLICKABLE AND FUNCTIONAL */
    .task-tool-inline {
      margin: 12px 0 0 0;
      padding: 8px 12px;
      background: rgba(23, 190, 187, 0.05);
      border: 1px solid rgba(23, 190, 187, 0.2);
      border-radius: 6px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
    }

    .task-tool-inline:hover {
      background: rgba(23, 190, 187, 0.1);
      border-color: rgba(23, 190, 187, 0.4);
      transform: translateX(4px);
    }

    .task-tool-inline:hover .task-tool-title {
      color: #13a09d;
    }

    .task-tool-inline:hover .task-tool-arrow {
      color: #13a09d;
      transform: translateX(2px);
    }

    .task-tool-arrow {
      font-size: 1.75rem;
      color: #17BEBB;
      flex-shrink: 0;
      font-weight: 600;
      transition: transform 0.2s ease;
    }

    .task-tool-label {
      font-size: 1.75rem;
      font-weight: 400;
      color: #6b7280;
      text-transform: none;
      letter-spacing: 0;
      flex-shrink: 0;
    }

    .task-tool-title {
      font-size: 1.75rem;
      font-weight: 600;
      color: #17BEBB;
      flex: 1;
      text-transform: none;
    }

    .task-tool-classification {
      font-size: 1.5rem;
      font-weight: 400;
      padding: 2px 6px;
      border-radius: 3px;
      text-transform: none;
      letter-spacing: 0;
      opacity: 0.7;
      color: #6b7280;
    }

    .task-tool-classification.optional {
      background: transparent;
    }

    .task-tool-classification.required {
      background: transparent;
    }

    .task-tool-classification.situational {
      background: transparent;
    }

    /* Additional Tools - Minimal Visual Weight */
    
    .section-anchor-tools {
      font-size: 0.875rem;
      font-weight: 600;
      color: #1f2937;
      text-transform: none;
      letter-spacing: 0;
      margin-bottom: 12px;
      margin-top: 32px;
    }

    .additional-tools-section {
      margin-top: 12px;
      padding: 0;
      background: transparent;
      border: none;
    }

    .additional-tools-title {
      display: none;
    }

    .additional-tools-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .additional-tool-item {
      padding: 6px 10px;
      background: rgba(23, 190, 187, 0.03);
      border: 1px solid rgba(23, 190, 187, 0.15);
      border-radius: 4px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
    }

    .additional-tool-item:last-child {
      margin-bottom: 0;
    }

    .additional-tool-item:hover {
      background: rgba(23, 190, 187, 0.08);
      border-color: rgba(23, 190, 187, 0.3);
      transform: translateX(3px);
    }

    .additional-tool-item:hover .additional-tool-title {
      color: #13a09d;
    }

    .additional-tool-item:hover .additional-tool-arrow {
      color: #13a09d;
      transform: translateX(2px);
    }

    .additional-tool-arrow {
      font-size: 1.5rem;
      color: #17BEBB;
      font-weight: 600;
      transition: transform 0.2s ease;
    }

    .additional-tool-title {
      font-size: 1.75rem;
      font-weight: 400;
      color: #17BEBB;
      flex: 1;
    }

    /* Policy Flags - Coinsurance Warning */
    .coinsurance-warning {
      margin-top: 20px;
      padding: 16px 20px;
      background: #fef3c7;
      border: 2px solid #f59e0b;
      border-left: 4px solid #f59e0b;
      border-radius: 8px;
    }

    .coinsurance-title {
      font-size: 14px;
      font-weight: 700;
      color: #92400e;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .coinsurance-content {
      font-size: 13px;
      color: #78350f;
      line-height: 1.6;
    }

    .coinsurance-requirement {
      display: inline-block;
      background: #fed7aa;
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: 600;
      margin: 0 2px;
    }

    /* Policyholder Duties Checklist */
    .policyholder-duties {
      margin-top: 20px;
      padding: 18px 20px;
      background: #eff6ff;
      border: 2px solid #3b82f6;
      border-left: 4px solid #3b82f6;
      border-radius: 8px;
    }

    .duties-title {
      font-size: 14px;
      font-weight: 700;
      color: #1e40af;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .duties-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .duty-item {
      padding: 10px 12px;
      background: white;
      border: 1px solid #bfdbfe;
      border-radius: 6px;
      margin-bottom: 8px;
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .duty-item:last-child {
      margin-bottom: 0;
    }

    .duty-icon {
      font-size: 16px;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .duty-content {
      flex: 1;
    }

    .duty-text {
      font-size: 13px;
      font-weight: 600;
      color: #1e3a5f;
      margin-bottom: 4px;
    }

    .duty-meta {
      font-size: 11px;
      color: #64748b;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .duty-deadline {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .duty-link {
      color: #2563eb;
      text-decoration: none;
      cursor: pointer;
      font-weight: 600;
    }

    .duty-link:hover {
      text-decoration: underline;
    }

    /* Expert Guidance Block */
    .expert-guidance {
      margin-top: 20px;
      padding: 18px 20px;
      background: #f0fdf4;
      border: 2px solid #86efac;
      border-left: 4px solid #22c55e;
      border-radius: 8px;
    }

    .expert-guidance-title {
      font-size: 14px;
      font-weight: 700;
      color: #166534;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .expert-conditions {
      margin-bottom: 16px;
    }

    .expert-conditions ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .expert-conditions li {
      padding: 8px 12px;
      background: white;
      border: 1px solid #bbf7d0;
      border-radius: 6px;
      margin-bottom: 6px;
      font-size: 13px;
      color: #166534;
      line-height: 1.5;
      padding-left: 32px;
      position: relative;
    }

    .expert-conditions li:last-child {
      margin-bottom: 0;
    }

    .expert-conditions li:before {
      content: "→";
      position: absolute;
      left: 12px;
      color: #22c55e;
      font-weight: bold;
    }

    .expert-types {
      padding-top: 12px;
      border-top: 1px solid #bbf7d0;
    }

    .expert-types-title {
      font-size: 12px;
      font-weight: 700;
      color: #166534;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 10px;
    }

    .expert-type-list {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }

    .expert-type-item {
      padding: 8px 10px;
      background: white;
      border: 1px solid #bbf7d0;
      border-radius: 4px;
      font-size: 12px;
    }

    .expert-type-name {
      font-weight: 600;
      color: #166534;
      display: block;
      margin-bottom: 2px;
    }

    .expert-type-when {
      font-size: 11px;
      color: #4ade80;
      font-style: italic;
    }

    @media (max-width: 768px) {
      .expert-type-list {
        grid-template-columns: 1fr;
      }
    }

    /* Mitigation Guidance Block (Step 2) */
    .mitigation-guidance {
      margin-top: 20px;
      padding: 18px 20px;
      background: #fef2f2;
      border: 2px solid #fca5a5;
      border-left: 4px solid #ef4444;
      border-radius: 8px;
    }

    .mitigation-guidance-title {
      font-size: 14px;
      font-weight: 700;
      color: #991b1b;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .mitigation-explanation {
      font-size: 13px;
      color: #7f1d1d;
      line-height: 1.6;
      margin-bottom: 16px;
      padding: 10px 12px;
      background: #fee2e2;
      border-radius: 4px;
    }

    .mitigation-section {
      margin-bottom: 12px;
    }

    .mitigation-section:last-child {
      margin-bottom: 0;
    }

    .mitigation-section-title {
      font-size: 12px;
      font-weight: 700;
      color: #991b1b;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .mitigation-section ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .mitigation-section li {
      padding: 8px 12px;
      background: white;
      border: 1px solid #fecaca;
      border-radius: 4px;
      margin-bottom: 6px;
      font-size: 13px;
      color: #7f1d1d;
      padding-left: 32px;
      position: relative;
    }

    .mitigation-section li:last-child {
      margin-bottom: 0;
    }

    .mitigation-section li:before {
      content: "!";
      position: absolute;
      left: 12px;
      width: 18px;
      height: 18px;
      background: #ef4444;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 12px;
    }

    .mitigation-reimbursement {
      margin-top: 12px;
      padding: 10px 12px;
      background: #dcfce7;
      border: 1px solid #86efac;
      border-radius: 4px;
      font-size: 12px;
      color: #166534;
      font-weight: 600;
    }

    /* Mitigation Capture Block (Step 3) */
    .mitigation-capture {
      margin-top: 20px;
      padding: 18px 20px;
      background: #eff6ff;
      border: 2px solid #93c5fd;
      border-left: 4px solid #3b82f6;
      border-radius: 8px;
    }

    .mitigation-capture-title {
      font-size: 14px;
      font-weight: 700;
      color: #1e40af;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .mitigation-instructions {
      font-size: 13px;
      color: #1e3a8a;
      line-height: 1.6;
      margin-bottom: 12px;
    }

    .mitigation-upload-types {
      display: grid;
      gap: 8px;
    }

    .mitigation-upload-item {
      padding: 10px 12px;
      background: white;
      border: 1px solid #bfdbfe;
      border-radius: 6px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .mitigation-upload-type {
      font-size: 13px;
      font-weight: 600;
      color: #1e40af;
    }

    .mitigation-upload-desc {
      font-size: 12px;
      color: #64748b;
    }

    .mitigation-flow-note {
      margin-top: 12px;
      padding: 10px 12px;
      background: #dcfce7;
      border: 1px solid #86efac;
      border-radius: 4px;
      font-size: 12px;
      color: #166534;
      font-weight: 600;
    }

    /* Post-Claim Asset Section */
    .post-claim-section {
      background: #f9fafb;
      color: #0f172a;
      padding: 32px;
      border-radius: 12px;
      margin-top: 32px;
      border: 1px solid #e5e7eb;
    }

    .post-claim-section h3 {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 12px;
      color: #0f172a;
    }

    .post-claim-section p {
      font-size: 14px;
      line-height: 1.6;
      margin-bottom: 20px;
      color: #4b5563;
    }

    .post-claim-actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .btn-post-claim {
      padding: 12px 24px;
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }

    .btn-post-claim:hover {
      background: #2563eb;
      transform: translateY(-1px);
    }

    .btn-post-claim.secondary {
      background: white;
      color: #1f2937;
      border: 1px solid #d1d5db;
    }

    .btn-post-claim.secondary:hover {
      background: #f3f4f6;
      border-color: #9ca3af;
    }

    /* Critical Claim Deadlines Section */
    /* Critical Claim Deadlines */
    .critical-deadlines {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 4px;
      padding: 8px 10px;
      margin-bottom: 8px;
    }

    .critical-deadlines-header {
      margin-bottom: 4px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .critical-deadlines-title {
      font-size: 17px;
      font-weight: 600;
      color: #0f172a;
      margin-bottom: 1px;
    }

    .critical-deadlines-subtext {
      font-size: 11px;
      color: #6b7280;
      margin-bottom: 8px;
    }

    .critical-deadlines-toggle {
      font-size: 10px;
      color: #6b7280;
      transition: transform 0.2s;
    }

    .critical-deadlines.expanded .critical-deadlines-toggle {
      transform: rotate(180deg);
    }

    .deadline-list {
      display: none;
    }

    .critical-deadlines.expanded .deadline-list {
      display: block;
      padding-top: 8px;
    }

    /* Active Step Section */
    .active-step-section {
      background: var(--bg-white);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
      box-shadow: var(--shadow-sm);
    }

    .active-step-header {
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 2px solid var(--border-light);
    }

    .active-step-label {
      display: inline-block;
      background: var(--navy-primary);
      color: white;
      font-size: 10px;
      font-weight: 700;
      padding: 4px 10px;
      border-radius: 4px;
      margin-bottom: 8px;
      letter-spacing: 0.5px;
    }

    .active-step-title {
      font-size: 22px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 6px;
      line-height: 1.2;
    }

    .active-step-subtitle {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .step-content-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 16px;
    }

    @media (max-width: 968px) {
      .step-content-grid {
        grid-template-columns: 1fr;
      }
    }

    .content-section {
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      padding: 16px;
    }

    .section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--border-light);
    }

    .section-icon {
      font-size: 20px;
    }

    .section-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--navy-primary);
    }

    .task-list {
      list-style: none;
    }

    .task-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 16px;
      margin-bottom: 12px;
      background: var(--bg-white);
      border-radius: 8px;
      border: 1px solid var(--border-light);
      transition: all 0.2s ease;
    }

    .task-item:hover {
      border-color: var(--border-medium);
      box-shadow: var(--shadow-sm);
    }

    .task-checkbox {
      width: 22px;
      height: 22px;
      border: 2px solid var(--border-dark);
      border-radius: 5px;
      flex-shrink: 0;
      margin-top: 2px;
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--bg-white);
    }

    .task-checkbox:hover {
      border-color: var(--navy-primary);
    }

    .task-checkbox.checked {
      background: #10b981;
      border-color: #10b981;
      position: relative;
    }

    .task-checkbox.checked::after {
      content: '✓';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 14px;
      font-weight: bold;
    }

    .task-item-sequential:has(.task-checkbox.checked) .task-title-sequential,
    .task-item-sequential:has(.task-checkbox.checked) .task-description-sequential {
      opacity: 0.6;
    }

    .task-content {
      flex: 1;
    }

    .task-title {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .task-description {
      font-size: 13px;
      color: var(--text-muted);
    }

    .tool-grid {
      display: grid;
      gap: 12px;
    }

    .tool-card {
      background: var(--bg-white);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      padding: 18px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tool-card:hover {
      border-color: var(--navy-primary);
      box-shadow: var(--shadow-md);
      transform: translateX(4px);
    }

    .tool-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .tool-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--navy-dark);
    }

    .tool-arrow {
      color: var(--navy-primary);
      font-size: 20px;
      font-weight: bold;
    }

    .tool-description {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .tool-classification {
      display: inline-block;
      font-size: 11px;
      font-weight: 700;
      padding: 4px 8px;
      border-radius: 4px;
      margin-top: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .tool-classification.required {
      background: #fee2e2;
      color: #dc2626;
    }

    .tool-classification.recommended {
      background: #dbeafe;
      color: #2563eb;
    }

    .tool-classification.situational {
      background: #fef3c7;
      color: #d97706;
    }

    .step-warning {
      background: #fef9e7;
      border-left: 4px solid #f59e0b;
      padding: 16px 20px;
      margin-bottom: 24px;
      border-radius: 6px;
    }

    .step-warning strong {
      color: #92400e;
      font-weight: 700;
    }

    .step-warning-text {
      font-size: 14px;
      color: #78350f;
      margin-top: 4px;
    }

    .document-list {
      list-style: none;
    }

    .document-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px;
      margin-bottom: 10px;
      background: var(--bg-white);
      border-radius: 8px;
      border: 1px solid var(--border-light);
      flex-wrap: wrap;
    }

    .document-icon {
      font-size: 22px;
      flex-shrink: 0;
    }

    .document-name {
      flex: 1;
      min-width: 200px;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
    }

    .document-status {
      font-size: 12px;
      padding: 5px 10px;
      border-radius: 5px;
      font-weight: 600;
    }

    .document-status.required {
      background: #fee2e2;
      color: #dc2626;
    }

    .document-status.optional {
      background: #fef3c7;
      color: #d97706;
    }

    .btn-example {
      background: var(--bg-cream);
      border: 1px solid var(--border-medium);
      padding: 6px 12px;
      border-radius: 5px;
      font-size: 12px;
      font-weight: 600;
      color: var(--navy-primary);
      cursor: pointer;
      transition: all 0.2s ease;
      margin-right: 8px;
    }

    .btn-example:hover {
      background: var(--navy-primary);
      color: white;
    }

    /* Common Problems Section */
    .common-problems-section {
      background: #fef9e7;
      border: 2px solid #f59e0b;
      border-radius: 12px;
      margin-top: 32px;
      overflow: hidden;
    }

    .problems-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 20px 24px;
      cursor: pointer;
      background: #fef3c7;
      transition: all 0.2s ease;
    }

    .problems-header:hover {
      background: #fde68a;
    }

    .problems-icon {
      font-size: 24px;
    }

    .problems-title {
      flex: 1;
      font-size: 18px;
      font-weight: 700;
      color: #92400e;
    }

    .problems-toggle {
      font-size: 18px;
      color: #92400e;
      transition: transform 0.3s ease;
    }

    .problems-header.open .problems-toggle {
      transform: rotate(180deg);
    }

    .problems-content {
      padding: 24px;
    }

    .problem-item {
      margin-bottom: 24px;
      padding-bottom: 24px;
      border-bottom: 1px solid #fde68a;
    }

    .problem-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .problem-question {
      font-size: 16px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 12px;
    }

    .problem-answer {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .problem-answer ul {
      margin-top: 8px;
      padding-left: 24px;
      list-style: disc;
    }

    .problem-answer li {
      margin-bottom: 6px;
    }

    /* Step Actions */
    .step-actions {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      padding-top: 32px;
      border-top: 1px solid #e5e7eb;
      margin-bottom: 0;
      margin-top: 32px;
    }

    .action-right-group {
      display: flex;
      gap: 12px;
    }

    .action-note {
      text-align: center;
      font-size: 14px;
      color: var(--text-secondary);
      padding: 12px;
      background: var(--bg-cream);
      border-radius: 8px;
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border-radius: 5px;
      font-size: 0.9rem;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: background 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .btn-primary {
      background: #17BEBB;
      color: #ffffff;
      font-weight: 600;
    }

    .btn-primary:hover {
      background: #13a09d;
      box-shadow: none;
      transform: none;
    }

    .btn-secondary {
      background: transparent;
      color: #4b5563;
      border: 1px solid #d1d5db;
    }

    .btn-secondary:hover {
      background: #F7F9FC;
      color: #1f2937;
      border-color: #9ca3af;
    }

    .btn-save {
      background: var(--bg-white);
      color: var(--accent-blue);
      border: 2px solid var(--accent-blue);
      font-weight: 600;
    }

    .btn-save:hover {
      background: var(--accent-blue);
      color: white;
    }

    .btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    /* Visual Roadmap */
    .visual-roadmap {
      background: linear-gradient(135deg, var(--navy-primary) 0%, var(--navy-dark) 100%);
      border-radius: 8px;
      padding: 20px 32px;
      margin-top: 16px;
      box-shadow: none;
    }

    .roadmap-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .roadmap-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-white);
      margin-bottom: 4px;
    }

    .roadmap-subtitle {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.8);
    }

    .roadmap-track {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      position: relative;
      padding: 0 20px;
    }

    .roadmap-line {
      position: absolute;
      top: 20px;
      left: 60px;
      right: 60px;
      height: 3px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 2px;
    }

    .roadmap-line-progress {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background: var(--gold-accent);
      transition: width 0.6s ease-out;
      border-radius: 2px;
      box-shadow: 0 0 12px rgba(212, 175, 55, 0.6);
    }

    .roadmap-node {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 1;
      max-width: 120px;
    }

    .roadmap-circle {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--navy-dark);
      border: 3px solid rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 16px;
      transition: all 0.3s ease;
      font-weight: 700;
      font-size: 16px;
      color: rgba(255, 255, 255, 0.5);
    }

    .roadmap-node.completed .roadmap-circle {
      border-color: var(--accent-green);
      background: var(--accent-green);
    }

    .roadmap-node.completed .roadmap-circle::after {
      content: '✓';
      color: white;
      font-size: 18px;
    }

    .roadmap-node.active .roadmap-circle {
      background: var(--gold-accent);
      border-color: var(--gold-accent);
      color: var(--navy-dark);
      box-shadow: 0 0 24px rgba(212, 175, 55, 0.6);
      font-weight: 800;
    }

    .roadmap-label {
      font-size: 13px;
      font-weight: 600;
      text-align: center;
      line-height: 1.3;
      color: rgba(255, 255, 255, 0.9);
    }

    .roadmap-node.completed .roadmap-label {
      color: rgba(255, 255, 255, 0.6);
    }

    .roadmap-node.active .roadmap-label {
      color: white;
      font-weight: 700;
    }

    .roadmap-node.pending .roadmap-label {
      color: rgba(255, 255, 255, 0.4);
    }

    .roadmap-microcopy {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.6);
      margin-top: 4px;
      text-align: center;
    }

    .roadmap-node.pending .roadmap-microcopy {
      display: none;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 20px 16px;
      }

      .page-header {
        padding: 12px 24px;
        border-radius: 0;
      }

      .page-title {
        font-size: 28px;
      }

      .page-subtitle {
        font-size: 16px;
      }

      .progress-indicator {
        top: 12px;
        right: 12px;
        padding: 8px 12px;
      }

      .claim-info-panel {
        padding: 0;
      }

      .claim-info-header {
        padding: 6px 20px;
      }

      .claim-info-content {
        padding: 6px 20px 8px 20px;
      }

      .claim-info-title {
        font-size: 0.625rem;
        flex-direction: column;
        align-items: flex-start;
        gap: 3px;
      }

      .claim-info-summary {
        font-size: 0.625rem;
        margin-left: 0;
      }

      .claim-info-grid {
        grid-template-columns: 1fr 1fr;
        gap: 8px;
      }

      .claim-info-details {
        grid-template-columns: 1fr;
        gap: 8px;
      }

      .quick-jump-grid {
        grid-template-columns: 1fr;
      }

      .step-list {
        grid-template-columns: 1fr;
      }

      .step-content-grid {
        grid-template-columns: 1fr;
      }

      .active-step-section {
        padding: 24px;
      }

      .active-step-title {
        font-size: 24px;
      }

      .step-actions {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
      }

      .action-right-group {
        flex-direction: column;
        width: 100%;
      }

      .btn {
        width: 100%;
        justify-content: center;
      }

      .roadmap-track {
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        padding: 0 20px;
      }

      .roadmap-line {
        display: none;
      }

      .roadmap-node {
        max-width: 100px;
      }

      .document-item {
        flex-direction: column;
        align-items: flex-start;
      }

      .document-name {
        width: 100%;
      }

      .btn-example {
        align-self: flex-start;
      }
    }

    /* ===== STEP 1 ENHANCED STYLES ===== */
    
    /* Value Statement - Bottom (subtle, small) */
    .value-statement-bottom {
      background: transparent;
      border: none;
      padding: 16px 0;
      margin-top: 24px;
      margin-bottom: 24px;
      font-size: 12px;
      line-height: 1.5;
      color: #9ca3af;
      text-align: left;
    }

    .value-statement-bottom strong {
      color: #6b7280;
      display: inline;
      margin-right: 4px;
      font-size: 12px;
      font-weight: 600;
    }

    /* Process Phases */
    .process-phases {
      display: grid;
      gap: 24px;
      margin-bottom: 32px;
    }

    /* ===================================================================
       VISUAL HIERARCHY SYSTEM - Size & Space (Not Color)
       =================================================================== */

    /* Phase Card Base - More Breathing Room */
    .phase-card {
      background: white;
      border: 1px solid #e8edf2;
      border-radius: 12px;
      padding: 40px;
      margin-bottom: 40px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }

    .phase-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    /* Phase Header - Reduce Visual Weight */
    .phase-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 32px;
      padding-bottom: 20px;
      border-bottom: 1px solid #e8edf2;
    }

    .phase-number {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--navy-primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: 600;
      flex-shrink: 0;
    }

    .phase-header h4 {
      font-size: 18px;
      font-weight: 600;
      color: var(--navy-dark);
      margin: 0;
      line-height: 1.3;
    }

    .phase-header p {
      font-size: 14px;
      color: var(--text-secondary);
      margin: 4px 0 0 0;
      line-height: 1.4;
    }

    /* Phase Content - More Space */
    .phase-content {
      padding: 0;
    }

    .phase-intro {
      font-size: 15px;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: 40px;
    }

    /* ===================================================================
       CRITICAL WARNINGS - Dominate Visually Through Size
       =================================================================== */

    .critical-deadline-alert,
    .urgent-deadline-banner,
    .rcv-deadline-warning,
    .guardrail-warning,
    .step-warning {
      background: #fee2e2;
      border: 3px solid #dc2626;
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 48px;
      text-align: center;
    }

    .critical-deadline-alert strong,
    .urgent-deadline-banner .deadline-title,
    .rcv-deadline-warning strong {
      display: block;
      font-size: 24px;
      font-weight: 700;
      color: #991b1b;
      margin-bottom: 16px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      line-height: 1.2;
    }

    .critical-deadline-alert p,
    .urgent-deadline-banner .deadline-warning,
    .rcv-deadline-warning p {
      font-size: 16px;
      color: #991b1b;
      line-height: 1.6;
      font-weight: 500;
    }

    /* Deadline Numbers - HUGE */
    .deadline-date,
    .deadline-countdown,
    .rcv-deadline-warning .deadline-warn-content p span {
      font-size: 28px;
      font-weight: 700;
      color: #dc2626;
    }

    /* ===================================================================
       ACTION BUTTONS - Make Them DOMINATE
       =================================================================== */

    .btn-phase-action,
    .btn-complete-step {
      display: block;
      width: 100%;
      background: var(--gold-accent);
      color: var(--navy-dark);
      border: none;
      border-radius: 10px;
      padding: 20px 40px;
      font-size: 18px;
      font-weight: 700;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
      margin: 48px 0;
      box-shadow: 0 4px 12px rgba(212, 175, 55, 0.25);
    }

    .btn-phase-action:hover,
    .btn-complete-step:hover {
      background: #c49b2e;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(212, 175, 55, 0.35);
    }

    /* Secondary buttons - much smaller */
    .btn-secondary,
    .btn-escalation,
    .btn-example {
      padding: 8px 16px;
      font-size: 13px;
      font-weight: 600;
      background: white;
      border: 1px solid var(--border-medium);
      color: var(--navy-primary);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    /* ===================================================================
       SUPPORTING CONTENT - Reduce Visual Weight
       =================================================================== */

    /* Info boxes - Less prominent */
    .info-box,
    .what-prevents,
    .prevents-box {
      background: #f8f9fa;
      border-left: 3px solid var(--navy-primary);
      padding: 16px 20px;
      border-radius: 6px;
      margin: 32px 0;
    }

    .info-box strong,
    .what-prevents strong,
    .prevents-box strong {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .info-box p,
    .info-box ul,
    .what-prevents ul,
    .prevents-box ul {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.7;
      margin: 0;
    }

    /* ===================================================================
       CHECKLISTS & TASKS - Clean & Simple
       =================================================================== */

    .completion-checklist,
    .task-list,
    .checklist-items {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin: 32px 0;
    }

    .completion-item,
    .task-item,
    .checklist-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px 16px;
      background: #f8f9fa;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .completion-item:hover,
    .task-item:hover,
    .checklist-item:hover {
      background: #e8edf2;
    }

    .completion-checkbox,
    .task-checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid #94a3b8;
      border-radius: 4px;
      flex-shrink: 0;
      cursor: pointer;
      background: white;
    }

    .completion-checkbox.checked,
    .task-checkbox.checked {
      background: #22c55e;
      border-color: #22c55e;
    }

    .completion-item span,
    .task-title {
      font-size: 14px;
      color: var(--text-primary);
      line-height: 1.6;
    }

    /* ===================================================================
       CARDS & CONTAINERS - Minimal Borders
       =================================================================== */

    .requirement-card,
    .tactic-card,
    .scenario-card,
    .method-card,
    .discrepancy-card {
      background: white;
      border: 1px solid #e8edf2;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    /* Remove heavy borders and backgrounds */
    .requirement-card:hover,
    .tactic-card:hover,
    .scenario-card:hover {
      border-color: var(--navy-primary);
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }

    /* Card headers - reduce visual weight */
    .req-header,
    .tactic-header,
    .scenario-header,
    .method-header,
    .disc-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid #e8edf2;
      background: none;
    }

    .req-header strong,
    .tactic-header strong,
    .scenario-header strong,
    .method-header strong,
    .disc-header strong {
      font-size: 15px;
      font-weight: 600;
      color: var(--navy-dark);
    }

    /* Card content - smaller text */
    .req-content,
    .tactic-content,
    .scenario-content,
    .method-content,
    .disc-content {
      padding: 0;
    }

    .req-content p,
    .tactic-content p,
    .scenario-content p,
    .method-content p,
    .disc-content p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: 12px;
    }

    .req-content ul,
    .tactic-content ul {
      list-style: disc;
      padding-left: 20px;
      margin: 8px 0 0 0;
    }

    .req-content li,
    .tactic-content li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: 6px;
    }

    /* ===================================================================
       GRIDS & LAYOUTS - More White Space
       =================================================================== */

    .content-grid,
    .comparison-grid,
    .negotiation-position,
    .payment-verification {
      display: grid;
      gap: 24px;
      margin-bottom: 40px;
    }

    /* ===================================================================
       SPECIAL ELEMENTS - Appropriate Scale
       =================================================================== */

    /* Value Statement - Prominent but not overwhelming */
    .value-statement {
      background: #eff6ff;
      border: 2px solid #3b82f6;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .value-statement strong {
      display: block;
      font-size: 16px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 12px;
    }

    .value-statement p {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.7;
      margin: 0;
    }

    /* Sample Language / Scripts - Reduce prominence */
    .sample-language,
    .language-box,
    .script-box {
      background: #f8f9fa;
      border: 1px solid #e8edf2;
      padding: 16px;
      border-radius: 6px;
      margin: 24px 0;
    }

    .language-box,
    .script-box {
      font-size: 13px;
      color: #64748b;
      line-height: 1.8;
      font-family: 'Courier New', monospace;
    }

    /* ===================================================================
       TABLES - Clean & Minimal
       =================================================================== */

    .comparison-grid,
    .payment-timeline-tracker,
    .quick-ref-table {
      border: 1px solid #e8edf2;
      border-radius: 8px;
      overflow: hidden;
    }

    .comparison-header,
    .tracker-row,
    .quick-ref-table th {
      background: #f8f9fa;
      color: var(--text-primary);
      font-size: 13px;
      font-weight: 600;
      padding: 12px 16px;
    }

    .comparison-row,
    .tracker-row,
    .quick-ref-table td {
      font-size: 13px;
      padding: 12px 16px;
      border-bottom: 1px solid #e8edf2;
    }

    /* ===================================================================
       ICONS & DECORATIVE ELEMENTS - Subtle
       =================================================================== */

    .req-icon,
    .tactic-icon,
    .method-icon,
    .disc-icon,
    .jump-icon {
      font-size: 20px;
      opacity: 0.7;
    }

    /* ===================================================================
       REMOVE EXCESSIVE DECORATION
       =================================================================== */

    /* Remove colored badges/pills - use simple text instead */
    .method-badge,
    .level-number,
    .tool-badge {
      background: none;
      color: var(--text-muted);
      font-size: 11px;
      font-weight: 600;
      padding: 0;
      border: none;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Remove heavy box shadows - use subtle ones only */
    .phase-card,
    .tool-card,
    .requirement-card {
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    /* Remove gradients on containers - solid colors only */
    .overview-card,
    .decision-card,
    .final-note {
      background: white;
      border: 1px solid #e8edf2;
      color: var(--text-primary);
    }

    /* ===================================================================
       RESPONSIVE - Maintain Hierarchy on Mobile
       =================================================================== */

    @media (max-width: 768px) {
      .phase-card {
        padding: 24px 20px;
        margin-bottom: 24px;
      }
      
      .btn-phase-action,
      .btn-complete-step {
        padding: 16px 24px;
        font-size: 16px;
      }
      
      .critical-deadline-alert strong,
      .urgent-deadline-banner .deadline-title {
        font-size: 20px;
      }
      
      .deadline-date,
      .deadline-countdown {
        font-size: 22px;
      }
    }
    }

    /* Upload Checklist */
    .upload-checklist {
      background: var(--bg-light);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
    }

    .checklist-item {
      padding: 10px;
      font-size: 14px;
      color: var(--text-primary);
      font-weight: 500;
    }

    /* Report Highlights */
    .report-highlights {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .highlight-item {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px;
      background: var(--bg-light);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      transition: all 0.2s ease;
    }

    .highlight-item:hover {
      border-color: var(--navy-primary);
      box-shadow: var(--shadow-sm);
    }

    .highlight-icon {
      font-size: 28px;
      flex-shrink: 0;
    }

    .highlight-item > div {
      flex: 1;
    }

    .highlight-item strong {
      display: block;
      font-size: 15px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .highlight-item span {
      display: block;
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    /* Phase Action Button */
    .btn-phase-action {
      width: 100%;
      padding: 16px 24px;
      background: #e5e7eb;
      color: var(--navy-dark);
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-phase-action:hover:not(:disabled) {
      background: #d1d5db;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .btn-phase-action:disabled,
    .btn-phase-action.btn-disabled {
      background: #e5e7eb;
      color: #9ca3af;
      cursor: not-allowed;
      transform: none;
    }

    /* Phase Tip */
    .phase-tip {
      margin-top: 16px;
      padding: 12px 16px;
      background: #eff6ff;
      border-left: 3px solid #3b82f6;
      border-radius: 6px;
      font-size: 13px;
      color: #1e40af;
    }

    .phase-tip strong {
      font-weight: 600;
      color: #1e3a8a;
    }

    /* Prevents Box */
    .prevents-box {
      background: #f9fafb;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 32px;
    }

    .prevents-box strong {
      display: block;
      font-size: 16px;
      font-weight: 700;
      color: #4b5563;
      margin-bottom: 12px;
    }

    .prevents-box ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .prevents-box li {
      padding: 8px 0 8px 28px;
      position: relative;
      font-size: 14px;
      color: #6b7280;
      line-height: 1.5;
    }

    .prevents-box li:before {
      content: "✓";
      position: absolute;
      left: 0;
      color: #9ca3af;
      font-weight: bold;
      font-size: 16px;
    }

    /* Step Completion */
    .step-completion {
      background: white;
      border: 2px solid var(--border-medium);
      border-radius: 12px;
      padding: 24px;
      margin-top: 32px;
    }

    .completion-checklist {
      margin-bottom: 20px;
    }

    .completion-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      margin-bottom: 8px;
      background: var(--bg-light);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .completion-item:hover {
      background: #f0f4f8;
    }

    .completion-checkbox {
      width: 24px;
      height: 24px;
      border: 2px solid var(--border-dark);
      border-radius: 6px;
      flex-shrink: 0;
      transition: all 0.2s ease;
      background: white;
    }

    .completion-item.checked .completion-checkbox {
      background: var(--accent-green);
      border-color: var(--accent-green);
      position: relative;
    }

    .completion-item.checked .completion-checkbox::after {
      content: '✓';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 14px;
      font-weight: bold;
    }

    .completion-item span:last-child {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
    }

    .btn-complete-step {
      width: 100%;
      padding: 16px 24px;
      background: var(--navy-primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-complete-step:hover {
      background: var(--navy-dark);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(30, 58, 95, 0.3);
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }

    /* ===== STEP 2 COMPONENTS - UNIFIED COLOR SCHEME ===== */
    
    /* Action Steps */
    .action-steps {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 24px;
    }

    /* Action Buttons Grid */
    .action-buttons-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 20px;
    }

    @media (max-width: 768px) {
      .action-buttons-grid {
        grid-template-columns: 1fr;
      }
    }

    .action-step {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .step-icon {
      font-size: 28px;
      flex-shrink: 0;
    }

    .action-step strong {
      display: block;
      font-size: 15px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 6px;
    }

    .action-step p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }

    /* Script Box */
    .script-box {
      background: white;
      border: 2px solid var(--border-medium);
      border-radius: 8px;
      padding: 16px;
      margin-top: 8px;
      font-size: 14px;
      font-family: 'Courier New', monospace;
      color: var(--text-primary);
      line-height: 1.6;
      font-style: italic;
    }

    /* Info Box - UNIFIED STYLE */
    .info-box {
      background: var(--bg-cream);
      border-left: 3px solid var(--navy-primary);
      padding: 16px;
      border-radius: 6px;
      margin-bottom: 16px;
    }

    .info-box strong {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .info-box ul,
    .info-box ol {
      margin: 8px 0 0 0;
      padding-left: 20px;
    }

    .info-box li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 6px;
      padding-left: 0;
    }

    .info-box li:before {
      content: none;
    }

    .info-box span {
      font-weight: 600;
      color: var(--navy-primary);
    }

    /* Duties Grid */
    .duties-grid {
      display: grid;
      gap: 20px;
      margin-top: 20px;
    }

    .duty-card {
      background: white;
      border: 2px solid var(--border-light);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .duty-card:hover {
      border-color: var(--navy-primary);
      box-shadow: var(--shadow-md);
    }

    .duty-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--bg-cream);
      border-bottom: 1px solid var(--border-light);
    }

    .duty-icon {
      font-size: 28px;
      flex-shrink: 0;
    }

    .duty-header strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .duty-deadline {
      display: block;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .duty-content {
      padding: 20px;
    }

    .duty-description {
      font-size: 14px;
      color: var(--text-primary);
      line-height: 1.6;
      margin-bottom: 16px;
    }

    .btn-duty-tool {
      width: 100%;
      padding: 12px 20px;
      background: #e5e7eb;
      border: none;
      color: var(--navy-dark);
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-duty-tool:hover {
      background: #d1d5db;
      transform: translateY(-1px);
    }

    /* Written Notice Benefits */
    .written-notice-benefits {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 24px;
    }

    .notice-benefit {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .benefit-icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--navy-primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 16px;
      flex-shrink: 0;
    }

    .notice-benefit strong {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .notice-benefit p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .duty-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .duty-icon {
        font-size: 24px;
      }
    }

    /* Step 3 Components */

    /* Photo Guidance */
    .photo-guidance,
    .inventory-guidance {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 24px;
    }

    .guidance-section {
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      padding: 16px;
      border-radius: 8px;
    }

    .guidance-section strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 10px;
    }

    .guidance-section p {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 0;
    }

    .guidance-section ul {
      list-style: none;
      padding: 0;
      margin: 8px 0 0 0;
    }

    .guidance-section li {
      padding: 6px 0 6px 20px;
      position: relative;
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .guidance-section li:before {
      content: "→";
      position: absolute;
      left: 0;
      color: var(--navy-primary);
      font-weight: bold;
    }

    .guidance-section li strong {
      display: inline;
      font-size: 14px;
      color: var(--navy-dark);
      margin: 0;
    }

    /* Example Comparison */
    .example-comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-top: 16px;
    }

    @media (max-width: 768px) {
      .example-comparison {
        grid-template-columns: 1fr;
      }
    }

    .bad-example,
    .good-example {
      padding: 16px;
      border-radius: 8px;
      border: 2px solid;
    }

    .bad-example {
      background: #fef2f2;
      border-color: #fca5a5;
    }

    .bad-example strong {
      color: #dc2626;
      font-size: 14px;
      display: block;
      margin-bottom: 8px;
    }

    .bad-example p {
      color: #991b1b;
      font-size: 13px;
      margin: 0;
      font-family: 'Courier New', monospace;
    }

    .good-example {
      background: #f0fdf4;
      border-color: #86efac;
    }

    .good-example strong {
      color: #166534;
      font-size: 14px;
      display: block;
      margin-bottom: 8px;
    }

    .good-example p {
      color: #166534;
      font-size: 13px;
      margin: 0;
      line-height: 1.6;
    }

    /* Proof Types */
    .proof-types {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .proof-category {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .category-icon {
      font-size: 32px;
      flex-shrink: 0;
    }

    .proof-category strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 6px;
    }

    .proof-category p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }

    /* Step Completion Heading */
    .step-completion h3 {
      font-size: 16px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 16px;
    }

    /* Step 4 Components */

    /* Contractor Finding Guidance */
    .contractor-finding-guidance {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 24px;
    }

    /* Estimate Requirements */
    .estimate-requirements {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .requirement-item {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .requirement-icon {
      font-size: 28px;
      flex-shrink: 0;
    }

    .requirement-item strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 6px;
    }

    .requirement-item p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }

    /* Analysis Benefits */
    .analysis-benefits {
      display: grid;
      gap: 12px;
      margin-bottom: 24px;
    }

    .benefit-item {
      padding: 12px 16px;
      background: var(--bg-cream);
      border-left: 3px solid var(--navy-primary);
      border-radius: 4px;
    }

    .benefit-item strong {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .benefit-item p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }

    /* Step 5 Components */

    /* Adjuster Estimate Guidance */
    .adjuster-estimate-guidance {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 24px;
    }

    /* Comparison Process */
    .comparison-process {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .process-step {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .step-number {
      width: 36px;
      height: 36px;
      background: var(--navy-primary);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .process-step strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .process-step p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }

    /* Adjuster Tactics */
    .adjuster-tactics {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .tactic-card {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-left: 4px solid #dc2626;
      border-radius: 8px;
    }

    .tactic-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .tactic-icon {
      font-size: 24px;
    }

    .tactic-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .tactic-card p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 8px 0 0 0;
    }

    .tactic-card p strong {
      color: var(--navy-dark);
      font-weight: 600;
    }

    /* Leverage Calculator */
    .leverage-calculator {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .leverage-item {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .leverage-icon {
      font-size: 32px;
      flex-shrink: 0;
    }

    .leverage-item strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 6px;
    }

    .leverage-item p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 4px 0 0 0;
    }

    .example-calc {
      font-size: 13px;
      color: var(--text-secondary);
      margin-top: 8px;
      padding: 8px 12px;
      background: white;
      border-left: 3px solid var(--navy-primary);
      border-radius: 4px;
    }

    .example-calc strong {
      display: inline;
      font-size: 13px;
      color: var(--navy-dark);
      font-weight: 700;
    }

    /* Step 6 Components */

    /* Coverage Mapping */
    .coverage-mapping {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .coverage-section {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .coverage-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .coverage-icon {
      font-size: 28px;
    }

    .coverage-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .coverage-section p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 8px 0;
    }

    .coverage-section p strong {
      color: var(--navy-dark);
      font-weight: 600;
    }

    .coverage-limit {
      display: inline-block;
      margin-top: 8px;
      padding: 6px 12px;
      background: white;
      border-left: 3px solid var(--navy-primary);
      font-size: 13px;
      font-weight: 600;
      color: var(--navy-dark);
    }

    /* Sublimits List */
    .sublimits-list {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .sublimit-item {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-left: 4px solid var(--navy-primary);
      border-radius: 8px;
    }

    .sublimit-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }

    .sublimit-icon {
      font-size: 24px;
    }

    .sublimit-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .sublimit-details {
      margin-left: 36px;
    }

    .sublimit-amount {
      display: inline-block;
      padding: 4px 10px;
      background: white;
      border: 1px solid var(--border-light);
      border-radius: 4px;
      font-size: 12px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .sublimit-details p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 8px 0 0 0;
    }

    /* Exclusions List */
    .exclusions-list {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .exclusion-item {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-left: 4px solid #dc2626;
      border-radius: 8px;
    }

    .exclusion-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }

    .exclusion-icon {
      font-size: 24px;
    }

    .exclusion-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .exclusion-item p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 8px 0;
    }

    .exclusion-item p strong {
      color: var(--navy-dark);
      font-weight: 600;
    }

    /* Max Recovery Calculator */
    .max-recovery-calculator {
      display: grid;
      gap: 20px;
      margin-bottom: 24px;
    }

    .recovery-section {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .recovery-section > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 12px;
    }

    .recovery-calc {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      font-size: 14px;
      color: var(--text-secondary);
      border-bottom: 1px solid var(--border-light);
    }

    .recovery-calc:last-of-type {
      border-bottom: none;
    }

    .sublimit-adjustment {
      color: #dc2626;
      font-weight: 600;
    }

    .calc-amount,
    .calc-limit,
    .calc-reduction {
      font-weight: 600;
      color: var(--navy-dark);
    }

    .recovery-result {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      margin-top: 8px;
      background: white;
      border-left: 3px solid var(--navy-primary);
      border-radius: 4px;
      font-weight: 700;
    }

    .result-amount {
      color: var(--navy-primary);
      font-size: 15px;
    }

    .total-recovery {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: var(--navy-primary);
      color: white;
      border-radius: 8px;
      font-size: 18px;
      font-weight: 700;
    }

    .total-amount {
      font-size: 24px;
    }

    /* Step 7 Components */

    /* ALE Coverage Lists */
    .ale-coverage-lists {
      display: grid;
      gap: 20px;
      margin-bottom: 24px;
    }

    .coverage-yes,
    .coverage-no {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .coverage-list-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .coverage-list-icon {
      font-size: 24px;
    }

    .coverage-list-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .coverage-items {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .coverage-items li {
      padding: 8px 0;
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }

    .coverage-items li:last-child {
      border-bottom: none;
    }

    .coverage-items li strong {
      font-weight: 600;
      color: var(--navy-dark);
    }

    /* Receipt Rules */
    .receipt-rules {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .rule-item {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .rule-icon {
      font-size: 28px;
      flex-shrink: 0;
    }

    .rule-item strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 6px;
    }

    .rule-item p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }

    /* Common Mistakes */
    .common-mistakes {
      padding: 16px;
      background: var(--bg-cream);
      border-left: 4px solid var(--navy-primary);
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .common-mistakes strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 10px;
    }

    .common-mistakes ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .common-mistakes li {
      padding: 6px 0 6px 20px;
      position: relative;
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .common-mistakes li:before {
      content: "→";
      position: absolute;
      left: 0;
      color: var(--navy-primary);
      font-weight: bold;
    }

    /* ALE Calculation Example */
    .ale-calculation-example {
      padding: 20px;
      background: var(--bg-cream);
      border: 2px solid var(--border-light);
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .calc-header {
      text-align: center;
      padding-bottom: 16px;
      margin-bottom: 16px;
      border-bottom: 2px solid var(--border-light);
    }

    .calc-header strong {
      font-size: 16px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .calc-section {
      padding: 16px;
      background: white;
      border-radius: 8px;
      margin-bottom: 16px;
    }

    .calc-category {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border-light);
    }

    .calc-line {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      font-size: 14px;
      color: var(--text-secondary);
    }

    .calc-line.subtract {
      color: var(--text-secondary);
      font-style: italic;
    }

    .calc-amount {
      font-weight: 600;
      color: var(--navy-dark);
    }

    .calc-result {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      margin-top: 8px;
      background: white;
      border-left: 3px solid var(--navy-primary);
      border-radius: 4px;
      font-weight: 700;
      font-size: 14px;
    }

    .calc-total {
      color: var(--navy-primary);
      font-size: 16px;
    }

    .calc-grand-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: var(--navy-primary);
      color: white;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 700;
      margin-top: 20px;
    }

    .grand-total-amount {
      font-size: 24px;
    }

    .calc-projection {
      padding: 16px;
      margin-top: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      text-align: center;
    }

    .calc-projection p {
      margin: 0;
      font-size: 14px;
      color: var(--text-secondary);
    }

    .projection-total {
      font-weight: 700;
      color: var(--navy-dark);
      font-size: 16px;
    }

    /* Submission Strategy */
    .submission-strategy {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .strategy-item {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .strategy-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .strategy-icon {
      font-size: 24px;
    }

    .strategy-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .strategy-item ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .strategy-item li {
      padding: 6px 0 6px 20px;
      position: relative;
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .strategy-item li:before {
      content: "•";
      position: absolute;
      left: 0;
      color: var(--navy-primary);
      font-weight: bold;
      font-size: 16px;
    }

    .strategy-item li strong {
      color: var(--navy-dark);
      font-weight: 600;
    }

    /* Submission Template */
    .submission-template {
      margin-bottom: 24px;
    }

    .submission-template > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 12px;
    }

    .template-box {
      padding: 16px;
      background: white;
      border: 2px solid var(--border-light);
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.8;
    }

    .template-box p {
      margin: 12px 0;
      color: var(--text-secondary);
    }

    .template-box em {
      color: var(--navy-dark);
    }

    /* Step 8 Components */

    /* What's Changed */
    .whats-changed {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .whats-changed strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 10px;
    }

    .whats-changed ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .whats-changed li {
      padding: 6px 0 6px 20px;
      position: relative;
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .whats-changed li:before {
      content: "→";
      position: absolute;
      left: 0;
      color: var(--navy-primary);
      font-weight: bold;
    }

    .whats-changed li strong {
      color: var(--navy-dark);
      font-weight: 600;
    }

    /* Room-by-Room Guide */
    .room-by-room-guide {
      margin-bottom: 24px;
    }

    .room-by-room-guide > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 12px;
    }

    .room-category {
      padding: 12px 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      margin-bottom: 12px;
    }

    .room-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }

    .room-icon {
      font-size: 24px;
    }

    .room-header strong {
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .room-category p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
      padding-left: 36px;
    }

    /* Description Examples */
    .description-examples {
      display: grid;
      gap: 20px;
      margin-bottom: 24px;
    }

    .example-pair {
      display: grid;
      gap: 12px;
    }

    .bad-description,
    .good-description {
      padding: 16px;
      border-radius: 8px;
      border: 2px solid;
    }

    .bad-description {
      background: var(--bg-cream);
      border-color: var(--border-light);
    }

    .bad-description strong {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .bad-description .example-text {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 0;
      font-family: 'Courier New', monospace;
    }

    .good-description {
      background: white;
      border-color: var(--navy-primary);
    }

    .good-description strong {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .good-description .example-text {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 0;
    }

    .good-description .example-text em {
      font-style: italic;
      color: var(--navy-primary);
    }

    /* Description Checklist */
    .description-checklist {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .description-checklist strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 10px;
    }

    .description-checklist ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    @media (max-width: 768px) {
      .description-checklist ul {
        grid-template-columns: 1fr;
      }
    }

    .description-checklist li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    /* Valuation Guide */
    .valuation-guide {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .valuation-type {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .valuation-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .valuation-icon {
      font-size: 24px;
    }

    .valuation-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .valuation-type p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 8px 0;
    }

    .valuation-type p strong {
      color: var(--navy-dark);
      font-weight: 600;
    }

    .valuation-type ul {
      list-style: none;
      padding: 0;
      margin: 8px 0 0 0;
    }

    .valuation-type li {
      padding: 4px 0 4px 20px;
      position: relative;
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .valuation-type li:before {
      content: "•";
      position: absolute;
      left: 0;
      color: var(--navy-primary);
      font-size: 16px;
      font-weight: bold;
    }

    /* Pricing Documentation */
    .pricing-documentation {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .pricing-documentation > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 12px;
    }

    .documentation-steps {
      display: grid;
      gap: 12px;
    }

    .doc-step {
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .doc-number {
      width: 28px;
      height: 28px;
      background: var(--navy-primary);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .doc-step p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 4px 0 0 0;
    }

    .doc-step strong {
      color: var(--navy-dark);
      font-weight: 600;
    }

    /* Completeness Checks */
    .completeness-checks {
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .completeness-checks strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 10px;
    }

    .completeness-checks ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .completeness-checks li {
      padding: 6px 0 6px 24px;
      position: relative;
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .completeness-checks li:before {
      content: "✓";
      position: absolute;
      left: 0;
      color: var(--navy-primary);
      font-weight: bold;
      font-size: 14px;
    }

    /* Forgotten Items */
    .forgotten-items {
      margin-bottom: 24px;
    }

    .forgotten-items > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 12px;
    }

    .forgotten-category {
      padding: 12px 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      margin-bottom: 12px;
    }

    .forgotten-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }

    .forgotten-icon {
      font-size: 24px;
    }

    .forgotten-header strong {
      flex: 1;
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .forgotten-value {
      font-size: 13px;
      font-weight: 700;
      color: var(--navy-primary);
      padding: 4px 10px;
      background: white;
      border-radius: 4px;
    }

    .forgotten-category p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
      padding-left: 36px;
    }

    /* Step 9 Components */

    /* Concept Explainer Boxes */
    .concept-explainer {
      display: grid;
      gap: 20px;
      margin-bottom: 24px;
    }

    .concept-box {
      background: white;
      border: 2px solid var(--border-light);
      border-radius: 12px;
      padding: 20px;
    }

    .concept-box.rcv-box {
      background: var(--bg-cream);
    }

    .concept-box.acv-box {
      background: var(--bg-cream);
    }

    .concept-box.holdback-box {
      background: var(--bg-cream);
    }

    .concept-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .concept-icon {
      font-size: 28px;
    }

    .concept-header strong {
      font-size: 16px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .concept-box p {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 0 0 12px 0;
    }

    .concept-example {
      background: white;
      border: 1px solid var(--border-light);
      padding: 12px;
      border-radius: 6px;
      margin-top: 12px;
    }

    .concept-example strong {
      font-size: 13px;
      color: var(--navy-primary);
      font-weight: 600;
    }

    /* Payment Breakdown */
    .payment-breakdown {
      display: flex;
      flex-direction: column;
      gap: 16px;
      background: var(--bg-cream);
      border: 2px solid var(--border-medium);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .breakdown-item {
      background: white;
      border: 2px solid var(--border-light);
      border-radius: 8px;
      padding: 16px;
      text-align: center;
    }

    .breakdown-item.total-rcv {
      border-color: var(--navy-primary);
    }

    .breakdown-item.initial-acv {
      border-color: var(--navy-primary);
      background: var(--bg-cream);
    }

    .breakdown-item.holdback-recovery {
      border-color: var(--navy-primary);
      background: var(--bg-cream);
    }

    .breakdown-label {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .breakdown-amount {
      font-size: 32px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .breakdown-desc {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .breakdown-operator {
      text-align: center;
      font-size: 24px;
      font-weight: 700;
      color: var(--navy-primary);
      padding: 8px 0;
    }

    .breakdown-note {
      text-align: center;
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-primary);
      padding: 12px 0;
      margin-top: 8px;
      border-top: 2px dashed var(--border-medium);
    }

    /* Recovery Steps */
    .recovery-steps {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 24px;
    }

    .recovery-step {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .step-number-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--navy-primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .recovery-step strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 6px;
    }

    .recovery-step p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 0;
    }

    /* Cash Flow Reality */
    .cash-flow-reality {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 24px;
    }

    @media (max-width: 768px) {
      .cash-flow-reality {
        grid-template-columns: 1fr;
      }
    }

    .reality-section {
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      padding: 16px;
      border-radius: 8px;
    }

    .reality-section strong {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .reality-section ul {
      list-style: disc;
      margin: 8px 0 0 0;
      padding-left: 20px;
    }

    .reality-section li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 6px;
      padding-left: 0;
    }

    .reality-section li:before {
      content: none;
    }

    /* Financing Options */
    .financing-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 16px;
    }

    .financing-option {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 6px;
    }

    .option-icon {
      font-size: 24px;
      flex-shrink: 0;
    }

    .financing-option strong {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .financing-option p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }

    /* Calculate button emphasis */
    .btn-phase-action {
      position: relative;
      overflow: hidden;
    }

    .btn-phase-action::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .btn-phase-action:hover::before {
      width: 300px;
      height: 300px;
    }

    /* Step 10 Components */

    /* Offer Expectations */
    .offer-expectations {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .expectation-section {
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      padding: 16px;
      border-radius: 8px;
    }

    .expectation-section.red-flags {
      background: #fef2f2;
      border-color: #fca5a5;
    }

    .expectation-section strong {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .expectation-section.red-flags strong {
      color: #dc2626;
    }

    /* Comparison Grid */
    .comparison-grid {
      background: white;
      border: 2px solid var(--border-medium);
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 24px;
    }

    .comparison-header {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      background: linear-gradient(135deg, var(--navy-primary) 0%, var(--navy-dark) 100%);
      color: white;
      font-weight: 600;
      font-size: 13px;
    }

    .header-col {
      padding: 12px 16px;
      text-align: center;
    }

    .header-col:first-child {
      text-align: left;
    }

    .comparison-row {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      border-bottom: 1px solid var(--border-light);
    }

    .comparison-row:last-child {
      border-bottom: none;
    }

    .comparison-row.total-row {
      background: var(--bg-cream);
      font-weight: 600;
    }

    .row-label {
      padding: 12px 16px;
      font-size: 14px;
      color: var(--text-primary);
    }

    .row-value {
      padding: 12px 16px;
      text-align: center;
      font-size: 14px;
      font-weight: 600;
    }

    .row-value.offer-value {
      color: var(--navy-primary);
    }

    .row-value.your-value {
      color: var(--navy-primary);
    }

    .row-value.shortfall-value {
      color: #dc2626;
    }

    /* Shortfall Summary */
    .shortfall-summary {
      background: #fef2f2;
      border: 2px solid var(--border-light);
      border-radius: 12px;
      padding: 24px;
      text-align: center;
      margin-bottom: 24px;
    }

    .summary-label {
      font-size: 16px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .summary-amount {
      font-size: 36px;
      font-weight: 700;
      color: #dc2626;
      margin-bottom: 4px;
    }

    .summary-percentage {
      font-size: 14px;
      color: var(--text-secondary);
      font-weight: 500;
    }

    /* Tactic Categories */
    .tactic-categories {
      display: grid;
      gap: 20px;
      margin-bottom: 24px;
    }

    .tactic-card {
      background: white;
      border: 2px solid var(--border-light);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .tactic-card:hover {
      border-color: var(--navy-primary);
      box-shadow: var(--shadow-md);
    }

    .tactic-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--bg-cream);
      border-bottom: 1px solid var(--border-light);
    }

    .tactic-icon {
      font-size: 24px;
    }

    .tactic-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .tactic-content {
      padding: 16px;
    }

    .tactic-content p {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 12px;
    }

    .tactic-examples {
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      padding: 12px;
      border-radius: 6px;
    }

    .tactic-examples strong {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--navy-primary);
      margin-bottom: 8px;
    }

    .tactic-examples ul {
      list-style: disc;
      padding-left: 20px;
      margin: 0;
    }

    .tactic-examples li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 4px;
      padding-left: 0;
    }

    .tactic-examples li:before {
      content: none;
    }

    /* Negotiation Calculator */
    .negotiation-calculator {
      background: white;
      border: 2px solid var(--border-medium);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .calc-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      margin-bottom: 8px;
    }

    .calc-row.total {
      background: var(--bg-cream);
      border-radius: 8px;
      margin-top: 8px;
    }

    .calc-label {
      font-size: 15px;
      color: var(--text-secondary);
    }

    .calc-value {
      font-size: 20px;
      font-weight: 700;
    }

    .calc-value.documented {
      color: var(--navy-primary);
    }

    .calc-value.offer {
      color: var(--navy-primary);
    }

    .calc-value.underpayment {
      color: #dc2626;
      font-size: 28px;
    }

    .calc-operator {
      text-align: center;
      font-size: 24px;
      font-weight: 700;
      color: var(--navy-primary);
      padding: 8px 0;
    }

    .calc-percentage {
      text-align: center;
      font-size: 14px;
      color: var(--text-secondary);
      font-weight: 600;
      margin-top: 16px;
      padding-top: 16px;
      border-top: 2px dashed var(--border-medium);
    }

    .calc-percentage span {
      font-size: 18px;
      font-weight: 700;
      color: #dc2626;
    }

    /* Category Breakdown */
    .category-breakdown {
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .breakdown-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      margin-bottom: 8px;
      background: white;
      border-radius: 6px;
    }

    .breakdown-label {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
    }

    .breakdown-short {
      font-size: 15px;
      font-weight: 700;
      color: #dc2626;
    }

    /* Counter Prep */
    .counter-prep {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 24px;
    }

    .prep-section {
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      padding: 16px;
      border-radius: 8px;
    }

    .prep-section strong {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 10px;
    }

    .prep-action {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.8;
      padding-left: 8px;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .comparison-header,
      .comparison-row {
        grid-template-columns: 1fr;
      }
      
      .header-col,
      .row-label,
      .row-value {
        text-align: left;
        border-bottom: 1px solid var(--border-light);
      }
      
      .header-col:last-child,
      .row-value:last-child {
        border-bottom: none;
      }
    }

    /* Step 11 Components */

    /* Negotiation Position */
    .negotiation-position {
      background: white;
      border: 2px solid var(--border-medium);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .position-row {
      display: grid;
      grid-template-columns: 2fr 1fr 2fr;
      align-items: center;
      padding: 12px;
      margin-bottom: 8px;
      border-bottom: 1px solid var(--border-light);
    }

    .position-row:last-child {
      border-bottom: none;
    }

    .position-row.highlight {
      background: var(--bg-cream);
      border-radius: 8px;
      margin-top: 12px;
    }

    .position-label {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .position-value {
      font-size: 22px;
      font-weight: 700;
      text-align: center;
    }

    .position-value.documented {
      color: var(--navy-primary);
    }

    .position-value.offer {
      color: var(--navy-primary);
    }

    .position-value.counter {
      color: var(--navy-primary);
      font-size: 26px;
    }

    .position-source {
      font-size: 12px;
      color: var(--text-muted);
      text-align: right;
    }

    /* Counter-Offer Checklist */
    .counter-offer-checklist {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 24px;
    }

    .checklist-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .check-icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--navy-primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 16px;
      flex-shrink: 0;
    }

    .checklist-item strong {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .checklist-item p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 0;
    }

    /* Communication Rules */
    .communication-rules {
      display: grid;
      gap: 12px;
      margin-bottom: 24px;
    }

    .rule-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 6px;
    }

    .rule-icon {
      font-size: 24px;
      flex-shrink: 0;
    }

    .rule-item strong {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .rule-item p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }

    /* Sample Language Box */
    .sample-language {
      background: var(--bg-cream);
      border: 2px solid var(--navy-primary);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .language-box {
      background: white;
      border: 1px solid var(--border-light);
      padding: 16px;
      border-radius: 6px;
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.8;
      white-space: pre-line;
      margin-top: 12px;
    }

    /* Response Scenarios */
    .response-scenarios {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .scenario-card {
      background: white;
      border: 2px solid var(--border-light);
      border-radius: 8px;
      overflow: hidden;
    }

    .scenario-header {
      background: var(--bg-cream);
      padding: 12px 16px;
      border-bottom: 1px solid var(--border-light);
    }

    .scenario-header strong {
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
    }

    .scenario-content {
      padding: 16px;
    }

    .scenario-action {
      font-size: 13px;
      font-weight: 600;
      color: var(--navy-primary);
      margin-bottom: 8px;
    }

    .scenario-content p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 0;
    }

    /* Escalation Ladder */
    .escalation-ladder {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 24px;
    }

    .escalation-level {
      background: white;
      border: 2px solid var(--border-light);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .escalation-level:hover {
      box-shadow: var(--shadow-md);
      transform: translateX(4px);
    }

    .level-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--bg-cream);
      border-bottom: 1px solid var(--border-light);
    }

    .level-number {
      font-size: 11px;
      font-weight: 700;
      padding: 6px 12px;
      border-radius: 4px;
      background: var(--navy-primary);
      color: white;
      letter-spacing: 0.5px;
    }

    .level-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .level-content {
      padding: 16px;
    }

    .level-content p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 10px;
    }

    .level-content p:last-child {
      margin-bottom: 0;
    }

    .level-content strong {
      color: var(--navy-primary);
      font-weight: 600;
    }

    .btn-escalation {
      margin-top: 12px;
      padding: 10px 20px;
      background: white;
      border: 2px solid var(--navy-primary);
      color: var(--navy-primary);
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-escalation:hover {
      background: var(--navy-primary);
      color: white;
    }

    /* Decision Framework */
    .decision-framework {
      display: grid;
      gap: 20px;
      margin-bottom: 24px;
    }

    .decision-card {
      background: white;
      border: 2px solid var(--border-light);
      border-radius: 12px;
      padding: 20px;
    }

    .decision-card.accept {
      background: var(--bg-cream);
    }

    .decision-card.negotiate {
      background: var(--bg-cream);
    }

    .decision-card.litigate {
      background: var(--bg-cream);
    }

    .decision-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 2px solid var(--border-light);
    }

    .decision-icon {
      font-size: 28px;
    }

    .decision-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .decision-card ul {
      list-style: disc;
      padding-left: 20px;
      margin: 0;
    }

    .decision-card li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 8px;
      padding-left: 0;
    }

    .decision-card li:before {
      content: none;
    }

    /* Responsive adjustments for Step 11 */
    @media (max-width: 768px) {
      .position-row {
        grid-template-columns: 1fr;
        gap: 8px;
      }
      
      .position-value,
      .position-source {
        text-align: left;
      }
      
      .escalation-level:hover {
        transform: none;
      }
    }

    /* Step 12 Components */

    /* Urgent Deadline Banner */
    .urgent-deadline-banner {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
      color: white;
      padding: 24px;
      border-radius: 12px;
      margin-bottom: 24px;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
    }

    .deadline-icon {
      font-size: 48px;
      flex-shrink: 0;
    }

    .deadline-content {
      flex: 1;
    }

    .deadline-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .deadline-date {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .deadline-date span {
      color: #fef2f2;
    }

    .deadline-countdown {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .deadline-countdown span {
      font-size: 20px;
      font-weight: 700;
      color: #fef2f2;
    }

    .deadline-warning {
      font-size: 14px;
      opacity: 0.95;
      line-height: 1.5;
    }

    /* POL Requirements */
    .pol-requirements {
      display: grid;
      gap: 12px;
      margin-bottom: 24px;
    }

    .requirement-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 16px;
      background: var(--bg-cream);
      border: 2px solid var(--border-light);
      border-radius: 8px;
    }

    .requirement-item.urgent-item {
      background: #fef3c7;
      border-color: #f59e0b;
    }

    .requirement-item.critical-item {
      background: #fee2e2;
      border-color: #dc2626;
    }

    .req-icon {
      font-size: 28px;
      flex-shrink: 0;
    }

    .requirement-item strong {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .requirement-item p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }

    /* Package Checklist */
    .package-checklist {
      background: white;
      border: 2px solid var(--border-medium);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .checklist-category {
      margin-bottom: 24px;
    }

    .checklist-category:last-child {
      margin-bottom: 0;
    }

    .checklist-category > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--border-light);
    }

    .checklist-items {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .package-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .package-item:hover {
      border-color: var(--navy-primary);
      box-shadow: var(--shadow-sm);
    }

    .package-checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid var(--border-dark);
      border-radius: 4px;
      flex-shrink: 0;
      margin-top: 2px;
      cursor: pointer;
    }

    .package-checkbox:checked {
      background: var(--navy-primary);
      border-color: var(--navy-primary);
    }

    .package-item label {
      flex: 1;
      cursor: pointer;
    }

    .package-item label strong {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .item-detail {
      display: block;
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    /* POL Generation Steps */
    .pol-generation-steps {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 24px;
    }

    .gen-step {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 20px;
      background: var(--bg-cream);
      border: 2px solid var(--border-light);
      border-radius: 8px;
    }

    .gen-number {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--navy-primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .gen-content strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .gen-content p {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .gen-content ul {
      list-style: disc;
      padding-left: 20px;
      margin: 8px 0 0 0;
    }

    .gen-content li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 4px;
      padding-left: 0;
    }

    .gen-content li:before {
      content: none;
    }

    /* Submission Methods */
    .submission-methods {
      display: grid;
      gap: 20px;
      margin-bottom: 24px;
    }

    .method-card {
      background: white;
      border: 3px solid;
      border-radius: 12px;
      padding: 20px;
      position: relative;
    }

    .method-card.method-required {
      border-color: #dc2626;
      background: #fef2f2;
    }

    .method-card.method-recommended {
      border-color: #f59e0b;
      background: #fef3c7;
    }

    .method-card.method-optional {
      border-color: #3b82f6;
      background: #eff6ff;
    }

    .method-badge {
      position: absolute;
      top: -12px;
      right: 20px;
      background: var(--navy-dark);
      color: white;
      font-size: 10px;
      font-weight: 700;
      padding: 4px 10px;
      border-radius: 4px;
      letter-spacing: 0.5px;
    }

    .method-card.method-required .method-badge {
      background: #dc2626;
    }

    .method-card.method-recommended .method-badge {
      background: #f59e0b;
    }

    .method-card.method-optional .method-badge {
      background: #3b82f6;
    }

    .method-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 2px solid var(--border-light);
    }

    .method-icon {
      font-size: 28px;
    }

    .method-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .method-content {
      margin-top: 12px;
    }

    .method-why {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 12px;
    }

    .method-why strong {
      color: var(--navy-primary);
      font-weight: 600;
    }

    .method-steps {
      background: white;
      border: 1px solid var(--border-light);
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 12px;
    }

    .method-steps strong {
      display: block;
      font-size: 13px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .method-steps ol {
      margin: 0;
      padding-left: 20px;
    }

    .method-steps li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 6px;
      padding-left: 0;
    }

    .method-steps li:before {
      content: none;
    }

    .method-cost {
      font-size: 12px;
      color: var(--text-muted);
      font-style: italic;
    }

    /* Follow-up Timeline */
    .followup-timeline {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 24px;
    }

    .timeline-item {
      display: flex;
      align-items: flex-start;
      gap: 16px;
    }

    .timeline-marker {
      min-width: 80px;
      padding: 10px;
      background: var(--navy-primary);
      color: white;
      border-radius: 6px;
      text-align: center;
      font-size: 12px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .timeline-content {
      flex: 1;
      padding: 16px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .timeline-content strong {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 8px;
    }

    .timeline-content p {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .timeline-content ul {
      list-style: disc;
      padding-left: 20px;
      margin: 8px 0 0 0;
    }

    .timeline-content li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 4px;
      padding-left: 0;
    }

    .timeline-content li:before {
      content: none;
    }

    /* State Law Tracker */
    .state-law-tracker {
      background: var(--bg-cream);
      border: 2px solid var(--navy-primary);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .state-law-tracker strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 12px;
    }

    .state-requirement p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 10px;
    }

    .state-requirement p:last-child {
      margin-bottom: 0;
    }

    /* Responsive adjustments for Step 12 */
    @media (max-width: 768px) {
      .urgent-deadline-banner {
        flex-direction: column;
        gap: 12px;
      }
      
      .deadline-icon {
        font-size: 36px;
      }
      
      .timeline-item {
        flex-direction: column;
      }
      
      .timeline-marker {
        min-width: 100%;
      }
    }

    /* Step 13 Components */

    /* Final Step Banner */
    .final-step-banner {
      display: flex;
      align-items: center;
      gap: 20px;
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      color: white;
      padding: 24px;
      border-radius: 12px;
      margin-bottom: 24px;
    }

    .banner-icon {
      font-size: 48px;
      flex-shrink: 0;
    }

    .banner-content {
      flex: 1;
    }

    .banner-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .banner-message {
      font-size: 15px;
      line-height: 1.6;
      opacity: 0.95;
    }

    /* Payment Verification */
    .payment-verification {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 24px;
    }

    .verify-section {
      background: var(--bg-cream);
      border: 2px solid var(--border-light);
      padding: 20px;
      border-radius: 8px;
    }

    .verify-section > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 16px;
    }

    .timeline-info {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .timeline-point {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: white;
      border-radius: 6px;
    }

    .point-label {
      font-size: 14px;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .point-value {
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
    }

    .verify-checklist {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .verify-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      background: white;
      border: 1px solid var(--border-light);
      border-radius: 6px;
    }

    .verify-checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid var(--border-dark);
      border-radius: 4px;
      flex-shrink: 0;
      margin-top: 2px;
      cursor: pointer;
    }

    .verify-checkbox:checked {
      background: var(--accent-green);
      border-color: var(--accent-green);
    }

    .verify-item label {
      flex: 1;
    }

    .verify-item strong {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .verify-detail {
      display: block;
      font-size: 12px;
      color: var(--text-muted);
    }

    /* Payment Discrepancy */
    .payment-discrepancy {
      background: #fee2e2;
      border: 2px solid #dc2626;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .payment-discrepancy > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: #991b1b;
      margin-bottom: 12px;
    }

    .discrepancy-actions {
      background: white;
      padding: 16px;
      border-radius: 6px;
    }

    .discrepancy-actions p {
      font-size: 13px;
      color: #991b1b;
      margin-bottom: 12px;
      font-weight: 600;
    }

    .discrepancy-actions ol {
      margin: 0;
      padding-left: 20px;
    }

    .discrepancy-actions li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 6px;
      padding-left: 0;
    }

    .discrepancy-actions li:before {
      content: none;
    }

    /* Repair Requirements */
    .repair-requirements {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .requirement-card {
      background: white;
      border: 2px solid var(--border-light);
      border-radius: 8px;
      overflow: hidden;
    }

    .req-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--bg-cream);
      border-bottom: 1px solid var(--border-light);
    }

    .req-icon {
      font-size: 24px;
    }

    .req-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .req-content {
      padding: 16px;
    }

    .req-content p {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 12px;
    }

    .req-content ul {
      list-style: disc;
      padding-left: 20px;
      margin: 0;
    }

    .req-content li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 6px;
      padding-left: 0;
    }

    .req-content li:before {
      content: none;
    }

    /* RCV Recovery Card */
    .rcv-recovery-card {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border: 3px solid #f59e0b;
    }

    .rcv-recovery-breakdown {
      background: white;
      border: 2px solid #f59e0b;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .recovery-header {
      font-size: 16px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 16px;
      text-align: center;
    }

    .recovery-calculation {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .calc-line {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      background: var(--bg-cream);
      border-radius: 6px;
    }

    .calc-line.subtract .calc-amount {
      color: #dc2626;
    }

    .calc-line.total {
      background: #fef3c7;
      border: 2px solid #f59e0b;
      margin-top: 8px;
    }

    .calc-line.total .calc-amount {
      color: #d97706;
      font-size: 24px;
    }

    .calc-label {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .calc-amount {
      font-size: 18px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    /* RCV Deadline Warning */
    .rcv-deadline-warning {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      background: #fee2e2;
      border: 3px solid #dc2626;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 24px;
    }

    .deadline-warn-icon {
      font-size: 36px;
      flex-shrink: 0;
    }

    .deadline-warn-content strong {
      display: block;
      font-size: 16px;
      font-weight: 700;
      color: #991b1b;
      margin-bottom: 8px;
    }

    .deadline-warn-content p {
      font-size: 14px;
      color: #991b1b;
      margin-bottom: 6px;
    }

    .deadline-warn-content p span {
      font-weight: 700;
    }

    .deadline-consequence {
      font-weight: 600 !important;
      margin-top: 12px !important;
      padding-top: 12px;
      border-top: 2px dashed #fca5a5;
    }

    /* RCV Submission Package */
    .rcv-submission-package {
      background: white;
      border: 2px solid var(--border-medium);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .rcv-submission-package > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 16px;
    }

    .submission-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .submission-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      background: var(--bg-cream);
      border: 1px solid var(--border-light);
      border-radius: 6px;
    }

    .submit-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #22c55e;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
      flex-shrink: 0;
    }

    .submission-item strong {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .submission-item p {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 0;
    }

    /* Payment Timeline Tracker */
    .payment-timeline-tracker {
      background: white;
      border: 2px solid var(--border-medium);
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 24px;
    }

    .tracker-row {
      display: grid;
      grid-template-columns: 2fr 2fr 1fr;
      gap: 16px;
      align-items: center;
      padding: 16px;
      border-bottom: 1px solid var(--border-light);
    }

    .tracker-row:last-child {
      border-bottom: none;
    }

    .tracker-label {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .tracker-value {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .tracker-status {
      font-size: 13px;
      font-weight: 600;
      text-align: right;
    }

    /* State Law Requirements */
    .state-law-requirements {
      background: var(--bg-cream);
      border: 2px solid var(--navy-primary);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .state-law-requirements > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 12px;
    }

    .state-law-box p {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 10px;
    }

    .state-law-box p:last-child {
      margin-bottom: 0;
    }

    /* Delay Action */
    .delay-action {
      background: #fee2e2;
      border: 2px solid #dc2626;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .delay-action > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: #991b1b;
      margin-bottom: 12px;
    }

    .delay-steps {
      background: white;
      padding: 16px;
      border-radius: 6px;
    }

    .delay-steps ol {
      margin: 0;
      padding-left: 20px;
    }

    .delay-steps li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 6px;
      padding-left: 0;
    }

    .delay-steps li:before {
      content: none;
    }

    /* Common Discrepancies */
    .common-discrepancies {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .discrepancy-card {
      background: white;
      border: 2px solid var(--border-light);
      border-radius: 8px;
      overflow: hidden;
    }

    .disc-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--bg-cream);
      border-bottom: 1px solid var(--border-light);
    }

    .disc-icon {
      font-size: 24px;
    }

    .disc-header strong {
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
    }

    .disc-content {
      padding: 16px;
    }

    .disc-content p {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .disc-content p:last-child {
      margin-bottom: 0;
    }

    .disc-content strong {
      color: var(--navy-primary);
      font-weight: 600;
    }

    /* Final Recovery Summary */
    .final-recovery-summary {
      background: linear-gradient(135deg, var(--navy-primary) 0%, var(--navy-dark) 100%);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .final-recovery-summary .recovery-header {
      color: white;
      font-size: 18px;
      margin-bottom: 20px;
    }

    .recovery-breakdown {
      background: white;
      border-radius: 8px;
      padding: 20px;
    }

    .recovery-line {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      margin-bottom: 8px;
      border-bottom: 1px solid var(--border-light);
    }

    .recovery-line:last-child {
      border-bottom: none;
    }

    .recovery-line.total {
      background: var(--bg-cream);
      border-radius: 6px;
      margin-top: 12px;
      padding: 14px;
    }

    .recovery-label {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .recovery-amount {
      font-size: 16px;
      font-weight: 700;
      color: #22c55e;
    }

    .recovery-line.subtract .recovery-amount {
      color: #dc2626;
    }

    .recovery-line.total .recovery-amount {
      font-size: 24px;
      color: var(--navy-primary);
    }

    /* Archive Importance */
    .archive-importance {
      background: var(--bg-cream);
      border: 2px solid var(--navy-primary);
      padding: 24px;
      border-radius: 12px;
      margin-bottom: 24px;
    }

    .archive-importance > strong {
      display: block;
      font-size: 16px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 20px;
    }

    .archive-reasons {
      display: grid;
      gap: 16px;
    }

    .archive-reason {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 16px;
      background: white;
      border: 1px solid var(--border-light);
      border-radius: 8px;
    }

    .reason-icon {
      font-size: 28px;
      flex-shrink: 0;
    }

    .archive-reason strong {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--navy-dark);
      margin-bottom: 4px;
    }

    .archive-reason p {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 0;
    }

    /* Archive Checklist */
    .archive-checklist {
      background: white;
      border: 2px solid var(--border-medium);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .archive-checklist > strong {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: var(--navy-dark);
      margin-bottom: 16px;
    }

    .archive-checklist ul {
      list-style: disc;
      padding-left: 20px;
      margin: 0;
    }

    .archive-checklist li {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.8;
      margin-bottom: 8px;
      padding-left: 0;
    }

    .archive-checklist li:before {
      content: none;
    }

    /* Claim Completion Celebration */
    .claim-completion-celebration {
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      color: white;
      padding: 40px;
      border-radius: 12px;
      text-align: center;
      margin-top: 40px;
    }

    .celebration-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }

    .claim-completion-celebration h2 {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 16px;
    }

    .claim-completion-celebration p {
      font-size: 16px;
      line-height: 1.8;
      opacity: 0.95;
      margin-bottom: 20px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .completion-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 32px 0;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }

    .completion-stat {
      background: rgba(255, 255, 255, 0.2);
      padding: 20px;
      border-radius: 12px;
    }

    .completion-stat .stat-number {
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .completion-stat .stat-label {
      font-size: 13px;
      opacity: 0.9;
    }

    .final-message {
      font-size: 14px !important;
      margin-top: 32px !important;
      padding-top: 32px;
      border-top: 2px solid rgba(255, 255, 255, 0.3);
    }

    /* Responsive adjustments for Step 13 */
    @media (max-width: 768px) {
      .final-step-banner {
        flex-direction: column;
        text-align: center;
      }
      
      .tracker-row {
        grid-template-columns: 1fr;
        gap: 8px;
      }
      
      .tracker-status {
        text-align: left;
      }
      
      .completion-stats {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Global Navigation Header -->
  <header class="global-header">
    <nav class="global-nav">
      <a href="/" class="nav-brand">Claim Navigator</a>
      
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="app/claim-summary.html" class="nav-link">Claim Summary</a>
        </li>
        
        <li class="nav-item">
          <a href="/claim-guide" class="nav-link nav-link-primary active">Steps / Guide</a>
        </li>
        
        <li class="nav-item nav-dropdown" id="uploadDropdown">
          <a href="#" class="nav-link dropdown-toggle" onclick="toggleDropdown(event); return false;">Upload Documents</a>
          <div class="dropdown-menu">
            <a href="app/tools/policy-uploader.html" class="dropdown-item">Policy Documents</a>
            <a href="app/tools/photo-upload-organizer.html" class="dropdown-item">Photos & Videos</a>
            <a href="app/tools/expense-upload-tool.html" class="dropdown-item">Receipts & Expenses</a>
          </div>
        </li>
        
        <li class="nav-item">
          <a href="app/claim-journal.html" class="nav-link">Claim Journal</a>
        </li>
        
        <li class="nav-item">
          <a href="app/claim-financial-summary.html" class="nav-link">Financial Summary</a>
        </li>
        
        <li class="nav-item">
          <a href="app/claim-deadlines.html" class="nav-link">Claim Deadlines</a>
        </li>
        
        <li class="nav-item">
          <a href="app/claim-correspondence.html" class="nav-link">
            Messages
            <span class="nav-subtext">Claim Correspondence</span>
          </a>
        </li>
        
        <li class="nav-item">
          <a href="app/resources.html" class="nav-link">Resources</a>
        </li>
      </ul>
    </nav>
  </header>

  <div class="container">
    <!-- Side Deadlines Block -->
    <div class="progress-indicator">
      <div class="upcoming-deadlines-title">Deadlines</div>
      <div class="upcoming-deadlines-list">
        <div class="deadline-item"><strong>Notice of Loss</strong> — January 8, 2025</div>
        <div class="deadline-item"><strong>Proof of Loss</strong> — January 14, 2025</div>
      </div>
    </div>

    <!-- Page Header -->
    <header class="page-header">
      <h1 class="page-title">Claim Management Center</h1>
      <p class="page-subtitle">Step-by-step claim management with AI-powered analysis</p>
      <p style="font-size: 0.75rem; color: #6b7280; margin-top: 0.75rem; max-width: 800px; margin-left: auto; margin-right: auto;">This tool provides guidance and documentation support based on the information you provide. It does not replace professional legal or adjusting advice.</p>
    </header>

    <!-- Quiet Progress Bar -->
    <div class="quiet-progress-bar">
      <div class="quiet-progress-container">
        <div class="quiet-progress-text" id="quietProgressText">Step 1 of 14</div>
        <div class="quiet-progress-track">
          <div class="quiet-progress-fill" id="quietProgressFill" style="width: 7%;"></div>
        </div>
      </div>
    </div>

    <!-- Claim Information Panel -->
    <section class="claim-info-panel" id="claimInfoPanel">
      <div class="claim-info-header" onclick="toggleClaimInfoPanel()">
        <div>
          <h2 class="claim-info-title">
            Your Claim Information
            <span class="claim-info-summary">CLM-2024-089456 • State Farm</span>
            <span class="panel-toggle-icon">▼</span>
          </h2>
        </div>
        <div class="claim-info-header-right">
          <button class="btn-edit" onclick="editClaimInfo(); event.stopPropagation();">✏️ Edit</button>
        </div>
      </div>
      <div class="claim-info-content">
        <div class="claim-info-grid">
          <div class="claim-info-item">
            <span class="info-label">Claim Number</span>
            <span class="info-value" id="claimNumber">CLM-2024-089456</span>
          </div>
          <div class="claim-info-item">
            <span class="info-label">Insurance Company</span>
            <span class="info-value" id="insurerName">State Farm</span>
          </div>
          <div class="claim-info-item">
            <span class="info-label">Claim Status</span>
            <span class="info-value status-active" id="claimStatus">Active - Under Review</span>
          </div>
        </div>
        <div class="claim-info-details expanded" id="claimDetails">
          <div class="claim-info-item">
            <span class="info-label">Date of Loss</span>
            <span class="info-value" id="dateOfLoss">November 15, 2024</span>
          </div>
          <div class="claim-info-item">
            <span class="info-label">Days Since Loss</span>
            <span class="info-value urgent" id="daysSinceLoss">45 days</span>
          </div>
          <div class="claim-info-item">
            <span class="info-label">Adjuster Name</span>
            <span class="info-value" id="adjusterName">Mike Johnson</span>
          </div>
        </div>
        <div class="deadline-alert">
          ⚠️ <strong>Upcoming Deadline</strong> Proof of Loss due in 15 days (January 14, 2025)
        </div>
      </div>
    </section>

    <!-- Content Area -->
    <div class="content-area">

    <!-- Step-by-Step Claim Guide Section -->
    <h2 class="claim-steps-title">Take the Following Action Steps to Properly Manage Your Claim</h2>
    <p class="claim-steps-subtitle">Step-by-Step Claim Guide</p>

    <!-- Step Accordion -->
    <div class="step-accordion">
      
      <div class="accordion-item" data-step="1">
        <div class="accordion-header" onclick="openStep(1)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">1</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Upload your insurance policy for AI-powered coverage analysis<span class="step-status in-progress">In Progress</span></div>
              <div class="accordion-subtitle">Upload your insurance policy for AI-assisted analysis of coverages, limits, endorsements, loss settlement terms, ALE eligibility, and contents rules. Review your coverage terms to understand what is covered and how your claim will be paid.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="2">
        <div class="accordion-header" onclick="openStep(2)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">2</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Report Your Loss, Send Written Notice, and Understand Your Policy Duties<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">Call your insurance company, send written notice to create legal proof, and learn what your policy requires you to do.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="3">
        <div class="accordion-header" onclick="openStep(3)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">3</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Document Your Loss & Damage<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">Photograph everything, create detailed inventory, and gather proof of ownership before the adjuster arrives.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="4">
        <div class="accordion-header" onclick="openStep(4)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">4</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Get Your Own Contractor Estimate<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">Hire a licensed contractor for detailed repair estimate before negotiating with the insurance company.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="5">
        <div class="accordion-header" onclick="openStep(5)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">5</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Compare the Insurance Estimate to Contractor Pricing<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">Review the adjuster's estimate line-by-line and identify where they're underpaying.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="6">
        <div class="accordion-header" onclick="openStep(6)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">6</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Verify Coverage for Your Documented Losses<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">Check what's covered, what's excluded, and calculate your maximum recovery under policy limits.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="7">
        <div class="accordion-header" onclick="openStep(7)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">7</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Track Additional Living Expenses (ALE)<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">Document all increased costs from being displaced and maximize your ALE recovery.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="8">
        <div class="accordion-header" onclick="openStep(8)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">8</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Finalize Your Contents Inventory with Complete Values<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">Ensure every damaged item is listed, described in detail, and properly valued before claim submission.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="9">
        <div class="accordion-header" onclick="openStep(9)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">9</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Understand ACV vs RCV and Your Payment Structure<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">Learn how two-stage insurance payment works and how to recover your full depreciation holdback.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="10">
        <div class="accordion-header" onclick="openStep(10)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">10</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Review the Settlement Offer & Identify Underpayment<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">Compare the insurer's offer to your documented losses and calculate where you're being shorted.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="11">
        <div class="accordion-header" onclick="openStep(11)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">11</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Negotiate the Settlement Amount<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">Use your documented evidence and underpayment analysis to negotiate a fair settlement.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="12">
        <div class="accordion-header" onclick="openStep(12)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">12</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Submit Your Formal Proof of Loss Statement<span class="step-status upcoming">Upcoming</span></div>
              <div class="accordion-subtitle">File the sworn legal claim document with complete supporting evidence by the policy deadline.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>

      <div class="accordion-item" data-step="13">
        <div class="accordion-header" onclick="openStep(13)">
          <div class="accordion-left">
            <div class="accordion-number-container">
              <span class="accordion-step-label">STEP</span>
              <div class="accordion-number">13</div>
            </div>
            <div class="accordion-title-area">
              <div class="accordion-title">Track Payment & Recover Depreciation Holdback<span class="step-status upcoming">Final Step</span></div>
              <div class="accordion-subtitle">Monitor all payments, complete repairs, and submit for withheld depreciation recovery.</div>
            </div>
          </div>
          <div class="accordion-toggle">▼</div>
        </div>
        <div class="accordion-content">
          <!-- Content will be inserted by JavaScript -->
        </div>
      </div>


    </div><!-- End step-accordion -->

    <!-- Post-Claim Asset Section (Shown after Step 10 completion) -->
    <div class="post-claim-section" id="postClaimSection" style="display: none;">
      <h3>Your Claim File Is Now a Permanent Asset</h3>
      <p>This documentation serves as your official record for future disputes, property resale disclosures, warranty claims, tax deductions, and any additional damage discovered later. Maintain this archive indefinitely.</p>
      <div class="post-claim-actions">
        <button class="btn-post-claim" onclick="downloadClaimFile()">📥 Download Complete Claim File</button>
        <button class="btn-post-claim secondary" onclick="viewClaimArchive()">📂 View Archived Documents</button>
      </div>
    </div>

    </div><!-- End content-area -->

  </div><!-- End container -->

  <script>
    // GLOBAL FUNCTIONS - Must be defined before any onclick handlers
    function toggleDropdown(e) {
      if (e) {
        e.preventDefault();
        e.stopPropagation();
      }
      
      const dropdown = document.getElementById('uploadDropdown');
      if (!dropdown) {
        console.error('Dropdown element not found');
        return;
      }
      
      const isOpen = dropdown.classList.contains('open');
      
      if (isOpen) {
        dropdown.classList.remove('open');
      } else {
        dropdown.classList.add('open');
      }
      
      console.log('Dropdown toggled:', isOpen ? 'closed' : 'opened');
    }

    function toggleClaimInfoPanel() {
      const panel = document.getElementById('claimInfoPanel');
      
      if (!panel) {
        console.error('Claim info panel not found');
        return;
      }
      
      const isExpanded = panel.classList.contains('expanded');
      
      if (isExpanded) {
        panel.classList.remove('expanded');
      } else {
        panel.classList.add('expanded');
      }
    }
    
    // Step data for all 13 steps
    const stepData = {
      1: {
        label: 'STEP 1 OF 13',
        title: 'Determine Your Policy Coverages (AI Policy Analysis)',
        subtitle: 'Find your insurance policy, read the sections that apply to your damage, and write down your coverage limits.',
        customContent: true,
        htmlContent: `
    <div class="process-phases">
      <div class="phase-card phase-upload">
        <div class="phase-header">
          <span class="phase-number">1</span>
          <div>
            <h4>Upload Your Policy Documents</h4>
            <p>Get everything in one place</p>
          </div>
        </div>
        
        <div class="phase-content">
          <div class="upload-checklist">
            <div class="checklist-item">✓ Declarations page (shows your coverages)</div>
            <div class="checklist-item">✓ Full policy contract (all pages)</div>
            <div class="checklist-item">✓ All endorsements/riders/amendments</div>
          </div>
          
          <button class="btn-phase-action" onclick="window.location.href='app/tools/policy-analyzer-complete.html'">📤 Upload Policy Documents</button>
          
          <div class="phase-tip">
            <strong>Can't find your policy?</strong> Contact your insurance carrier or broker and demand a certified copy of your policy as you are legally entitled to it.
          </div>
        </div>
      </div>
      
      <div class="phase-card phase-review">
        <div class="phase-header">
          <span class="phase-number">2</span>
          <div>
            <h4>Review Your Coverage Intelligence Report</h4>
            <p>Understand exactly what you're covered for</p>
          </div>
        </div>
        
        <div class="phase-content">
          <p class="phase-intro">Once uploaded, you'll get a plain-English report that tells you:</p>
          
          <div class="report-highlights">
            <div class="highlight-item">
              <span class="highlight-icon">💰</span>
              <div>
                <strong>Your Coverage Limits</strong>
                <span>Maximum amounts you can claim for dwelling, contents, and living expenses</span>
              </div>
            </div>
            
            <div class="highlight-item">
              <span class="highlight-icon">✅</span>
              <div>
                <strong>What's Covered</strong>
                <span>Types of damage and property your policy pays for</span>
              </div>
            </div>
            
            <div class="highlight-item">
              <span class="highlight-icon">❌</span>
              <div>
                <strong>What's Excluded</strong>
                <span>Limitations and exclusions that could affect your claim</span>
              </div>
            </div>
            
            <div class="highlight-item">
              <span class="highlight-icon">⏰</span>
              <div>
                <strong>Critical Deadlines</strong>
                <span>Time limits for filing, proof of loss, and legal action</span>
              </div>
            </div>
            
            <div class="highlight-item">
              <span class="highlight-icon">📋</span>
              <div>
                <strong>Your Duties</strong>
                <span>What the policy requires you to do (and when)</span>
              </div>
            </div>
            
            <div class="highlight-item">
              <span class="highlight-icon">🏠</span>
              <div>
                <strong>How You'll Be Paid</strong>
                <span>ACV vs RCV, depreciation, and holdback rules</span>
              </div>
            </div>
          </div>
          
          <button class="btn-phase-action" onclick="window.location.href='app/tools/policy-analyzer-demo.html'">📊 View Sample Coverage Report</button>
        </div>
      </div>
    </div>

    <div class="prevents-box">
      <strong>🛡️ What This Prevents:</strong>
      <ul>
        <li>Accepting a denial for something that's actually covered</li>
        <li>Missing coverage for additional living expenses or code upgrades</li>
        <li>Agreeing to terms that contradict your policy language</li>
        <li>Missing critical filing deadlines you didn't know existed</li>
      </ul>
    </div>

    <div class="value-statement-bottom">
      <strong>Why You Need This:</strong>
      Insurance companies know exactly what your policy says. Most policyholders don't. This puts you at a disadvantage from day one. Before you talk to an adjuster or file anything, you need to know what you're entitled to—in plain English.
    </div>

    <div class="step-completion">
      <div class="completion-checklist">
        <div class="completion-item" onclick="toggleCompletion(this)">
          <span class="completion-checkbox"></span>
          <span>Policy documents uploaded</span>
        </div>
        <div class="completion-item" onclick="toggleCompletion(this)">
          <span class="completion-checkbox"></span>
          <span>Coverage report reviewed</span>
        </div>
        <div class="completion-item" onclick="toggleCompletion(this)">
          <span class="completion-checkbox"></span>
          <span>Coverage limits and deadlines documented</span>
        </div>
      </div>
      
      <button class="btn-complete-step" onclick="completeAndNext(1)">✓ I Understand My Coverage - Continue to Step 2</button>
    </div>
  `
      },
      2: {
        label: 'STEP 2 OF 13',
        title: 'Report Your Loss, Send Written Notice, and Understand Your Policy Duties',
        subtitle: 'Call your insurance company, send written notice to create legal proof, and learn what your policy requires you to do.',
        whatThisPrevents: 'This step prevents late notice denials and duty-to-cooperate violations that void coverage even when damage is clearly covered.',
        guardrail: 'Do not describe the full extent of damage or provide damage estimates during the initial report - only report that a loss occurred.',
        skipWarning: 'Missing the reporting deadline can void your entire claim - most policies require notice within 24-72 hours.',
        customContent: true,
        htmlContent: `
    <div class="value-statement">
      <strong>⚠️ Critical Deadline Alert:</strong>
      Most policies require notice within 24-72 hours of loss discovery. Late notice can void your entire claim. Call your insurance company today.
    </div>

    <div class="process-phases">
      
      <!-- PHASE 1: Report the Loss -->
      <div class="phase-card">
        <div class="phase-header">
          <span class="phase-number">1</span>
          <div>
            <h4>Report the Loss Within 24-72 Hours</h4>
            <p>Make the call today - this starts your claim clock</p>
          </div>
        </div>
        
        <div class="phase-content">
          <div class="action-steps">
            <div class="action-step">
              <span class="step-icon">📞</span>
              <div>
                <strong>Find Your Policy Number</strong>
                <p>Look on your declarations page, insurance card, or policy documents</p>
              </div>
            </div>
            
            <div class="action-step">
              <span class="step-icon">📝</span>
              <div>
                <strong>Use This Script</strong>
                <div class="script-box">
                  "I'm calling to report a [type] loss at my property on [date]. 
                  I need to open a claim and get a claim number. My policy number is [number]."
                </div>
              </div>
            </div>
            
            <div class="action-step">
              <span class="step-icon">✍️</span>
              <div>
                <strong>Write Down Immediately</strong>
                <p>Claim number, adjuster name, phone number, reference numbers, date/time of call</p>
              </div>
            </div>
          </div>
          
          <div class="info-box">
            <strong>What NOT to Say:</strong>
            <ul>
              <li>Don't estimate damage amounts</li>
              <li>Don't agree to recorded statements yet</li>
              <li>Don't speculate about cause</li>
              <li>Just report that a loss occurred</li>
            </ul>
          </div>
          
          <button class="btn-phase-action" onclick="window.location.href='app/claim-journal.html'">📋 Log Call in Claim Journal</button>
        </div>
      </div>
      
      <!-- PHASE 2: Send Written Notice -->
      <div class="phase-card">
        <div class="phase-header">
          <span class="phase-number">2</span>
          <div>
            <h4>Send Written Notice of Loss</h4>
            <p>Create legal proof you reported on time</p>
          </div>
        </div>
        
        <div class="phase-content">
          <p class="phase-intro">Always follow up your phone call with written notice. This creates legal proof that you reported within the required timeframe.</p>
          
          <div class="written-notice-benefits">
            <div class="notice-benefit">
              <span class="benefit-icon">✓</span>
              <div>
                <strong>Proves Timely Notice</strong>
                <p>If the insurer later claims you reported late, you have written proof with date stamps.</p>
              </div>
            </div>
            
            <div class="notice-benefit">
              <span class="benefit-icon">✓</span>
              <div>
                <strong>Creates Paper Trail</strong>
                <p>Documents exactly what you reported and when - prevents "he said, she said" disputes.</p>
              </div>
            </div>
            
            <div class="notice-benefit">
              <span class="benefit-icon">✓</span>
              <div>
                <strong>Shows Professionalism</strong>
                <p>Insurers take written claims more seriously than phone-only reports.</p>
              </div>
            </div>
          </div>
          
          <div class="info-box">
            <strong>How to Send:</strong>
            <ol>
              <li>Email to claims department (immediate delivery, date stamped)</li>
              <li>Certified mail with return receipt (legal proof of delivery)</li>
              <li>Keep copies of both for your records</li>
            </ol>
          </div>
          
          <button class="btn-phase-action" onclick="window.location.href='app/tools/written-notice-generator.html'">📧 Generate Written Notice Letter</button>
        </div>
      </div>
      
      <!-- PHASE 3: Understand Your Policy Duties -->
      <div class="phase-card">
        <div class="phase-header">
          <span class="phase-number">3</span>
          <div>
            <h4>Your Policy Duties Activate Now</h4>
            <p>What you're legally required to do (pulled from your policy)</p>
          </div>
        </div>
        
        <div class="phase-content">
          <p class="phase-intro">Your policy requires these actions. Failure to comply = coverage denial even if damage is legitimate.</p>
          
          <div class="duties-grid">
            
            <div class="duty-card">
              <div class="duty-header">
                <span class="duty-icon">🛡️</span>
                <div>
                  <strong>DUTY 1: Protect the Property</strong>
                  <span class="duty-deadline">Timeline: Immediately</span>
                </div>
              </div>
              <div class="duty-content">
                <p class="duty-description">Make reasonable emergency repairs to prevent further damage. Board windows, tarp roof, turn off water, secure the property.</p>
                <div class="info-box">
                  <strong>Why it matters:</strong> If you don't mitigate, the insurer won't pay for additional damage that could have been prevented.
                </div>
                <button class="btn-duty-tool" onclick="window.location.href='app/tools/mitigation-documentation-tool.html'">📝 Emergency Mitigation Log</button>
              </div>
            </div>
            
            <div class="duty-card">
              <div class="duty-header">
                <span class="duty-icon">🤝</span>
                <div>
                  <strong>DUTY 2: Cooperate with Investigation</strong>
                  <span class="duty-deadline">Timeline: Throughout claim</span>
                </div>
              </div>
              <div class="duty-content">
                <p class="duty-description">Answer questions, allow property inspections, provide requested documents, attend examinations under oath if requested.</p>
                <div class="info-box">
                  <strong>Why it matters:</strong> "Lack of cooperation" is the most common reason insurers use to deny otherwise valid claims.
                </div>
                <div class="info-box">
                  <strong>Cooperate BUT:</strong> Don't give recorded statements without reviewing your rights. Don't sign anything without reading it first.
                </div>
                <button class="btn-duty-tool" onclick="window.location.href='app/tools/compliance-review.html'">📊 Cooperation Tracker</button>
              </div>
            </div>
            
            <div class="duty-card">
              <div class="duty-header">
                <span class="duty-icon">📸</span>
                <div>
                  <strong>DUTY 3: Document Everything</strong>
                  <span class="duty-deadline">Timeline: Before adjuster inspection</span>
                </div>
              </div>
              <div class="duty-content">
                <p class="duty-description">Take comprehensive photos, create itemized inventory of damaged property, save receipts, gather proof of ownership.</p>
                <div class="info-box">
                  <strong>Why it matters:</strong> The burden of proof is on YOU. Without documentation, you can't prove what was damaged or its value.
                </div>
                <button class="btn-duty-tool" onclick="window.location.href='app/tools/photo-upload-organizer.html'">📁 Photo & Evidence Organizer</button>
              </div>
            </div>
            
            <div class="duty-card">
              <div class="duty-header">
                <span class="duty-icon">⏰</span>
                <div>
                  <strong>DUTY 4: File Proof of Loss</strong>
                  <span class="duty-deadline">Timeline: Within 60 days (varies by policy)</span>
                </div>
              </div>
              <div class="duty-content">
                <p class="duty-description">Submit a sworn statement of loss with itemized damages, estimates, and supporting documentation by the policy deadline.</p>
                <div class="info-box">
                  <strong>Why it matters:</strong> This is your formal legal claim. Miss this deadline and your coverage is void—no exceptions.
                </div>
                <div class="info-box">
                  <strong>Your deadline:</strong> <span id="polDeadline">[Calculated from your loss date]</span>
                </div>
                <button class="btn-duty-tool" onclick="window.location.href='app/tools/proof-of-loss-tracker.html'">📄 Proof of Loss Tracker</button>
              </div>
            </div>
            
            <div class="duty-card">
              <div class="duty-header">
                <span class="duty-icon">🚫</span>
                <div>
                  <strong>DUTY 5: Don't Make Permanent Repairs Yet</strong>
                  <span class="duty-deadline">Timeline: Until inspection or authorization</span>
                </div>
              </div>
              <div class="duty-content">
                <p class="duty-description">Emergency mitigation only. Don't make permanent repairs until the insurer inspects or authorizes repairs in writing.</p>
                <div class="info-box">
                  <strong>Why it matters:</strong> The insurer has the right to inspect damage before repairs. If you repair first, they can deny payment.
                </div>
                <div class="info-box">
                  <strong>Exception:</strong> Keep all receipts for emergency repairs (tarps, water extraction, boarding). These are reimbursable even without pre-approval.
                </div>
                <button class="btn-duty-tool" onclick="window.location.href='app/tools/compliance-review.html'">📋 Duty Compliance Tracker</button>
              </div>
            </div>
            
          </div>
        </div>
      </div>
      
    </div>

    <div class="prevents-box">
      <strong>🛡️ What This Step Prevents:</strong>
      <ul>
        <li>Late notice denials (most common reason claims are voided)</li>
        <li>"Lack of cooperation" denials due to missed duties</li>
        <li>Loss of coverage for failing to protect property</li>
        <li>Denial for making repairs before inspection</li>
        <li>"He said, she said" disputes about what was reported and when</li>
      </ul>
    </div>

    <div class="step-completion">
      <div class="completion-checklist">
        <div class="completion-item" onclick="toggleCompletion(this)">
          <span class="completion-checkbox"></span>
          <span>Called insurance company and reported loss</span>
        </div>
        <div class="completion-item" onclick="toggleCompletion(this)">
          <span class="completion-checkbox"></span>
          <span>Received claim number in writing</span>
        </div>
        <div class="completion-item" onclick="toggleCompletion(this)">
          <span class="completion-checkbox"></span>
          <span>Documented the call in claim diary</span>
        </div>
        <div class="completion-item" onclick="toggleCompletion(this)">
          <span class="completion-checkbox"></span>
          <span>Understand all 5 policy duties</span>
        </div>
        <div class="completion-item" onclick="toggleCompletion(this)">
          <span class="completion-checkbox"></span>
          <span>Sent written notice via email/certified mail</span>
        </div>
        <div class="completion-item" onclick="toggleCompletion(this)">
          <span class="completion-checkbox"></span>
          <span>Started emergency mitigation (if needed)</span>
        </div>
      </div>
      
      <button class="btn-complete-step" onclick="completeAndNext(2)">✓ Loss Reported & Duties Understood - Continue to Step 3</button>
    </div>
  `
      },
      3: {
        label: 'STEP 3 OF 13',
        title: 'Document Your Loss & Damage',
        subtitle: 'Photograph everything, create detailed inventory, and gather proof of ownership before the adjuster arrives.',
        whatThisPrevents: 'This step prevents denial for insufficient proof of loss and undervaluation because you cannot prove what was damaged or its value.',
        guardrail: 'Do not throw away damaged items or begin repairs until you have photographed everything and the adjuster has completed their inspection.',
        skipWarning: 'Without documentation, you cannot prove what was damaged. The burden of proof is entirely on you—no photos = no payment.',
        customContent: true,
        htmlContent: `
          <div class="value-statement">
            <strong>Why This Is Critical:</strong>
            Insurance claims are won or lost based on documentation. The burden of proof is entirely on YOU to prove what was damaged and its value. Without comprehensive photos, itemized inventory, and proof of ownership, the insurer can deny your claim or severely undervalue it. This documentation must be completed before the adjuster inspection.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Photograph All Damage -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Photograph All Damage Comprehensively</h4>
                  <p>Visual proof is your strongest evidence</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Take detailed photos of every damaged area from multiple angles. Poor documentation is the #1 reason claims are underpaid.</p>
                
                <div class="photo-guidance">
                  <div class="guidance-section">
                    <strong>What to Photograph:</strong>
                    <ul>
                      <li>All structural damage (roof, walls, ceilings, floors, windows, doors)</li>
                      <li>All damaged personal property (furniture, electronics, clothing, etc.)</li>
                      <li>Cause of loss (water source, tree damage, fire origin, etc.)</li>
                      <li>Surrounding context (entire room, building exterior, property overview)</li>
                    </ul>
                  </div>
                  
                  <div class="guidance-section">
                    <strong>How to Photograph:</strong>
                    <ul>
                      <li>Multiple angles of each damaged area (wide shot, medium, close-up)</li>
                      <li>Use good lighting or flash—dark photos are worthless</li>
                      <li>Include reference objects for scale (ruler, coin, hand)</li>
                      <li>Capture serial numbers, model numbers, brand labels</li>
                      <li>Date stamp if possible (use phone camera default settings)</li>
                    </ul>
                  </div>
                  
                  <div class="info-box">
                    <strong>Common Mistakes to Avoid:</strong>
                    Poor lighting, missing room context, only photographing "worst" damage (photograph EVERYTHING), not capturing model/serial numbers, deleting "bad" photos (adjusters want to see all angles).
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/photo-upload-organizer.html'">📸 Upload & Organize Damage Photos</button>
                
                <div class="info-box" style="margin-top: 16px;">
                  <strong>How Many Photos?</strong>
                  Minimum 10-20 photos for small claims. For major damage, 50-100+ photos is normal. More is better—you cannot over-document.
                </div>
              </div>
            </div>
            
            <!-- PHASE 2: Create Itemized Inventory -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>Create Detailed Itemized Inventory</h4>
                  <p>List every damaged item with description and value</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Create a room-by-room inventory of all damaged property—both structural elements and personal belongings. Generic descriptions like "clothing" or "furniture" result in lowball payments.</p>
                
                <div class="inventory-guidance">
                  <div class="guidance-section">
                    <strong>For Each Damaged Item, Document:</strong>
                    <ul>
                      <li><strong>Description:</strong> Specific details (brand, model, size, color, material)</li>
                      <li><strong>Age/Purchase Date:</strong> When you bought it</li>
                      <li><strong>Purchase Price:</strong> What you originally paid</li>
                      <li><strong>Replacement Cost:</strong> What it would cost to replace today</li>
                      <li><strong>Condition Before Loss:</strong> Excellent, good, fair, poor</li>
                      <li><strong>Location:</strong> Which room (for organization)</li>
                    </ul>
                  </div>
                  
                  <div class="example-comparison">
                    <div class="bad-example">
                      <strong>❌ Bad Inventory Entry:</strong>
                      <p>"TV - $500"</p>
                    </div>
                    <div class="good-example">
                      <strong>✓ Good Inventory Entry:</strong>
                      <p>"Samsung 55" QLED 4K Smart TV, Model QN55Q60RAFXZA, purchased 3/2021 from Best Buy for $897.99, excellent condition, living room"</p>
                    </div>
                  </div>
                  
                  <div class="info-box">
                    <strong>Don't Skip Small Items:</strong>
                    Kitchenware, linens, toiletries, cleaning supplies, tools, decorations—it all adds up. A fully stocked home has $50,000-$100,000+ in contents. Document everything or you're leaving money on the table.
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/contents-inventory.html'">📋 Create Digital Inventory</button>
              </div>
            </div>
            
            <!-- PHASE 3: Gather Proof of Ownership & Value -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Gather Proof of Ownership & Value</h4>
                  <p>Back up your inventory with documentation</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">The insurer will question high-value items without proof. Gather any documentation that shows you owned the items and their value.</p>
                
                <div class="proof-types">
                  <div class="proof-category">
                    <span class="category-icon">🧾</span>
                    <div>
                      <strong>Purchase Documentation</strong>
                      <p>Receipts, credit card statements, bank statements, invoices, order confirmations, delivery records</p>
                    </div>
                  </div>
                  
                  <div class="proof-category">
                    <span class="category-icon">📄</span>
                    <div>
                      <strong>Product Documentation</strong>
                      <p>Warranty cards, owner's manuals, product registration, appraisals, certificates of authenticity</p>
                    </div>
                  </div>
                  
                  <div class="proof-category">
                    <span class="category-icon">📸</span>
                    <div>
                      <strong>Pre-Loss Photos/Videos</strong>
                      <p>Family photos showing items in background, social media posts, home tour videos, real estate listing photos, vacation photos</p>
                    </div>
                  </div>
                  
                  <div class="proof-category">
                    <span class="category-icon">💳</span>
                    <div>
                      <strong>Financial Records</strong>
                      <p>Insurance schedules (jewelry, art), tax records (home office equipment), moving company inventories</p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Can't Find Receipts?</strong>
                  Don't panic. Use online purchase history (Amazon, retailers), credit card statements, bank transaction history, and even ask retailers to reprint receipts using your loyalty card number. Pre-loss photos from social media can also establish ownership.
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/damage-documentation.html'">📁 Upload Proof Documents</button>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Denial for "insufficient proof of loss" or inability to verify damage</li>
              <li>Severe undervaluation because you can't prove what you owned or its value</li>
              <li>Adjuster claiming damage "wasn't there" or "pre-existed" because you lack photos</li>
              <li>Missing thousands in contents claims because you forgot items in the chaos</li>
              <li>Disputes about scope of damage (your photos vs their memory months later)</li>
            </ul>
          </div>

          <div class="step-completion">
            <h3 style="font-size: 16px; font-weight: 700; color: var(--navy-dark); margin-bottom: 16px;">Documentation Readiness Checklist</h3>
            
            <div class="completion-checklist">
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Uploaded 10+ comprehensive damage photos (all angles, good lighting)</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Created detailed room-by-room inventory with descriptions and values</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Gathered proof of ownership (receipts, statements, pre-loss photos)</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Organized all documentation in Evidence Organizer</span>
              </div>
            </div>
            
            <div class="info-box" style="margin: 20px 0;">
              <strong>Before Moving to Step 4:</strong>
              Make sure your documentation is complete. Once the adjuster inspects, it's too late to add forgotten items or take additional photos of damage that's been repaired.
            </div>
            
            <button class="btn-complete-step" onclick="completeAndNext(3)">✓ Documentation Complete - Continue to Step 4</button>
          </div>
        `
      },
      4: {
        label: 'STEP 4 OF 13',
        title: 'Get Your Own Contractor Estimate',
        subtitle: 'Hire a licensed contractor for detailed repair estimate before negotiating with the insurance company.',
        whatThisPrevents: 'This step prevents accepting lowball adjuster estimates and losing thousands because you have no basis to negotiate or challenge their numbers.',
        guardrail: 'Do not accept the insurance adjuster\'s estimate as final without getting your own independent contractor estimate for comparison.',
        skipWarning: 'Without your own estimate, you have no leverage to negotiate. The adjuster works for the insurance company, not you.',
        customContent: true,
        htmlContent: `
          <div class="value-statement">
            <strong>Why This Is Critical:</strong>
            The insurance adjuster works for the insurance company, not you. Their estimate will likely be lower than the actual repair cost. Getting your own professional estimate FIRST gives you leverage to challenge their numbers. Without this, you have no basis to negotiate.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Find a Licensed Contractor -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Find a Licensed Contractor</h4>
                  <p>Get the right professional to assess your damage</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Hire a licensed contractor who specializes in your type of damage and has experience working with insurance claims.</p>
                
                <div class="contractor-finding-guidance">
                  <div class="guidance-section">
                    <strong>When to Get the Estimate:</strong>
                    <ul>
                      <li><strong>Ideal:</strong> BEFORE the adjuster inspection (so you know what to look for)</li>
                      <li><strong>Acceptable:</strong> Immediately after adjuster inspection (to compare)</li>
                      <li><strong>Latest:</strong> Before accepting adjuster's estimate as final</li>
                    </ul>
                  </div>
                  
                  <div class="guidance-section">
                    <strong>How to Find Contractors:</strong>
                    <ul>
                      <li>Ask for referrals from neighbors, friends who've had similar damage</li>
                      <li>Look up state contractor license database (verify active license)</li>
                      <li>Search for contractors experienced with insurance claims</li>
                      <li>Check online reviews (Google, Yelp, Better Business Bureau)</li>
                      <li>Contact multiple contractors (get 2-3 estimates if possible)</li>
                    </ul>
                  </div>
                  
                  <div class="guidance-section">
                    <strong>What to Ask Before Hiring:</strong>
                    <ul>
                      <li><strong>License Number:</strong> "What's your contractor license number?" (verify online)</li>
                      <li><strong>Insurance:</strong> "Are you insured for liability and workers' comp?"</li>
                      <li><strong>Experience:</strong> "How many [water/fire/wind] damage claims have you worked?"</li>
                      <li><strong>References:</strong> "Can you provide 3 references from recent insurance jobs?"</li>
                      <li><strong>Estimate Detail:</strong> "Will your estimate be line-by-line with material/labor breakdown?"</li>
                    </ul>
                  </div>
                  
                  <div class="info-box">
                    <strong>🚩 Red Flags to Avoid:</strong>
                    Unlicensed contractors, cash-only payment demands, no written contract, pressure to sign immediately, no references, unwilling to provide detailed estimate, claims to "work directly with insurance" (conflict of interest).
                  </div>
                </div>
              </div>
            </div>
            
            <!-- PHASE 2: What the Estimate Must Include -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>What the Estimate Must Include</h4>
                  <p>Ensure your estimate has negotiating power</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">A generic "total cost" estimate is worthless for negotiation. You need a detailed, line-by-line breakdown to challenge the adjuster's numbers.</p>
                
                <div class="estimate-requirements">
                  <div class="requirement-item">
                    <span class="requirement-icon">📋</span>
                    <div>
                      <strong>Line-by-Line Breakdown</strong>
                      <p>Every repair task listed separately (not just a total number). Example: "Remove damaged drywall - 200 sq ft" as separate line from "Install new drywall - 200 sq ft"</p>
                    </div>
                  </div>
                  
                  <div class="requirement-item">
                    <span class="requirement-icon">🛠️</span>
                    <div>
                      <strong>Material Costs with Specifics</strong>
                      <p>Exact products, brands, grades. Example: "Owens Corning Duration shingles, Architectural grade, Desert Tan" not just "shingles"</p>
                    </div>
                  </div>
                  
                  <div class="requirement-item">
                    <span class="requirement-icon">👷</span>
                    <div>
                      <strong>Labor Costs by Task</strong>
                      <p>Hourly rates or per-item costs broken down. Example: "Drywall installation labor: 8 hours @ $65/hr = $520"</p>
                    </div>
                  </div>
                  
                  <div class="requirement-item">
                    <span class="requirement-icon">📝</span>
                    <div>
                      <strong>Scope of Work Descriptions</strong>
                      <p>What will be done for each line item. Example: "Remove and dispose of water-damaged carpet and pad, prep subfloor, install new carpet and pad"</p>
                    </div>
                  </div>
                  
                  <div class="requirement-item">
                    <span class="requirement-icon">⚖️</span>
                    <div>
                      <strong>Code Upgrade Requirements</strong>
                      <p>Any work required to bring property to current building code. Example: "Electrical panel upgrade to 200 amp (required by code for kitchen remodel)"</p>
                    </div>
                  </div>
                  
                  <div class="requirement-item">
                    <span class="requirement-icon">✅</span>
                    <div>
                      <strong>Contractor Credentials</strong>
                      <p>License number, insurance info, contact details on letterhead or estimate footer</p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Why Generic Estimates Don't Work:</strong>
                  If your estimate just says "Repair kitchen: $15,000" and the adjuster says "$10,000", you have no way to identify what they're missing or underpricing. Line-by-line detail gives you negotiating power.
                </div>
              </div>
            </div>
            
            <!-- PHASE 3: Upload for Quality Analysis -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Upload for Quality Analysis</h4>
                  <p>Verify your estimate is strong before negotiating</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Before using your estimate to negotiate, verify it's complete and professional. Upload it for AI analysis to identify any weaknesses.</p>
                
                <div class="analysis-benefits">
                  <div class="benefit-item">
                    <strong>✓ Completeness Check</strong>
                    <p>Identifies missing line items, trades, or scope gaps that weaken your estimate</p>
                  </div>
                  
                  <div class="benefit-item">
                    <strong>✓ Pricing Reasonableness</strong>
                    <p>Flags unusually high or low pricing that could hurt credibility</p>
                  </div>
                  
                  <div class="benefit-item">
                    <strong>✓ Detail Score</strong>
                    <p>Rates level of detail (generic vs. specific) for negotiating strength</p>
                  </div>
                  
                  <div class="benefit-item">
                    <strong>✓ Credential Verification</strong>
                    <p>Confirms contractor license, insurance info is included</p>
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/estimate-review.html'">📊 Upload Contractor Estimate for Analysis</button>
                
                <div class="info-box" style="margin-top: 16px;">
                  <strong>What You'll Get:</strong>
                  Estimate Quality Report showing strengths, weaknesses, missing items, and recommendations to strengthen your estimate before negotiation.
                </div>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Accepting adjuster's lowball estimate because you have nothing to compare it to</li>
              <li>Missing major repair items that a professional contractor would catch</li>
              <li>Negotiating blindly without market pricing data or leverage</li>
              <li>Losing thousands because adjuster uses outdated or artificially low pricing</li>
              <li>Getting stuck with incomplete repairs because scope wasn't properly defined</li>
            </ul>
          </div>

          <div class="step-completion">
            <h3 style="font-size: 16px; font-weight: 700; color: var(--navy-dark); margin-bottom: 16px;">Contractor Estimate Checklist</h3>
            
            <div class="completion-checklist">
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Found and hired licensed contractor with insurance claim experience</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Obtained detailed line-by-line estimate (not just total cost)</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Estimate includes material/labor breakdown and scope descriptions</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Uploaded estimate for AI quality analysis</span>
              </div>
            </div>
            
            <div class="info-box" style="margin: 20px 0;">
              <strong>Before Moving to Step 5:</strong>
              Make sure your contractor estimate is complete and professional. You'll use this to compare against the adjuster's estimate in Step 5.
            </div>
            
            <button class="btn-complete-step" onclick="completeAndNext(4)">✓ Contractor Estimate Obtained - Continue to Step 5</button>
          </div>
        `
      },
      5: {
        label: 'STEP 5 OF 13',
        title: 'Compare the Insurance Estimate to Contractor Pricing',
        subtitle: 'Review the adjuster\'s estimate line-by-line and identify where they\'re underpaying.',
        whatThisPrevents: 'This step prevents accepting lowball estimates and missing $10,000-$30,000+ in legitimate repairs they excluded or underpriced.',
        guardrail: 'Do not accept or sign anything related to the adjuster\'s estimate until you\'ve completed this line-by-line comparison.',
        skipWarning: 'Without comparing estimates, you won\'t know you\'re being shorted thousands of dollars in legitimate repair costs.',
        customContent: true,
        htmlContent: `
          <div class="value-statement">
            <strong>Why This Is Critical:</strong>
            Insurance adjusters routinely underestimate repair costs using outdated pricing, excluding necessary work, or lowballing material quality. Comparing their estimate against your contractor's actual market pricing reveals where they're shorting you—often by $10,000-$30,000+.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Receive & Review the Adjuster's Estimate -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Receive & Review the Adjuster's Estimate</h4>
                  <p>Know what to expect and what to look for</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">The adjuster will send their estimate after inspecting your property. Review it carefully before accepting anything.</p>
                
                <div class="adjuster-estimate-guidance">
                  <div class="guidance-section">
                    <strong>When It Arrives:</strong>
                    <ul>
                      <li>Usually 7-10 days after adjuster inspection</li>
                      <li>May arrive via email, mail, or insurance company portal</li>
                      <li>Sometimes called "Estimate of Damages" or "Scope of Loss"</li>
                    </ul>
                  </div>
                  
                  <div class="guidance-section">
                    <strong>What It Should Include:</strong>
                    <ul>
                      <li>Detailed scope of work (what they're covering)</li>
                      <li>Line-by-line breakdown (not just a total)</li>
                      <li>Pricing for materials and labor per item</li>
                      <li>Square footage or unit measurements</li>
                      <li>Depreciation calculations (if applicable)</li>
                      <li>Total: Actual Cash Value (ACV) and Replacement Cost Value (RCV)</li>
                    </ul>
                  </div>
                  
                  <div class="guidance-section">
                    <strong>🚩 Red Flags to Watch For:</strong>
                    <ul>
                      <li><strong>Vague descriptions:</strong> "Repair kitchen" instead of specific line items</li>
                      <li><strong>Missing items:</strong> Damage you documented that's not in their estimate</li>
                      <li><strong>Generic totals:</strong> No line-by-line breakdown to verify</li>
                      <li><strong>Suspiciously low:</strong> Total is 30-50% less than your contractor's estimate</li>
                      <li><strong>Excessive depreciation:</strong> Depreciating items that should be full replacement</li>
                    </ul>
                  </div>
                  
                  <div class="info-box">
                    <strong>What If They Don't Send It?</strong>
                    Your policy requires them to provide a written estimate. Send a written demand: "Per my policy's duty to cooperate clause, I am requesting a detailed written estimate of damages with line-by-line pricing breakdown within 7 days."
                  </div>
                </div>
              </div>
            </div>
            
            <!-- PHASE 2: Upload for Line-by-Line Comparison -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>Upload for Line-by-Line Comparison</h4>
                  <p>Let AI identify every discrepancy</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Upload both estimates for automated comparison. The AI will identify every pricing difference, scope gap, and missing item.</p>
                
                <div class="comparison-process">
                  <div class="process-step">
                    <span class="step-number">1</span>
                    <div>
                      <strong>Upload Adjuster's Estimate</strong>
                      <p>PDF, Excel, or image of their estimate</p>
                    </div>
                  </div>
                  
                  <div class="process-step">
                    <span class="step-number">2</span>
                    <div>
                      <strong>Upload Your Contractor's Estimate</strong>
                      <p>From Step 4 (if not already uploaded)</p>
                    </div>
                  </div>
                  
                  <div class="process-step">
                    <span class="step-number">3</span>
                    <div>
                      <strong>AI Performs Line-by-Line Analysis</strong>
                      <p>Compares every line item, identifies gaps and pricing differences</p>
                    </div>
                  </div>
                  
                  <div class="process-step">
                    <span class="step-number">4</span>
                    <div>
                      <strong>Get Estimate Comparison Report</strong>
                      <p>Dollar-by-dollar breakdown with visual highlighting of discrepancies</p>
                    </div>
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/estimate-comparison.html'">📊 Compare Estimates Now</button>
                
                <div class="info-box" style="margin-top: 16px;">
                  <strong>What You'll Get:</strong>
                  Detailed report showing: Total underpayment amount, scope gaps (missing repairs), pricing differences per line item, major discrepancies highlighted, and negotiation talking points.
                </div>
              </div>
            </div>
            
            <!-- PHASE 3: Understand Common Adjuster Tactics -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Understand Common Adjuster Tactics</h4>
                  <p>Know how they're shorting you</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Adjusters use predictable tactics to reduce payouts. Recognizing these helps you challenge them effectively.</p>
                
                <div class="adjuster-tactics">
                  <div class="tactic-card">
                    <div class="tactic-header">
                      <span class="tactic-icon">🔍</span>
                      <strong>Tactic 1: Scope Gaps</strong>
                    </div>
                    <p><strong>What it is:</strong> Entire repairs they excluded from their estimate</p>
                    <p><strong>Example:</strong> Your contractor includes "Replace water-damaged subfloor - $2,500" but adjuster's estimate has no subfloor line item at all</p>
                    <p><strong>Why they do it:</strong> Hoping you won't notice missing work</p>
                  </div>
                  
                  <div class="tactic-card">
                    <div class="tactic-header">
                      <span class="tactic-icon">💰</span>
                      <strong>Tactic 2: Pricing Games</strong>
                    </div>
                    <p><strong>What it is:</strong> Using artificially low pricing per unit</p>
                    <p><strong>Example:</strong> Contractor: $75/sq ft for hardwood. Adjuster: $50/sq ft (outdated pricing from 3 years ago)</p>
                    <p><strong>Why they do it:</strong> Software uses old pricing databases to save money</p>
                  </div>
                  
                  <div class="tactic-card">
                    <div class="tactic-header">
                      <span class="tactic-icon">📋</span>
                      <strong>Tactic 3: Missing Items</strong>
                    </div>
                    <p><strong>What it is:</strong> Damage you documented that they "didn't see"</p>
                    <p><strong>Example:</strong> You photographed ceiling damage in 3 rooms, they only included 1 room</p>
                    <p><strong>Why they do it:</strong> Claiming damage wasn't visible or pre-existed</p>
                  </div>
                  
                  <div class="tactic-card">
                    <div class="tactic-header">
                      <span class="tactic-icon">📉</span>
                      <strong>Tactic 4: Excessive Depreciation</strong>
                    </div>
                    <p><strong>What it is:</strong> Depreciating items that should be full replacement cost</p>
                    <p><strong>Example:</strong> Depreciating structural materials like drywall, framing (usually not depreciated)</p>
                    <p><strong>Why they do it:</strong> Reduces initial payout (you fight for recoverable depreciation later)</p>
                  </div>
                  
                  <div class="tactic-card">
                    <div class="tactic-header">
                      <span class="tactic-icon">⚖️</span>
                      <strong>Tactic 5: Code Upgrade Refusals</strong>
                    </div>
                    <p><strong>What it is:</strong> Refusing to cover work required by building code</p>
                    <p><strong>Example:</strong> "We only pay to replace what was there" (ignoring code upgrades legally required)</p>
                    <p><strong>Why they do it:</strong> Many policies DO cover code upgrades—they're hoping you don't know</p>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- PHASE 4: Calculate Your Leverage -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">4</span>
                <div>
                  <h4>Calculate Your Leverage</h4>
                  <p>Quantify the underpayment for negotiation</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Use the comparison data to build your negotiation case. This becomes your ammunition for Step 8.</p>
                
                <div class="leverage-calculator">
                  <div class="leverage-item">
                    <span class="leverage-icon">💵</span>
                    <div>
                      <strong>Total Underpayment</strong>
                      <p>Contractor estimate total minus adjuster estimate total = Your negotiation target</p>
                      <p class="example-calc">Example: $45,000 (contractor) - $28,000 (adjuster) = <strong>$17,000 underpayment</strong></p>
                    </div>
                  </div>
                  
                  <div class="leverage-item">
                    <span class="leverage-icon">🎯</span>
                    <div>
                      <strong>Major Line Item Disputes</strong>
                      <p>Identify the 5-10 biggest dollar gaps to focus negotiation</p>
                      <p class="example-calc">Example: Roofing labor - Contractor $8,500 vs Adjuster $4,200 = <strong>$4,300 gap</strong></p>
                    </div>
                  </div>
                  
                  <div class="leverage-item">
                    <span class="leverage-icon">🔧</span>
                    <div>
                      <strong>Scope Omissions</strong>
                      <p>List all repairs contractor included that adjuster completely excluded</p>
                      <p class="example-calc">Example: Subfloor replacement, electrical upgrades, mold remediation = <strong>$6,800 missing work</strong></p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>This Becomes Your Negotiation Ammunition:</strong>
                  In Step 8, you'll use this comparison report to challenge the adjuster's estimate line-by-line, demand inclusion of missing scope, and negotiate pricing to market rates. Without this analysis, you have no leverage.
                </div>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Accepting lowball estimate because you don't know it's low</li>
              <li>Missing $10,000-$30,000+ in legitimate repairs they excluded</li>
              <li>Getting stuck with their outdated pricing from years ago</li>
              <li>Signing settlement release without realizing you're being shorted</li>
              <li>Losing negotiation leverage because you can't prove underpayment</li>
            </ul>
          </div>

          <div class="step-completion">
            <h3 style="font-size: 16px; font-weight: 700; color: var(--navy-dark); margin-bottom: 16px;">Estimate Comparison Checklist</h3>
            
            <div class="completion-checklist">
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Received adjuster's written estimate with line-by-line breakdown</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Uploaded both estimates for AI comparison analysis</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Reviewed Estimate Comparison Report showing all discrepancies</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Calculated total underpayment and identified major line item disputes</span>
              </div>
            </div>
            
            <div class="info-box" style="margin: 20px 0;">
              <strong>Before Moving to Step 6:</strong>
              Make sure you understand where the adjuster is shorting you. This comparison data is essential for negotiation in Step 8.
            </div>
            
            <button class="btn-complete-step" onclick="completeAndNext(5)">✓ Estimates Compared - Continue to Step 6</button>
          </div>
        `
      },
      6: {
        label: 'STEP 6 OF 13',
        title: 'Verify Coverage for Your Documented Losses',
        subtitle: 'Check what\'s covered, what\'s excluded, and calculate your maximum recovery under policy limits.',
        whatThisPrevents: 'This step prevents wasting time claiming items the policy won\'t cover and missing coverage you\'re entitled to (ALE, code upgrades, debris removal).',
        guardrail: 'Do not assume everything you documented is covered—verify each loss against your policy\'s coverage sections, limits, and exclusions.',
        skipWarning: 'Without verifying coverage, you may discover too late that jewelry has a $5k sublimit or certain damage is excluded.',
        customContent: true,
        htmlContent: `
          <div class="value-statement">
            <strong>Why This Is Critical:</strong>
            You've documented everything (Steps 3-5). Now verify that your policy actually covers what you're claiming. Many policyholders discover too late that jewelry has a $5k sublimit, or that certain perils are excluded. This step prevents wasting time claiming items the policy won't pay for and identifies coverage gaps you need to address.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Map Losses to Coverage Sections -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Map Losses to Coverage Sections</h4>
                  <p>Link documented damage to specific policy coverages</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Your policy has different coverage sections with separate limits. Make sure you're claiming under the right section.</p>
                
                <div class="coverage-mapping">
                  <div class="coverage-section">
                    <div class="coverage-header">
                      <span class="coverage-icon">🏠</span>
                      <strong>Coverage A: Dwelling</strong>
                    </div>
                    <p><strong>What it covers:</strong> Structural repairs to your home (roof, walls, floors, built-in appliances, HVAC, plumbing, electrical)</p>
                    <p><strong>Your documented losses:</strong> Roof damage, water-damaged drywall, flooring replacement, window repairs</p>
                    <p class="coverage-limit">Typical limit: $250,000-$500,000</p>
                  </div>
                  
                  <div class="coverage-section">
                    <div class="coverage-header">
                      <span class="coverage-icon">🛋️</span>
                      <strong>Coverage C: Personal Property (Contents)</strong>
                    </div>
                    <p><strong>What it covers:</strong> Furniture, electronics, clothing, kitchenware, tools, decorations—everything not permanently attached</p>
                    <p><strong>Your documented losses:</strong> Damaged furniture, ruined electronics, clothing, kitchen items from your inventory</p>
                    <p class="coverage-limit">Typical limit: 50-70% of dwelling (e.g., $125,000-$350,000)</p>
                  </div>
                  
                  <div class="coverage-section">
                    <div class="coverage-header">
                      <span class="coverage-icon">🏨</span>
                      <strong>Coverage D: Additional Living Expenses (ALE)</strong>
                    </div>
                    <p><strong>What it covers:</strong> Hotel, meals, temporary housing, storage, transportation while home is uninhabitable</p>
                    <p><strong>Your documented losses:</strong> Hotel receipts, restaurant meals above normal, moving/storage costs</p>
                    <p class="coverage-limit">Typical limit: 20-30% of dwelling (e.g., $50,000-$150,000)</p>
                  </div>
                  
                  <div class="coverage-section">
                    <div class="coverage-header">
                      <span class="coverage-icon">🏚️</span>
                      <strong>Coverage B: Other Structures</strong>
                    </div>
                    <p><strong>What it covers:</strong> Detached garage, shed, fence, deck, gazebo—structures not attached to main dwelling</p>
                    <p><strong>Your documented losses:</strong> Detached garage damage, fence repairs, deck replacement</p>
                    <p class="coverage-limit">Typical limit: 10% of dwelling (e.g., $25,000-$50,000)</p>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Why This Matters:</strong>
                  If you claim structural damage under Contents coverage, you're eating into the wrong limit. Proper mapping ensures you maximize available coverage under each section.
                </div>
              </div>
            </div>
            
            <!-- PHASE 2: Check Sublimits & Special Limits -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>Check Sublimits & Special Limits</h4>
                  <p>Identify items hitting sublimits that reduce recovery</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Even if you have $125k in contents coverage, certain categories have much lower sublimits. Knowing these prevents surprises.</p>
                
                <div class="sublimits-list">
                  <div class="sublimit-item">
                    <div class="sublimit-header">
                      <span class="sublimit-icon">💍</span>
                      <strong>Jewelry, Watches, Furs</strong>
                    </div>
                    <div class="sublimit-details">
                      <span class="sublimit-amount">Typical sublimit: $1,000-$5,000</span>
                      <p>If your jewelry loss is $15,000 but sublimit is $5,000, you only get $5,000 unless items are scheduled separately</p>
                    </div>
                  </div>
                  
                  <div class="sublimit-item">
                    <div class="sublimit-header">
                      <span class="sublimit-icon">💻</span>
                      <strong>Electronics & Computers</strong>
                    </div>
                    <div class="sublimit-details">
                      <span class="sublimit-amount">Typical sublimit: $5,000-$10,000</span>
                      <p>Home office equipment, TVs, computers, gaming systems—often capped lower than you'd expect</p>
                    </div>
                  </div>
                  
                  <div class="sublimit-item">
                    <div class="sublimit-header">
                      <span class="sublimit-icon">💵</span>
                      <strong>Cash, Coins, Precious Metals</strong>
                    </div>
                    <div class="sublimit-details">
                      <span class="sublimit-amount">Typical sublimit: $200-$500</span>
                      <p>If you had $2,000 cash stolen, you'll only recover $200-$500 under most policies</p>
                    </div>
                  </div>
                  
                  <div class="sublimit-item">
                    <div class="sublimit-header">
                      <span class="sublimit-icon">🎨</span>
                      <strong>Art, Collectibles, Antiques</strong>
                    </div>
                    <div class="sublimit-details">
                      <span class="sublimit-amount">Typical sublimit: $2,500-$5,000</span>
                      <p>Fine art, collectibles, antiques often need separate scheduling for full value coverage</p>
                    </div>
                  </div>
                  
                  <div class="sublimit-item">
                    <div class="sublimit-header">
                      <span class="sublimit-icon">🔫</span>
                      <strong>Firearms & Sporting Equipment</strong>
                    </div>
                    <div class="sublimit-details">
                      <span class="sublimit-amount">Typical sublimit: $2,500-$5,000</span>
                      <p>Gun collections, golf clubs, hunting equipment—check your policy's specific limits</p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Scheduled Items Have Higher Limits:</strong>
                  If you previously scheduled items (jewelry, art, etc.) with your insurer, those have separate, higher limits. Check your policy declarations for scheduled property endorsements.
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/sublimit-impact-analyzer.html'">📊 Calculate Sublimit Impact</button>
              </div>
            </div>
            
            <!-- PHASE 3: Flag Exclusions & Disputes -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Flag Exclusions & Disputes</h4>
                  <p>Identify potential coverage disputes before they arise</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Policies exclude certain types of damage. Identify exclusions that might apply to your loss and prepare counter-arguments.</p>
                
                <div class="exclusions-list">
                  <div class="exclusion-item">
                    <div class="exclusion-header">
                      <span class="exclusion-icon">⚠️</span>
                      <strong>Common Exclusion: Wear & Tear / Maintenance</strong>
                    </div>
                    <p><strong>What it excludes:</strong> Damage from gradual deterioration, lack of maintenance, or normal wear</p>
                    <p><strong>Counter-argument:</strong> "This was sudden and accidental damage from [covered peril], not gradual deterioration. Photos show damage occurred during the loss event."</p>
                  </div>
                  
                  <div class="exclusion-item">
                    <div class="exclusion-header">
                      <span class="exclusion-icon">🌊</span>
                      <strong>Common Exclusion: Flood / Surface Water</strong>
                    </div>
                    <p><strong>What it excludes:</strong> Damage from flooding, surface water, groundwater</p>
                    <p><strong>Counter-argument:</strong> "Damage was from burst pipe / roof leak / internal water source, not external flooding. This is covered water damage, not flood."</p>
                  </div>
                  
                  <div class="exclusion-item">
                    <div class="exclusion-header">
                      <span class="exclusion-icon">🏔️</span>
                      <strong>Common Exclusion: Earth Movement</strong>
                    </div>
                    <p><strong>What it excludes:</strong> Earthquake, landslide, sinkhole, soil movement</p>
                    <p><strong>Counter-argument:</strong> "Foundation damage was caused by [covered peril] not earth movement. Structural engineer report confirms causation."</p>
                  </div>
                  
                  <div class="exclusion-item">
                    <div class="exclusion-header">
                      <span class="exclusion-icon">🦠</span>
                      <strong>Common Exclusion: Mold (if not from covered peril)</strong>
                    </div>
                    <p><strong>What it excludes:</strong> Mold from humidity, lack of ventilation, or maintenance issues</p>
                    <p><strong>Counter-argument:</strong> "Mold resulted directly from covered water damage. We mitigated promptly per policy duties. This is ensuing loss from covered peril."</p>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Document Why Coverage Applies:</strong>
                  For any loss that might trigger an exclusion, document: (1) The covered peril that caused it, (2) Photos showing sudden/accidental nature, (3) Timeline proving it wasn't gradual, (4) Expert opinions if needed.
                </div>
              </div>
            </div>
            
            <!-- PHASE 4: Calculate Maximum Claimable Amount -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">4</span>
                <div>
                  <h4>Calculate Maximum Claimable Amount</h4>
                  <p>Know your realistic total recovery</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Add up all documented losses and compare against policy limits to calculate your maximum realistic recovery.</p>
                
                <div class="max-recovery-calculator">
                  <div class="recovery-section">
                    <strong>Dwelling Damage (Coverage A)</strong>
                    <div class="recovery-calc">
                      <span>Your documented structural repairs:</span>
                      <span class="calc-amount">$XX,XXX</span>
                    </div>
                    <div class="recovery-calc">
                      <span>Policy limit:</span>
                      <span class="calc-limit">$XXX,XXX</span>
                    </div>
                    <div class="recovery-result">
                      <span>Claimable under Coverage A:</span>
                      <span class="result-amount">Lesser of the two</span>
                    </div>
                  </div>
                  
                  <div class="recovery-section">
                    <strong>Contents Damage (Coverage C)</strong>
                    <div class="recovery-calc">
                      <span>Your documented contents losses:</span>
                      <span class="calc-amount">$XX,XXX</span>
                    </div>
                    <div class="recovery-calc">
                      <span>Policy limit:</span>
                      <span class="calc-limit">$XXX,XXX</span>
                    </div>
                    <div class="recovery-calc sublimit-adjustment">
                      <span>Minus sublimit reductions:</span>
                      <span class="calc-reduction">-$X,XXX</span>
                    </div>
                    <div class="recovery-result">
                      <span>Claimable under Coverage C:</span>
                      <span class="result-amount">Adjusted total</span>
                    </div>
                  </div>
                  
                  <div class="recovery-section">
                    <strong>Additional Living Expenses (Coverage D)</strong>
                    <div class="recovery-calc">
                      <span>Your documented ALE costs:</span>
                      <span class="calc-amount">$XX,XXX</span>
                    </div>
                    <div class="recovery-calc">
                      <span>Policy limit:</span>
                      <span class="calc-limit">$XX,XXX</span>
                    </div>
                    <div class="recovery-result">
                      <span>Claimable under Coverage D:</span>
                      <span class="result-amount">Lesser of the two</span>
                    </div>
                  </div>
                  
                  <div class="total-recovery">
                    <strong>Realistic Total Recovery:</strong>
                    <span class="total-amount">$XXX,XXX</span>
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/coverage-alignment.html'">🎯 Generate Coverage Alignment Report</button>
                
                <div class="info-box" style="margin-top: 16px;">
                  <strong>This Sets Your Negotiation Target:</strong>
                  Your maximum claimable amount (after sublimits and limits) is your negotiation ceiling. Don't accept less than this minus reasonable depreciation.
                </div>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Filing for items the policy doesn't cover (wastes time and credibility)</li>
              <li>Missing coverage you're entitled to (ALE, code upgrades, debris removal)</li>
              <li>Getting blindsided by sublimits during negotiation</li>
              <li>Claiming in wrong coverage category (reducing available limits)</li>
              <li>Accepting settlement without knowing your maximum recovery</li>
            </ul>
          </div>

          <div class="step-completion">
            <h3 style="font-size: 16px; font-weight: 700; color: var(--navy-dark); margin-bottom: 16px;">Coverage Verification Checklist</h3>
            
            <div class="completion-checklist">
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Mapped all documented losses to correct coverage sections (A, B, C, D)</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Identified sublimits affecting recovery (jewelry, electronics, cash, etc.)</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Flagged potential exclusion disputes with counter-arguments prepared</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Calculated maximum claimable amount under policy limits</span>
              </div>
            </div>
            
            <div class="info-box" style="margin: 20px 0;">
              <strong>Before Moving to Step 7:</strong>
              Make sure you understand your policy limits, sublimits, and potential exclusion issues. This knowledge is critical for negotiation.
            </div>
            
            <button class="btn-complete-step" onclick="completeAndNext(6)">✓ Coverage Verified - Continue to Step 7</button>
          </div>
        `
      },
      7: {
        label: 'STEP 7 OF 13',
        title: 'Track Additional Living Expenses (ALE)',
        subtitle: 'Document all increased costs from being displaced and maximize your ALE recovery.',
        whatThisPrevents: 'This step prevents under-claiming by $10,000-$30,000+ because you didn\'t know what qualifies or lost receipts.',
        guardrail: 'Save EVERY receipt and log expenses daily—not monthly from memory. Credit card statements alone are not sufficient.',
        skipWarning: 'Without proper ALE tracking, you\'ll leave thousands on the table and risk denial for lack of documentation.',
        customContent: true,
        htmlContent: `
          <div class="value-statement">
            <strong>Why This Is Critical:</strong>
            ALE coverage pays the DIFFERENCE between your normal living costs and increased costs while displaced. Most policyholders severely under-claim because they don't know what qualifies. Hotel, meals, pet boarding, storage, increased commute—it all adds up to $10,000-$30,000+ that you're entitled to but most people leave on the table.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Understand What ALE Covers -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Understand What ALE Covers</h4>
                  <p>Know what you can claim vs what you can't</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">ALE pays for INCREASED costs while displaced—not your normal living expenses. Understanding the difference is key to maximizing recovery.</p>
                
                <div class="ale-coverage-lists">
                  <div class="coverage-yes">
                    <div class="coverage-list-header">
                      <span class="coverage-list-icon">✅</span>
                      <strong>What DOES Qualify as ALE</strong>
                    </div>
                    <ul class="coverage-items">
                      <li><strong>Temporary Housing:</strong> Hotel or rental costs (minus your normal mortgage/rent payment)</li>
                      <li><strong>Restaurant Meals:</strong> Eating out costs (minus your normal grocery budget)</li>
                      <li><strong>Increased Commute:</strong> Extra gas/tolls from temporary location to work</li>
                      <li><strong>Pet Boarding:</strong> Kennel or pet hotel if you can't keep pets at temporary housing</li>
                      <li><strong>Storage Unit:</strong> Storing belongings while home is uninhabitable</li>
                      <li><strong>Laundry/Dry Cleaning:</strong> If no access to your washer/dryer</li>
                      <li><strong>Increased Utilities:</strong> If temporary housing utilities exceed normal costs</li>
                      <li><strong>Displacement Phone Calls:</strong> Calls to contractors, adjusters, etc.</li>
                    </ul>
                  </div>
                  
                  <div class="coverage-no">
                    <div class="coverage-list-header">
                      <span class="coverage-list-icon">❌</span>
                      <strong>What Does NOT Qualify</strong>
                    </div>
                    <ul class="coverage-items">
                      <li><strong>Normal Living Expenses:</strong> Costs you'd pay anyway (your mortgage, normal groceries)</li>
                      <li><strong>Upgrades Beyond Normal:</strong> Luxury hotel when you normally live modestly</li>
                      <li><strong>Non-Displacement Costs:</strong> Vacation, entertainment unrelated to displacement</li>
                      <li><strong>Post-Habitability Expenses:</strong> Costs after home is livable again</li>
                    </ul>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>The Key Formula:</strong>
                  ALE Claim = Increased Costs - Normal Living Expenses. You must subtract what you would have spent anyway.
                </div>
              </div>
            </div>
            
            <!-- PHASE 2: Save Every Single Receipt -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>Save Every Single Receipt</h4>
                  <p>Documentation is everything for ALE claims</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Lack of receipts is the #1 reason ALE claims are denied or reduced. Follow these critical rules:</p>
                
                <div class="receipt-rules">
                  <div class="rule-item">
                    <span class="rule-icon">📸</span>
                    <div>
                      <strong>Keep Physical or Digital Receipts for EVERYTHING</strong>
                      <p>Take photos of paper receipts immediately (they fade). Store digitally in organized folders by month and category.</p>
                    </div>
                  </div>
                  
                  <div class="rule-item">
                    <span class="rule-icon">📋</span>
                    <div>
                      <strong>Credit Card Statements Are NOT Enough</strong>
                      <p>You need itemized receipts showing what you bought, not just credit card charges. "Restaurant - $45" doesn't prove it was a meal vs alcohol.</p>
                    </div>
                  </div>
                  
                  <div class="rule-item">
                    <span class="rule-icon">📅</span>
                    <div>
                      <strong>Log Expenses Daily (Not Monthly from Memory)</strong>
                      <p>Track expenses as they happen. Waiting until month-end means you'll forget things and lose receipts.</p>
                    </div>
                  </div>
                  
                  <div class="rule-item">
                    <span class="rule-icon">🏷️</span>
                    <div>
                      <strong>Categorize Each Expense</strong>
                      <p>Label as: Housing, Meals, Transportation, Storage, Pet Care, Laundry, Utilities, Other. Makes submission easier.</p>
                    </div>
                  </div>
                  
                  <div class="rule-item">
                    <span class="rule-icon">✍️</span>
                    <div>
                      <strong>Note WHY Each Expense Was Necessary</strong>
                      <p>Brief note: "Hotel - home uninhabitable due to water damage" or "Restaurant meals - no kitchen access at hotel"</p>
                    </div>
                  </div>
                </div>
                
                <div class="common-mistakes">
                  <strong>❌ Common Mistakes to Avoid:</strong>
                  <ul>
                    <li>Throwing away receipts (thinking you won't need them)</li>
                    <li>Not claiming "small" expenses (they add up to thousands!)</li>
                    <li>Waiting until end to compile (you'll forget 30-40% of expenses)</li>
                    <li>Not documenting WHY expense was necessary (insurer will question it)</li>
                  </ul>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/ale-tracker.html'">📊 Start ALE Expense Tracker</button>
              </div>
            </div>
            
            <!-- PHASE 3: Calculate Your ALE Entitlement -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Calculate Your ALE Entitlement</h4>
                  <p>Know your limit and calculate net claims</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Your policy has an ALE limit (typically $50,000-$100,000). Calculate your net claim by subtracting normal living expenses.</p>
                
                <div class="ale-calculation-example">
                  <div class="calc-header">
                    <strong>📊 Example Monthly ALE Calculation</strong>
                  </div>
                  
                  <div class="calc-section">
                    <div class="calc-category">
                      <strong>Temporary Housing (Hotel)</strong>
                    </div>
                    <div class="calc-line">
                      <span>Hotel cost: $150/night × 30 days</span>
                      <span class="calc-amount">$4,500</span>
                    </div>
                    <div class="calc-line subtract">
                      <span>Minus normal mortgage/rent</span>
                      <span class="calc-amount">-$2,000</span>
                    </div>
                    <div class="calc-result">
                      <span>Net ALE claim (Housing)</span>
                      <span class="calc-total">$2,500</span>
                    </div>
                  </div>
                  
                  <div class="calc-section">
                    <div class="calc-category">
                      <strong>Restaurant Meals</strong>
                    </div>
                    <div class="calc-line">
                      <span>Restaurant costs: $60/day × 30 days</span>
                      <span class="calc-amount">$1,800</span>
                    </div>
                    <div class="calc-line subtract">
                      <span>Minus normal grocery budget</span>
                      <span class="calc-amount">-$500</span>
                    </div>
                    <div class="calc-result">
                      <span>Net ALE claim (Meals)</span>
                      <span class="calc-total">$1,300</span>
                    </div>
                  </div>
                  
                  <div class="calc-section">
                    <div class="calc-category">
                      <strong>Other Displacement Costs</strong>
                    </div>
                    <div class="calc-line">
                      <span>Storage unit</span>
                      <span class="calc-amount">$200</span>
                    </div>
                    <div class="calc-line">
                      <span>Increased commute (gas)</span>
                      <span class="calc-amount">$150</span>
                    </div>
                    <div class="calc-line">
                      <span>Laundromat</span>
                      <span class="calc-amount">$80</span>
                    </div>
                    <div class="calc-result">
                      <span>Net ALE claim (Other)</span>
                      <span class="calc-total">$430</span>
                    </div>
                  </div>
                  
                  <div class="calc-grand-total">
                    <strong>Total Monthly ALE Claim:</strong>
                    <span class="grand-total-amount">$4,230</span>
                  </div>
                  
                  <div class="calc-projection">
                    <p><strong>If displaced 6 months:</strong> $4,230 × 6 = <span class="projection-total">$25,380 total ALE claim</span></p>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Your Policy Limit:</strong>
                  Check your policy declarations for ALE limit (Coverage D). Typical range: $50,000-$100,000. Track your running total to avoid hitting the limit.
                </div>
              </div>
            </div>
            
            <!-- PHASE 4: Submit ALE Claims Regularly -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">4</span>
                <div>
                  <h4>Submit ALE Claims Regularly</h4>
                  <p>Don't wait—submit monthly for faster reimbursement</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Submit ALE claims monthly (not at the end of displacement). This gets you reimbursed faster and creates a paper trail.</p>
                
                <div class="submission-strategy">
                  <div class="strategy-item">
                    <div class="strategy-header">
                      <span class="strategy-icon">📅</span>
                      <strong>When to Submit</strong>
                    </div>
                    <ul>
                      <li><strong>Monthly submissions recommended</strong> (don't wait until end of displacement)</li>
                      <li>Faster reimbursement (cash flow matters when displaced)</li>
                      <li>Prevents hitting policy time limits (some policies have time caps)</li>
                      <li>Creates paper trail showing ongoing displacement</li>
                    </ul>
                  </div>
                  
                  <div class="strategy-item">
                    <div class="strategy-header">
                      <span class="strategy-icon">📦</span>
                      <strong>What to Submit</strong>
                    </div>
                    <ul>
                      <li><strong>Organized receipts by category</strong> (Housing, Meals, Transportation, etc.)</li>
                      <li><strong>ALE expense log</strong> with dates, amounts, and descriptions</li>
                      <li><strong>Explanation of uninhabitability</strong> (why home remains unlivable)</li>
                      <li><strong>Request for reimbursement</strong> with total amount and calculation</li>
                    </ul>
                  </div>
                </div>
                
                <div class="submission-template">
                  <strong>Sample ALE Submission Cover Letter:</strong>
                  <div class="template-box">
                    <p><em>"Attached are receipts and documentation for Additional Living Expenses incurred from [start date] to [end date] while our home at [address] remains uninhabitable due to [damage type] from the loss on [date of loss].</em></p>
                    <p><em>Total ALE expenses for this period: $X,XXX</em><br>
                    <em>Minus normal living expenses: -$X,XXX</em><br>
                    <em>Net ALE claim: $X,XXX</em></p>
                    <p><em>The home remains uninhabitable due to [ongoing repairs/lack of utilities/structural damage]. Expected habitability date: [date or 'unknown'].</em></p>
                    <p><em>Please reimburse the net ALE amount of $X,XXX per policy Coverage D."</em></p>
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/expense-upload-tool.html'">📤 Submit ALE Receipts & Documentation</button>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Under-claiming by $10,000-$30,000+ because you didn't know what qualifies</li>
              <li>Denial for lack of receipts (most common ALE denial reason)</li>
              <li>Hitting policy limits because you waited too long to claim</li>
              <li>Missing reimbursement for legitimate displacement costs</li>
              <li>Insurer claiming expenses were "unreasonable" without documentation</li>
            </ul>
          </div>

          <div class="step-completion">
            <h3 style="font-size: 16px; font-weight: 700; color: var(--navy-dark); margin-bottom: 16px;">ALE Tracking Checklist</h3>
            
            <div class="completion-checklist">
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Understand what qualifies as ALE vs normal living expenses</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Saving all receipts (physical or digital) and logging expenses daily</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Calculated net ALE claim (increased costs minus normal expenses)</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Submitted first monthly ALE claim with organized receipts</span>
              </div>
            </div>
            
            <div class="info-box" style="margin: 20px 0;">
              <strong>This Step Remains Active:</strong>
              Continue tracking and submitting ALE expenses monthly throughout your displacement. Don't wait until the end!
            </div>
            
            <button class="btn-complete-step" onclick="completeAndNext(7)">✓ ALE Tracking Started - Continue to Step 8</button>
          </div>
        `
      },
      8: {
        label: 'STEP 8 OF 13',
        title: 'Finalize Your Contents Inventory with Complete Values',
        subtitle: 'Ensure every damaged item is listed, described in detail, and properly valued before claim submission.',
        whatThisPrevents: 'This step prevents leaving $20,000-$50,000+ on the table from forgotten or undervalued items and generic descriptions.',
        guardrail: 'Do not submit your contents claim until you\'ve completed room-by-room review, improved descriptions, and researched replacement costs.',
        skipWarning: 'Incomplete inventories with generic descriptions lose $20k-$50k+. You can\'t add items after settlement.',
        customContent: true,
        htmlContent: `
          <div class="value-statement">
            <strong>Why This Is Critical:</strong>
            This is where most claims lose money. Policyholders submit incomplete inventories with generic descriptions and guessed values. You've had time since Step 3 to remember items you forgot, find additional receipts, and properly value everything. A complete, detailed contents inventory can mean $20,000-$50,000+ more in your settlement.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Review & Complete Your Inventory -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Review & Complete Your Inventory</h4>
                  <p>Add items you forgot since Step 3</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">You've had time since Step 3 to remember forgotten items. Go through your home room-by-room again with fresh eyes.</p>
                
                <div class="whats-changed">
                  <strong>What's Changed Since Step 3:</strong>
                  <ul>
                    <li><strong>Items you forgot</strong> in the initial chaos and stress</li>
                    <li><strong>Damaged items you discovered later</strong> (hidden damage, delayed effects)</li>
                    <li><strong>Things you didn't think were covered</strong> (but actually are)</li>
                    <li><strong>Additional proof of ownership</strong> you found (old photos, receipts)</li>
                  </ul>
                </div>
                
                <div class="room-by-room-guide">
                  <strong>Go Room-by-Room Again:</strong>
                  
                  <div class="room-category">
                    <div class="room-header">
                      <span class="room-icon">🍳</span>
                      <strong>Kitchen</strong>
                    </div>
                    <p>Every appliance (microwave, toaster, blender), dishes, glassware, utensils, pots/pans, food items, spices, cleaning supplies</p>
                  </div>
                  
                  <div class="room-category">
                    <div class="room-header">
                      <span class="room-icon">🛏️</span>
                      <strong>Bedrooms</strong>
                    </div>
                    <p>All clothing (itemize each piece!), shoes, accessories, jewelry, furniture, bedding, decorations, electronics</p>
                  </div>
                  
                  <div class="room-category">
                    <div class="room-header">
                      <span class="room-icon">🚿</span>
                      <strong>Bathrooms</strong>
                    </div>
                    <p>Toiletries, cosmetics, medications, linens (towels, bath mats), cleaning supplies, hair tools</p>
                  </div>
                  
                  <div class="room-category">
                    <div class="room-header">
                      <span class="room-icon">🚗</span>
                      <strong>Garage/Storage</strong>
                    </div>
                    <p>Tools, lawn equipment, seasonal items, recreational gear, automotive supplies, paint/hardware</p>
                  </div>
                  
                  <div class="room-category">
                    <div class="room-header">
                      <span class="room-icon">📦</span>
                      <strong>Other Areas</strong>
                    </div>
                    <p>Basement, attic, closets, pantry, laundry room—don't skip any space!</p>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Don't Skip Small Items:</strong>
                  Small items add up to $10,000-$30,000+. Spices ($200), cleaning supplies ($300), toiletries ($400), office supplies ($200)—it all counts.
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/contents-inventory.html'">📋 Update Contents Inventory</button>
              </div>
            </div>
            
            <!-- PHASE 2: Improve Item Descriptions -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>Improve Item Descriptions</h4>
                  <p>Replace generic descriptions with specific details</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Generic descriptions get lowest value. Specific descriptions are harder to dispute and result in higher payouts.</p>
                
                <div class="description-examples">
                  <div class="example-pair">
                    <div class="bad-description">
                      <strong>❌ Bad Description:</strong>
                      <p class="example-text">"Couch - $500"</p>
                    </div>
                    <div class="good-description">
                      <strong>✓ Good Description:</strong>
                      <p class="example-text">"Gray fabric sectional sofa, L-shaped, 7-piece modular, Ashley Furniture Alenya Collection, purchased 2019 from Ashley HomeStore for $1,899, excellent condition before fire damage"</p>
                    </div>
                  </div>
                  
                  <div class="example-pair">
                    <div class="bad-description">
                      <strong>❌ Bad Description:</strong>
                      <p class="example-text">"Clothes - $2,000"</p>
                    </div>
                    <div class="good-description">
                      <strong>✓ Good Description - Itemize Every Piece:</strong>
                      <p class="example-text">
                        "Men's Levi's 501 jeans, size 34x32, purchased 2021, $59.99"<br>
                        "Nike Air Max shoes, size 10, purchased 2022, $120"<br>
                        "North Face jacket, black, size L, purchased 2020, $199"<br>
                        <em>(Continue for each item...)</em>
                      </p>
                    </div>
                  </div>
                  
                  <div class="example-pair">
                    <div class="bad-description">
                      <strong>❌ Bad Description:</strong>
                      <p class="example-text">"TV - $800"</p>
                    </div>
                    <div class="good-description">
                      <strong>✓ Good Description:</strong>
                      <p class="example-text">"Samsung 65-inch QLED 4K Smart TV, Model QN65Q80AAFXZA, purchased March 2021 from Best Buy for $1,299.99, excellent condition, living room"</p>
                    </div>
                  </div>
                </div>
                
                <div class="description-checklist">
                  <strong>For Each Item, Include:</strong>
                  <ul>
                    <li>✓ Brand/Manufacturer</li>
                    <li>✓ Model number (if applicable)</li>
                    <li>✓ Size, color, material</li>
                    <li>✓ Purchase date and location</li>
                    <li>✓ Original purchase price</li>
                    <li>✓ Condition before loss</li>
                    <li>✓ Room/location in home</li>
                  </ul>
                </div>
                
                <div class="info-box">
                  <strong>Why This Matters:</strong>
                  Adjuster sees "Couch - $500" and pays $500. Adjuster sees detailed Ashley Furniture sectional description with $1,899 purchase price and has to justify why they're paying less. Specificity = leverage.
                </div>
              </div>
            </div>
            
            <!-- PHASE 3: Properly Value Each Item -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Properly Value Each Item</h4>
                  <p>Research replacement costs and document pricing</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Don't guess values. Research actual current replacement costs and document your pricing sources.</p>
                
                <div class="valuation-guide">
                  <div class="valuation-type">
                    <div class="valuation-header">
                      <span class="valuation-icon">💰</span>
                      <strong>Replacement Cost Value (RCV)</strong>
                    </div>
                    <p><strong>What is it:</strong> What would it cost to buy the item NEW today?</p>
                    <p><strong>How to determine:</strong></p>
                    <ul>
                      <li>Check current prices on Amazon, retailers, manufacturer websites</li>
                      <li>Use actual retail prices (not sale/discount prices)</li>
                      <li>If exact model unavailable, use comparable current model</li>
                      <li>Screenshot or print current pricing as proof</li>
                    </ul>
                  </div>
                  
                  <div class="valuation-type">
                    <div class="valuation-header">
                      <span class="valuation-icon">📉</span>
                      <strong>Actual Cash Value (ACV)</strong>
                    </div>
                    <p><strong>What is it:</strong> RCV minus depreciation based on age and condition</p>
                    <p><strong>How to determine:</strong></p>
                    <ul>
                      <li>Start with RCV (replacement cost)</li>
                      <li>Apply depreciation based on item age and condition</li>
                      <li>Don't undervalue yourself—"excellent condition" depreciates less</li>
                      <li>Some items don't depreciate much (tools, furniture)</li>
                    </ul>
                  </div>
                </div>
                
                <div class="pricing-documentation">
                  <strong>Document Your Pricing:</strong>
                  <div class="documentation-steps">
                    <div class="doc-step">
                      <span class="doc-number">1</span>
                      <p><strong>Screenshot current retail prices</strong> from Amazon, Target, Home Depot, etc.</p>
                    </div>
                    <div class="doc-step">
                      <span class="doc-number">2</span>
                      <p><strong>Print or save web pages</strong> showing replacement cost with date</p>
                    </div>
                    <div class="doc-step">
                      <span class="doc-number">3</span>
                      <p><strong>Include in your evidence package</strong> to support your claimed values</p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Pro Tip:</strong>
                  If you have Replacement Cost coverage, you'll get ACV initially, then RCV-ACV (recoverable depreciation) after repairs are complete. Properly documenting RCV now maximizes your total recovery.
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/contents-valuation.html'">💵 Calculate Item Values</button>
              </div>
            </div>
            
            <!-- PHASE 4: Run Completeness Check -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">4</span>
                <div>
                  <h4>Run Completeness Check</h4>
                  <p>Identify missing rooms, categories, and items</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Use AI to identify gaps in your inventory before submission. Missing categories can cost $5,000-$15,000+ each.</p>
                
                <div class="completeness-checks">
                  <strong>AI Tool Identifies:</strong>
                  <ul>
                    <li>✓ Missing rooms (Did you forget basement? Attic? Storage shed?)</li>
                    <li>✓ Missing categories (Electronics? Sports equipment? Holiday decorations?)</li>
                    <li>✓ Items typically found but not listed (Comparison to similar homes)</li>
                    <li>✓ Expected vs actual contents value (Is your total too low?)</li>
                  </ul>
                </div>
                
                <div class="forgotten-items">
                  <strong>Commonly Forgotten Items (with typical values):</strong>
                  
                  <div class="forgotten-category">
                    <div class="forgotten-header">
                      <span class="forgotten-icon">🍕</span>
                      <strong>Food & Freezer Contents</strong>
                      <span class="forgotten-value">$500-$2,000</span>
                    </div>
                    <p>Pantry items, frozen food, refrigerator contents, spices, condiments</p>
                  </div>
                  
                  <div class="forgotten-category">
                    <div class="forgotten-header">
                      <span class="forgotten-icon">🔧</span>
                      <strong>Garage Items</strong>
                      <span class="forgotten-value">$5,000-$15,000</span>
                    </div>
                    <p>Tools, lawn equipment, automotive supplies, workbench, storage items</p>
                  </div>
                  
                  <div class="forgotten-category">
                    <div class="forgotten-header">
                      <span class="forgotten-icon">🎄</span>
                      <strong>Seasonal Decorations</strong>
                      <span class="forgotten-value">$500-$2,000</span>
                    </div>
                    <p>Christmas, Halloween, outdoor decorations, artificial trees, lights</p>
                  </div>
                  
                  <div class="forgotten-category">
                    <div class="forgotten-header">
                      <span class="forgotten-icon">🛠️</span>
                      <strong>Tools & Equipment</strong>
                      <span class="forgotten-value">$2,000-$10,000</span>
                    </div>
                    <p>Power tools, hand tools, ladders, equipment, tool boxes</p>
                  </div>
                  
                  <div class="forgotten-category">
                    <div class="forgotten-header">
                      <span class="forgotten-icon">🛏️</span>
                      <strong>Linens & Towels</strong>
                      <span class="forgotten-value">$500-$1,500</span>
                    </div>
                    <p>Bed sheets, blankets, comforters, pillows, bath towels, kitchen towels</p>
                  </div>
                  
                  <div class="forgotten-category">
                    <div class="forgotten-header">
                      <span class="forgotten-icon">🧹</span>
                      <strong>Cleaning & Household Items</strong>
                      <span class="forgotten-value">$300-$800</span>
                    </div>
                    <p>Cleaning supplies, paper products, light bulbs, batteries, household items</p>
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/category-coverage-checker.html'">🔍 Run Completeness Check</button>
                
                <div class="info-box" style="margin-top: 16px;">
                  <strong>Total Impact:</strong>
                  Adding these commonly forgotten categories can add $10,000-$30,000+ to your contents claim. Don't leave this money on the table!
                </div>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Leaving $20,000-$50,000+ on the table from forgotten or undervalued items</li>
              <li>Adjuster lowballing generic descriptions ("Couch - $500" gets $500)</li>
              <li>Missing entire categories of contents (garage, storage, seasonal items)</li>
              <li>Settling before inventory is complete (can't add items after settlement)</li>
              <li>Under-claiming because you didn't properly research replacement costs</li>
            </ul>
          </div>

          <div class="step-completion">
            <h3 style="font-size: 16px; font-weight: 700; color: var(--navy-dark); margin-bottom: 16px;">Contents Inventory Finalization Checklist</h3>
            
            <div class="completion-checklist">
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Completed room-by-room review and added forgotten items</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Improved descriptions with brand, model, size, purchase info for all items</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Researched and documented replacement costs with pricing screenshots</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Ran completeness check and added missing categories/items</span>
              </div>
            </div>
            
            <div class="info-box" style="margin: 20px 0;">
              <strong>Before Moving to Step 9:</strong>
              Your inventory should be complete with detailed descriptions and documented values. You cannot add items after settlement—this is your last chance!
            </div>
            
            <button class="btn-complete-step" onclick="completeAndNext(8)">✓ Contents Inventory Finalized - Continue to Step 9</button>
          </div>
        `
      },
      9: {
        label: 'STEP 9 OF 13',
        title: 'Understand ACV vs RCV and Your Payment Structure',
        subtitle: 'Learn how two-stage insurance payment works and how to recover your full depreciation holdback.',
        whatThisPrevents: 'This step prevents shock at receiving 40-50% less than expected and losing $10,000-$30,000+ depreciation holdback by not completing repairs.',
        guardrail: 'Do not spend your ACV payment on non-repair expenses. You must complete actual repairs to recover depreciation holdback.',
        skipWarning: 'Most policyholders lose $10,000-$30,000+ in depreciation holdback because they don\'t understand the two-stage payment system or miss the recovery deadline.',
        customContent: true,
        htmlContent: `
          <div class="value-statement">
            <strong>Why This Matters:</strong>
            Most policyholders are shocked when the first check is 40-50% less than expected. Insurance pays Actual Cash Value (ACV) first—replacement cost MINUS depreciation. You only get the depreciation "holdback" AFTER you complete repairs and submit receipts. Understanding this prevents cash flow problems and ensures you recover every dollar you're entitled to.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Understand ACV vs RCV -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Understand ACV vs RCV</h4>
                  <p>Learn the difference between initial payment and total recovery</p>
                </div>
              </div>
              
              <div class="phase-content">
                <div class="concept-explainer">
                  <div class="concept-box rcv-box">
                    <div class="concept-header">
                      <span class="concept-icon">💰</span>
                      <strong>Replacement Cost Value (RCV)</strong>
                    </div>
                    <p>Cost to replace/repair with NEW materials today. This is the TOTAL you're entitled to.</p>
                    <div class="concept-example">
                      <strong>Example:</strong> New roof costs $20,000 to install today = $20,000 RCV
                    </div>
                  </div>
                  
                  <div class="concept-box acv-box">
                    <div class="concept-header">
                      <span class="concept-icon">📉</span>
                      <strong>Actual Cash Value (ACV)</strong>
                    </div>
                    <p>RCV minus depreciation for age and wear. This is the INITIAL payment you'll receive (usually 50-70% of RCV).</p>
                    <div class="concept-example">
                      <strong>Example:</strong> $20,000 RCV - 50% depreciation (10-year-old roof) = $10,000 ACV
                    </div>
                  </div>
                  
                  <div class="concept-box holdback-box">
                    <div class="concept-header">
                      <span class="concept-icon">🔄</span>
                      <strong>Depreciation Holdback</strong>
                    </div>
                    <p>The difference between RCV and ACV. You recover this AFTER completing repairs and submitting proof.</p>
                    <div class="concept-example">
                      <strong>Example:</strong> $20,000 RCV - $10,000 ACV = $10,000 holdback (recovered after repairs)
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>The Two-Stage Payment System:</strong>
                  <ol style="padding-left: 20px; margin: 8px 0 0 0;">
                    <li style="margin-bottom: 8px;">Insurer pays ACV first (replacement cost MINUS depreciation)</li>
                    <li style="margin-bottom: 8px;">You complete actual repairs with contractors</li>
                    <li style="margin-bottom: 8px;">You submit repair receipts and completion documentation</li>
                    <li style="margin-bottom: 8px;">Insurer pays depreciation holdback (recovering full RCV)</li>
                  </ol>
                </div>
              </div>
            </div>
            
            <!-- PHASE 2: Calculate Your Expected Payments -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>Calculate Your Expected Payments</h4>
                  <p>Know exactly what to expect in your first check vs holdback recovery</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Use the Contents Valuation Tool to calculate RCV, depreciation, ACV, and holdback amounts for all your documented items.</p>
                
                <div class="payment-breakdown">
                  <div class="breakdown-item total-rcv">
                    <div class="breakdown-label">Total RCV</div>
                    <div class="breakdown-amount">$XX,XXX</div>
                    <div class="breakdown-desc">Full replacement cost - what you're entitled to</div>
                  </div>
                  
                  <div class="breakdown-operator">−</div>
                  
                  <div class="breakdown-item depreciation">
                    <div class="breakdown-label">Total Depreciation</div>
                    <div class="breakdown-amount">$XX,XXX</div>
                    <div class="breakdown-desc">Amount withheld initially based on age/wear</div>
                  </div>
                  
                  <div class="breakdown-operator">=</div>
                  
                  <div class="breakdown-item initial-acv">
                    <div class="breakdown-label">Initial ACV Payment</div>
                    <div class="breakdown-amount">$XX,XXX</div>
                    <div class="breakdown-desc">← EXPECT THIS CHECK FIRST</div>
                  </div>
                  
                  <div class="breakdown-note">
                    <strong>Then after repairs:</strong>
                  </div>
                  
                  <div class="breakdown-item holdback-recovery">
                    <div class="breakdown-label">Depreciation Holdback Recovery</div>
                    <div class="breakdown-amount">$XX,XXX</div>
                    <div class="breakdown-desc">← SUBMIT RECEIPTS TO RECOVER THIS</div>
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="calculateACVRCV()">🧮 Calculate My ACV/RCV Breakdown</button>
              </div>
            </div>
            
            <!-- PHASE 3: Understand Holdback Recovery Process -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Recover Your Depreciation Holdback</h4>
                  <p>Complete repairs and submit documentation to get your money back</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">To recover your depreciation holdback (often $10,000-$30,000+), you MUST complete actual repairs and submit proof within the policy deadline.</p>
                
                <div class="recovery-steps">
                  <div class="recovery-step">
                    <div class="step-number-circle">1</div>
                    <div>
                      <strong>Complete the Actual Repairs</strong>
                      <p>Hire licensed contractors and complete repairs to original or better condition. Emergency mitigation doesn't count—actual reconstruction required.</p>
                    </div>
                  </div>
                  
                  <div class="recovery-step">
                    <div class="step-number-circle">2</div>
                    <div>
                      <strong>Save ALL Contractor Invoices & Receipts</strong>
                      <p>Itemized invoices showing work performed, materials used, labor costs, dates of service. Keep originals and copies.</p>
                    </div>
                  </div>
                  
                  <div class="recovery-step">
                    <div class="step-number-circle">3</div>
                    <div>
                      <strong>Document Completion with Photos</strong>
                      <p>Before/after photos showing repairs completed. Multiple angles of finished work.</p>
                    </div>
                  </div>
                  
                  <div class="recovery-step">
                    <div class="step-number-circle">4</div>
                    <div>
                      <strong>Submit Depreciation Recovery Claim</strong>
                      <p>Upload invoices, receipts, completion photos, and completion certificate to insurer within policy deadline (typically 180-365 days).</p>
                    </div>
                  </div>
                  
                  <div class="recovery-step">
                    <div class="step-number-circle">5</div>
                    <div>
                      <strong>Insurer Reviews & Issues Holdback Check</strong>
                      <p>Insurer verifies work completion and issues depreciation holdback payment. You've now recovered full RCV.</p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>⚠️ CRITICAL WARNING:</strong>
                  <p style="margin: 8px 0 0 0;">If you DON'T complete repairs within the policy timeframe (typically 180-365 days), you LOSE the depreciation holdback permanently—often $10,000-$30,000+. Many policyholders never recover this money because they don't complete repairs or miss the deadline. Check your policy for the exact deadline.</p>
                </div>
              </div>
            </div>
            
            <!-- PHASE 4: Plan Your Cash Flow -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">4</span>
                <div>
                  <h4>Plan Your Cash Flow & Repair Financing</h4>
                  <p>Bridge the gap between ACV payment and full repair cost</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">The ACV payment is often NOT enough to complete full repairs. You need to bridge the gap until you recover the depreciation holdback.</p>
                
                <div class="cash-flow-reality">
                  <div class="reality-section">
                    <strong>Initial ACV Payment Covers:</strong>
                    <ul style="margin: 8px 0 0 0; padding-left: 20px;">
                      <li>Your deductible</li>
                      <li>Emergency mitigation costs</li>
                      <li>Partial contractor deposit</li>
                      <li><strong>BUT:</strong> Usually NOT enough for full repairs</li>
                    </ul>
                  </div>
                  
                  <div class="reality-section">
                    <strong>You Need Additional Cash For:</strong>
                    <ul style="margin: 8px 0 0 0; padding-left: 20px;">
                      <li>Gap between ACV and full repair cost</li>
                      <li>Contractor payments during construction</li>
                      <li>Materials and labor costs</li>
                      <li>Recovered LATER via depreciation holdback</li>
                    </ul>
                  </div>
                </div>
                
                <div class="financing-options">
                  <strong style="display: block; margin-bottom: 12px; font-size: 15px; color: var(--navy-dark);">Financing Options to Bridge the Gap:</strong>
                  
                  <div class="financing-option">
                    <span class="option-icon">💰</span>
                    <div>
                      <strong>Personal Savings/Emergency Fund</strong>
                      <p>Lowest cost option - use savings to front repair costs, recover holdback later</p>
                    </div>
                  </div>
                  
                  <div class="financing-option">
                    <span class="option-icon">🏠</span>
                    <div>
                      <strong>Home Equity Line of Credit (HELOC)</strong>
                      <p>Borrow against home equity, repay with depreciation holdback</p>
                    </div>
                  </div>
                  
                  <div class="financing-option">
                    <span class="option-icon">🔨</span>
                    <div>
                      <strong>Contractor Payment Plans</strong>
                      <p>Some contractors offer payment schedules aligned with insurance payments</p>
                    </div>
                  </div>
                  
                  <div class="financing-option">
                    <span class="option-icon">💳</span>
                    <div>
                      <strong>Credit Cards</strong>
                      <p>Short-term option (high interest) - pay off when holdback arrives</p>
                    </div>
                  </div>
                  
                  <div class="financing-option">
                    <span class="option-icon">👨‍👩‍👧</span>
                    <div>
                      <strong>Family Loans</strong>
                      <p>Borrow from family, repay when depreciation holdback is recovered</p>
                    </div>
                  </div>
                  
                  <div class="financing-option">
                    <span class="option-icon">🏛️</span>
                    <div>
                      <strong>SBA Disaster Loans</strong>
                      <p>If disaster is federally declared, low-interest loans available</p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>DO NOT:</strong>
                  <p style="margin: 8px 0 0 0;">Spend your ACV payment on non-repair expenses (debt, vacation, etc.) and skip repairs.</p>
                  <strong style="display: block; margin-top: 8px;">RESULT:</strong>
                  <p style="margin: 4px 0 0 0;">You forfeit $10,000-$30,000+ depreciation holdback permanently and your home remains damaged.</p>
                </div>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Shock when first check is 40-50% less than you expected</li>
              <li>Losing $10,000-$30,000+ holdback by not completing repairs within deadline</li>
              <li>Cash flow crisis during reconstruction because you didn't plan for the gap</li>
              <li>Missing depreciation recovery deadline and forfeiting money forever</li>
              <li>Spending ACV payment on non-repairs and never completing work</li>
              <li>Not financially planning for the holdback recovery process</li>
            </ul>
          </div>

          <div class="step-completion">
            <h3 style="font-size: 16px; font-weight: 700; color: var(--navy-dark); margin-bottom: 16px;">ACV/RCV Understanding Checklist</h3>
            
            <div class="completion-checklist">
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Understand difference between ACV and RCV</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Calculated expected ACV payment and holdback amounts</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Know the depreciation holdback recovery process</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Identified policy deadline for depreciation recovery</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Have financing plan to bridge gap until holdback recovery</span>
              </div>
            </div>
            
            <div class="info-box" style="margin: 20px 0;">
              <strong>Before Moving to Step 10:</strong>
              Make sure you understand the two-stage payment system and have a plan to complete repairs within the depreciation recovery deadline. Missing this deadline forfeits thousands of dollars permanently.
            </div>
            
            <button class="btn-complete-step" onclick="completeAndNext(9)">✓ Understand Payment Structure - Continue to Step 10</button>
          </div>
        `
      },
      10: {
        label: 'STEP 10 OF 13',
        title: 'Review the Settlement Offer & Identify Underpayment',
        subtitle: 'Compare the insurer\'s offer to your documented losses and calculate where you\'re being shorted.',
        whatThisPrevents: 'This step prevents accepting lowball offers and missing $10,000-$50,000+ in legitimate losses they excluded or undervalued.',
        guardrail: 'Do not sign any release or settlement agreement until you have thoroughly compared their offer to your complete documentation.',
        skipWarning: 'Most policyholders accept the first offer without comparison and lose $15,000-$40,000+ they were legitimately entitled to.',
        customContent: true,
        htmlContent: `
          <div class="value-statement">
            <strong>Why This Is Critical:</strong>
            The insurer's first offer is almost always low. They're counting on you accepting without comparison. This step systematically compares their offer against your complete documentation (Steps 3-9) to identify exactly where and by how much they're underpaying. This becomes your negotiation ammunition for Step 11.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Receive & Review Settlement Offer -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Receive & Review the Settlement Offer Letter</h4>
                  <p>Understand what they're offering and what should be included</p>
                </div>
              </div>
              
              <div class="phase-content">
                <div class="offer-expectations">
                  <div class="expectation-section">
                    <strong>What to Expect:</strong>
                    <ul style="margin: 8px 0 0 0; padding-left: 20px;">
                      <li>Formal written offer letter (typically 7-14 days after claim submission)</li>
                      <li>Total settlement amount offered</li>
                      <li>Breakdown by coverage type (dwelling, contents, ALE)</li>
                      <li>Payment timeline and conditions</li>
                      <li>May include release forms or settlement agreement</li>
                    </ul>
                  </div>
                  
                  <div class="expectation-section red-flags">
                    <strong>🚩 Red Flags:</strong>
                    <ul style="margin: 8px 0 0 0; padding-left: 20px;">
                      <li>Vague lump sum with no itemized breakdown</li>
                      <li>Extremely low offer with no explanation</li>
                      <li>Immediate pressure to accept and sign release quickly</li>
                      <li>Missing coverage categories you documented and claimed</li>
                      <li>Generic denial reasons without specific policy citations</li>
                    </ul>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>What if No Offer Arrives?</strong>
                  <p style="margin: 8px 0 0 0;">Contact your adjuster after 14 days to request written settlement offer. Document the delay in your claim diary. Some states have prompt payment laws requiring timely offers (check Step 1 policy analysis for your state's requirements).</p>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/photo-upload-organizer.html'">📤 Upload Settlement Offer Letter</button>
              </div>
            </div>
            
            <!-- PHASE 2: Compare Offer to Documentation -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>Compare Offer to Your Documented Losses</h4>
                  <p>Line-by-line comparison to identify shortfall</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Upload both your complete claim documentation and their settlement offer for AI-powered comparison analysis.</p>
                
                <div class="comparison-grid">
                  <div class="comparison-header">
                    <div class="header-col">Coverage Category</div>
                    <div class="header-col">Their Offer</div>
                    <div class="header-col">Your Documentation</div>
                    <div class="header-col">Shortfall</div>
                  </div>
                  
                  <div class="comparison-row">
                    <div class="row-label">Dwelling Repairs</div>
                    <div class="row-value offer-value">$XX,XXX</div>
                    <div class="row-value your-value">$XX,XXX</div>
                    <div class="row-value shortfall-value">-$X,XXX</div>
                  </div>
                  
                  <div class="comparison-row">
                    <div class="row-label">Contents Losses</div>
                    <div class="row-value offer-value">$XX,XXX</div>
                    <div class="row-value your-value">$XX,XXX</div>
                    <div class="row-value shortfall-value">-$X,XXX</div>
                  </div>
                  
                  <div class="comparison-row">
                    <div class="row-label">ALE Expenses</div>
                    <div class="row-value offer-value">$XX,XXX</div>
                    <div class="row-value your-value">$XX,XXX</div>
                    <div class="row-value shortfall-value">-$X,XXX</div>
                  </div>
                  
                  <div class="comparison-row total-row">
                    <div class="row-label"><strong>TOTAL</strong></div>
                    <div class="row-value offer-value"><strong>$XX,XXX</strong></div>
                    <div class="row-value your-value"><strong>$XX,XXX</strong></div>
                    <div class="row-value shortfall-value"><strong>-$XX,XXX</strong></div>
                  </div>
                </div>
                
                <div class="shortfall-summary">
                  <div class="summary-label">Total Underpayment:</div>
                  <div class="summary-amount">$XX,XXX</div>
                  <div class="summary-percentage">(XX% below documented losses)</div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/estimate-comparison.html'">📊 Generate Underpayment Analysis Report</button>
              </div>
            </div>
            
            <!-- PHASE 3: Identify Specific Underpayment Categories -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Identify Specific Underpayment Tactics</h4>
                  <p>Understand HOW they're shorting you</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Insurance companies use predictable tactics to reduce payouts. Identify which ones they're using on your claim.</p>
                
                <div class="tactic-categories">
                  <div class="tactic-card">
                    <div class="tactic-header">
                      <span class="tactic-icon">❌</span>
                      <strong>Missing Items Entirely</strong>
                    </div>
                    <div class="tactic-content">
                      <p>Items you documented but they didn't include in their offer.</p>
                      <div class="tactic-examples">
                        <strong>Examples:</strong>
                        <ul>
                          <li>Entire rooms they "forgot" (garage, basement)</li>
                          <li>Secondary damage they ignored (mold, water stains)</li>
                          <li>Personal property categories they excluded</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  
                  <div class="tactic-card">
                    <div class="tactic-header">
                      <span class="tactic-icon">📉</span>
                      <strong>Undervalued Items</strong>
                    </div>
                    <div class="tactic-content">
                      <p>Generic valuations ignoring your specific proof of value.</p>
                      <div class="tactic-examples">
                        <strong>Examples:</strong>
                        <ul>
                          <li>Ignoring your receipts showing actual cost</li>
                          <li>Using "average" values vs your documented items</li>
                          <li>Excessive depreciation (70% on 5-year-old items)</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  
                  <div class="tactic-card">
                    <div class="tactic-header">
                      <span class="tactic-icon">🔧</span>
                      <strong>Scope Gaps</strong>
                    </div>
                    <div class="tactic-content">
                      <p>Necessary repair work they excluded from their estimate.</p>
                      <div class="tactic-examples">
                        <strong>Examples:</strong>
                        <ul>
                          <li>Code upgrade requirements they won't cover</li>
                          <li>Matching/blending work (partial roof vs full roof)</li>
                          <li>Consequential damage from covered peril</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  
                  <div class="tactic-card">
                    <div class="tactic-header">
                      <span class="tactic-icon">💰</span>
                      <strong>Lowball Pricing</strong>
                    </div>
                    <div class="tactic-content">
                      <p>Using below-market rates that no contractor will honor.</p>
                      <div class="tactic-examples">
                        <strong>Examples:</strong>
                        <ul>
                          <li>Their $50/sq ft vs market $75/sq ft</li>
                          <li>Outdated pricing from 2-3 years ago</li>
                          <li>Cheapest materials vs policy "like kind and quality"</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- PHASE 4: Calculate Total Underpayment -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">4</span>
                <div>
                  <h4>Calculate Your Negotiation Target</h4>
                  <p>Know exactly how much more you should demand</p>
                </div>
              </div>
              
              <div class="phase-content">
                <div class="negotiation-calculator">
                  <div class="calc-row">
                    <div class="calc-label">Your Documented Claim Total:</div>
                    <div class="calc-value documented">$XX,XXX</div>
                  </div>
                  
                  <div class="calc-operator">−</div>
                  
                  <div class="calc-row">
                    <div class="calc-label">Their Settlement Offer:</div>
                    <div class="calc-value offer">$XX,XXX</div>
                  </div>
                  
                  <div class="calc-operator">=</div>
                  
                  <div class="calc-row total">
                    <div class="calc-label"><strong>Total Underpayment:</strong></div>
                    <div class="calc-value underpayment"><strong>$XX,XXX</strong></div>
                  </div>
                  
                  <div class="calc-percentage">
                    They're offering <span id="shortPercentage">XX%</span> less than your documented losses
                  </div>
                </div>
                
                <div class="category-breakdown">
                  <strong style="display: block; margin-bottom: 12px; font-size: 15px; color: var(--navy-dark);">Breakdown by Coverage Category:</strong>
                  
                  <div class="breakdown-item">
                    <div class="breakdown-label">Dwelling:</div>
                    <div class="breakdown-short">Short by $X,XXX</div>
                  </div>
                  
                  <div class="breakdown-item">
                    <div class="breakdown-label">Contents:</div>
                    <div class="breakdown-short">Short by $X,XXX</div>
                  </div>
                  
                  <div class="breakdown-item">
                    <div class="breakdown-label">ALE:</div>
                    <div class="breakdown-short">Short by $X,XXX</div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>This Is Your Negotiation Target for Step 11:</strong>
                  <p style="margin: 8px 0 0 0;">You now have specific dollar amounts and percentage shortfall to justify your counter-offer. Document every discrepancy, prepare evidence for each item, and be ready to negotiate category by category.</p>
                </div>
              </div>
            </div>
            
            <!-- PHASE 5: Document Their Justifications -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">5</span>
                <div>
                  <h4>Prepare Counter-Arguments</h4>
                  <p>Anticipate their defenses and build your response</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Review their explanation for the low offer and prepare evidence-based counter-arguments for Step 11 negotiation.</p>
                
                <div class="counter-prep">
                  <div class="prep-section">
                    <strong>What Exclusions Did They Claim?</strong>
                    <div class="prep-action">
                      → Review policy language showing coverage applies<br>
                      → Cite Step 1 Policy Analysis that contradicts their position<br>
                      → Reference case law or state regulations if needed
                    </div>
                  </div>
                  
                  <div class="prep-section">
                    <strong>What Depreciation Did They Apply?</strong>
                    <div class="prep-action">
                      → Show depreciation exceeds industry standards<br>
                      → Prove items were in better condition than they claimed<br>
                      → Challenge depreciation on non-depreciable items (land, permits, etc.)
                    </div>
                  </div>
                  
                  <div class="prep-section">
                    <strong>What Scope Did They Reduce?</strong>
                    <div class="prep-action">
                      → Your contractor estimate shows necessary work<br>
                      → Code requirements mandate certain repairs<br>
                      → Policy requires "complete repair" not partial fixes
                    </div>
                  </div>
                  
                  <div class="prep-section">
                    <strong>What Documentation Did They Call "Insufficient"?</strong>
                    <div class="prep-action">
                      → Re-submit with additional proof<br>
                      → Challenge vague "insufficient" claims with specific policy requirements<br>
                      → Cite your comprehensive documentation from Steps 3-9
                    </div>
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/response-letter-generator.html'">✍️ Generate Rebuttal Arguments</button>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Accepting lowball offer without comparison to your documentation</li>
              <li>Missing $10,000-$50,000+ in legitimate losses they excluded or undervalued</li>
              <li>Signing release without realizing you're being shorted by 30-50%</li>
              <li>Negotiating blindly without knowing exact underpayment amounts</li>
              <li>Losing leverage by not documenting their specific errors and tactics</li>
              <li>Settling for inadequate amount that won't cover actual repairs</li>
            </ul>
          </div>

          <div class="step-completion">
            <h3 style="font-size: 16px; font-weight: 700; color: var(--navy-dark); margin-bottom: 16px;">Settlement Review Checklist</h3>
            
            <div class="completion-checklist">
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Received and reviewed written settlement offer</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Compared offer line-by-line to documented losses</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Identified specific underpayment tactics they're using</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Calculated total shortfall and negotiation target</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Prepared counter-arguments with supporting evidence</span>
              </div>
            </div>
            
            <div class="info-box" style="margin: 20px 0;">
              <strong>Before Moving to Step 11:</strong>
              Do NOT sign any settlement release or agreement. You have specific dollar amounts and evidence to negotiate a higher settlement in Step 11. Their first offer is almost never their best offer.
            </div>
            
            <button class="btn-complete-step" onclick="completeAndNext(10)">✓ Offer Analyzed - Ready to Negotiate (Step 11)</button>
          </div>
        `
      },
      11: {
        label: 'STEP 11 OF 13',
        title: 'Negotiate the Settlement Amount',
        subtitle: 'Use your documented evidence and underpayment analysis to negotiate a fair settlement.',
        whatThisPrevents: 'This step prevents accepting lowball offers and ensures you recover $15,000-$40,000+ more through strategic negotiation.',
        guardrail: 'Do not threaten litigation or use emotional language. Negotiate professionally with facts, evidence, and policy citations.',
        skipWarning: 'Most policyholders who don\'t negotiate leave $15,000-$40,000+ on the table by accepting the first offer without counter-offering.',
        customContent: true,
        htmlContent: `
          <div class="value-statement">
            <strong>Why This Is Critical:</strong>
            Armed with Step 10's underpayment analysis, you now have leverage. Insurance companies expect negotiation—their first offer is intentionally low. This step teaches you how to counter-offer with evidence, escalate when needed, and negotiate strategically to recover the full amount you're entitled to. Most policyholders who negotiate properly recover $15,000-$40,000+ more than the initial offer.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Prepare Your Counter-Offer -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Prepare Your Counter-Offer</h4>
                  <p>Build your negotiation position with evidence</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Don't just ask for more money—PROVE why more is owed with specific documentation and policy support.</p>
                
                <div class="negotiation-position">
                  <div class="position-row">
                    <div class="position-label">Your Documented Total:</div>
                    <div class="position-value documented">$XX,XXX</div>
                    <div class="position-source">(from Steps 3-9)</div>
                  </div>
                  
                  <div class="position-row">
                    <div class="position-label">Their Initial Offer:</div>
                    <div class="position-value offer">$XX,XXX</div>
                    <div class="position-source">(from Step 10)</div>
                  </div>
                  
                  <div class="position-row highlight">
                    <div class="position-label"><strong>Your Counter-Offer:</strong></div>
                    <div class="position-value counter"><strong>$XX,XXX</strong></div>
                    <div class="position-source">(justified by evidence)</div>
                  </div>
                </div>
                
                <div class="counter-offer-checklist">
                  <strong style="display: block; margin-bottom: 12px; font-size: 15px; color: var(--navy-dark);">What to Include in Your Counter-Offer:</strong>
                  
                  <div class="checklist-item">
                    <span class="check-icon">✓</span>
                    <div>
                      <strong>Specific Line-Item Disputes</strong>
                      <p>Don't say "I need more money" - say "Your dwelling estimate is $15,000 short because you excluded X, Y, Z items documented in my contractor estimate"</p>
                    </div>
                  </div>
                  
                  <div class="checklist-item">
                    <span class="check-icon">✓</span>
                    <div>
                      <strong>Contractor Estimates</strong>
                      <p>Include licensed contractor estimates showing actual market costs vs their below-market pricing</p>
                    </div>
                  </div>
                  
                  <div class="checklist-item">
                    <span class="check-icon">✓</span>
                    <div>
                      <strong>Policy Language Support</strong>
                      <p>Cite specific policy sections that mandate coverage for disputed items</p>
                    </div>
                  </div>
                  
                  <div class="checklist-item">
                    <span class="check-icon">✓</span>
                    <div>
                      <strong>State Law Violations (if applicable)</strong>
                      <p>Reference prompt payment laws, claim handling regulations, or bad faith statutes</p>
                    </div>
                  </div>
                  
                  <div class="checklist-item">
                    <span class="check-icon">✓</span>
                    <div>
                      <strong>Evidence They're Ignoring</strong>
                      <p>Highlight photos, receipts, or documentation they didn't address in their offer</p>
                    </div>
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/negotiation-language-generator.html'">✍️ Generate Counter-Offer Letter</button>
              </div>
            </div>
            
            <!-- PHASE 2: Deliver Counter-Offer in Writing -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>Deliver Your Counter-Offer in Writing</h4>
                  <p>Professional communication with evidence and deadlines</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Always negotiate in writing. Verbal conversations don't create legal records and allow insurers to misrepresent what was said.</p>
                
                <div class="communication-rules">
                  <div class="rule-item">
                    <span class="rule-icon">📧</span>
                    <div>
                      <strong>Always in Writing</strong>
                      <p>Email to adjuster + certified mail to claims department</p>
                    </div>
                  </div>
                  
                  <div class="rule-item">
                    <span class="rule-icon">🎯</span>
                    <div>
                      <strong>Professional Tone</strong>
                      <p>No emotion, anger, or threats. Just facts, evidence, and policy citations.</p>
                    </div>
                  </div>
                  
                  <div class="rule-item">
                    <span class="rule-icon">📋</span>
                    <div>
                      <strong>Cite Specific Policy Sections</strong>
                      <p>"Per policy Section 4.2, dwelling coverage includes code upgrades required by law..."</p>
                    </div>
                  </div>
                  
                  <div class="rule-item">
                    <span class="rule-icon">⚖️</span>
                    <div>
                      <strong>Reference State Regulations</strong>
                      <p>"Under [State] Insurance Code §XXX, insurers must pay fair market value for repairs..."</p>
                    </div>
                  </div>
                  
                  <div class="rule-item">
                    <span class="rule-icon">📎</span>
                    <div>
                      <strong>Include New Evidence</strong>
                      <p>Attach documents they haven't seen: additional contractor bids, expert opinions, comparable pricing</p>
                    </div>
                  </div>
                  
                  <div class="rule-item">
                    <span class="rule-icon">⏰</span>
                    <div>
                      <strong>Set Response Deadline</strong>
                      <p>"Please provide your revised offer within 14 days of receipt of this letter."</p>
                    </div>
                  </div>
                </div>
                
                <div class="sample-language">
                  <strong style="display: block; margin-bottom: 8px; font-size: 14px; color: var(--navy-dark);">Sample Counter-Offer Language:</strong>
                  <div class="language-box">Based on my comprehensive documentation and independent contractor estimates, your settlement offer of $XX,XXX is inadequate to cover my documented losses totaling $XX,XXX. Specifically:

1. Your dwelling estimate excludes [specific items] documented in my contractor estimate, resulting in a $X,XXX shortfall.
2. Your contents valuation ignores receipts I provided showing actual purchase prices, undervaluing items by $X,XXX.
3. Your depreciation calculations exceed industry standards and policy provisions.

Enclosed please find [list attachments]. I request a revised offer of $XX,XXX within 14 days.</div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/response-letter-generator.html'">📤 Send Counter-Offer Letter</button>
              </div>
            </div>
            
            <!-- PHASE 3: Handle Response & Continue Negotiating -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Handle Their Response & Continue Negotiating</h4>
                  <p>Navigate back-and-forth until reaching fair settlement</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Expect multiple rounds of negotiation. Each exchange, focus on your top 3-5 biggest gaps and provide additional evidence.</p>
                
                <div class="response-scenarios">
                  <div class="scenario-card">
                    <div class="scenario-header">
                      <strong>They Counter with Slightly Higher Offer (Still Low)</strong>
                    </div>
                    <div class="scenario-content">
                      <p class="scenario-action"><strong>Your Response:</strong></p>
                      <p>Acknowledge improvement but cite remaining gaps: "While I appreciate the increase to $XX,XXX, this still doesn't address the following documented items totaling $X,XXX..."</p>
                    </div>
                  </div>
                  
                  <div class="scenario-card">
                    <div class="scenario-header">
                      <strong>They Request Additional Documentation</strong>
                    </div>
                    <div class="scenario-content">
                      <p class="scenario-action"><strong>Your Response:</strong></p>
                      <p>Provide requested docs promptly but challenge if request is unreasonable: "I'm providing the requested invoices. However, my policy does not require [excessive documentation]. Please advise if my previous submission is sufficient for items X, Y, Z."</p>
                    </div>
                  </div>
                  
                  <div class="scenario-card">
                    <div class="scenario-header">
                      <strong>They Deny Specific Items</strong>
                    </div>
                    <div class="scenario-content">
                      <p class="scenario-action"><strong>Your Response:</strong></p>
                      <p>Request written explanation citing policy exclusion: "Please provide written explanation citing specific policy language that excludes [item]. My policy analysis indicates coverage under Section X."</p>
                    </div>
                  </div>
                  
                  <div class="scenario-card">
                    <div class="scenario-header">
                      <strong>They Propose Lowball Compromise</strong>
                    </div>
                    <div class="scenario-content">
                      <p class="scenario-action"><strong>Your Response:</strong></p>
                      <p>"I'm willing to negotiate in good faith, but your offer of $XX,XXX represents only X% of documented losses. I propose $XX,XXX based on the following evidence..."</p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Negotiation Timeline:</strong>
                  <p style="margin: 8px 0 0 0;">Typical negotiation takes 2-4 rounds over 30-60 days. Keep detailed negotiation log with dates, offers, and responses. Document every exchange for potential bad faith claim later.</p>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/carrier-request-logger.html'">📊 Track Negotiation Progress</button>
              </div>
            </div>
            
            <!-- PHASE 4: Escalate When Needed -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">4</span>
                <div>
                  <h4>Escalate When Negotiation Stalls</h4>
                  <p>Use strategic escalation tactics to break deadlocks</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">If negotiation stalls after 2-3 rounds, escalate progressively to increase pressure on the insurer.</p>
                
                <div class="escalation-ladder">
                  <div class="escalation-level level-1">
                    <div class="level-header">
                      <span class="level-number">LEVEL 1</span>
                      <strong>Request Supervisor Review</strong>
                    </div>
                    <div class="level-content">
                      <p><strong>When to use:</strong> Adjuster is unresponsive or unreasonable after 2-3 exchanges</p>
                      <p><strong>Language:</strong> "Given the significant discrepancies and policy interpretation disputes, I request your claims manager review this file. Please provide their contact information."</p>
                      <p><strong>Expected outcome:</strong> Manager may override adjuster with better offer</p>
                    </div>
                  </div>
                  
                  <div class="escalation-level level-2">
                    <div class="level-header">
                      <span class="level-number">LEVEL 2</span>
                      <strong>Invoke Appraisal Clause</strong>
                    </div>
                    <div class="level-content">
                      <p><strong>When to use:</strong> Dispute is primarily about valuation amounts, not coverage</p>
                      <p><strong>Language:</strong> "Per policy Section X.X, I invoke the appraisal process to resolve the valuation dispute regarding [items]. Please provide your appraiser's contact information within 10 days."</p>
                      <p><strong>Expected outcome:</strong> Neutral third-party determines value; binding resolution</p>
                    </div>
                  </div>
                  
                  <div class="escalation-level level-3">
                    <div class="level-header">
                      <span class="level-number">LEVEL 3</span>
                      <strong>File DOI Complaint</strong>
                    </div>
                    <div class="level-content">
                      <p><strong>When to use:</strong> Insurer violating state claim handling laws or acting in bad faith</p>
                      <p><strong>Document:</strong> Unreasonable delay, improper denials, failure to investigate, policy violations</p>
                      <p><strong>Expected outcome:</strong> State regulator investigates; insurer often settles to avoid penalties</p>
                      <button class="btn-escalation" onclick="window.location.href='app/tools/compliance-review.html'">📋 File DOI Complaint</button>
                    </div>
                  </div>
                  
                  <div class="escalation-level level-4">
                    <div class="level-header">
                      <span class="level-number">LEVEL 4</span>
                      <strong>Attorney Demand Letter</strong>
                    </div>
                    <div class="level-content">
                      <p><strong>When to use:</strong> Gap is $20,000+ and insurer won't negotiate reasonably</p>
                      <p><strong>Cost:</strong> $500-$2,000 for demand letter (no contingency commitment yet)</p>
                      <p><strong>Expected outcome:</strong> Attorney letter often recovers $20,000-$50,000+ additional settlement</p>
                      <p><strong>Note:</strong> Many insurers settle immediately when attorney is involved</p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box" style="margin-top: 24px;">
                  <strong>Escalation Strategy:</strong>
                  <p style="margin: 8px 0 0 0;">Use escalation levels progressively. Don't jump to attorney immediately—use lower levels first to show you're serious and give insurer chances to settle before legal costs escalate.</p>
                </div>
              </div>
            </div>
            
            <!-- PHASE 5: Decision Framework -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">5</span>
                <div>
                  <h4>Know When to Accept or Continue Fighting</h4>
                  <p>Strategic decision-making framework</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Not every claim needs to go to litigation. Use this framework to decide when to accept, continue negotiating, or escalate to lawsuit.</p>
                
                <div class="decision-framework">
                  <div class="decision-card accept">
                    <div class="decision-header">
                      <span class="decision-icon">✓</span>
                      <strong>Accept Settlement When:</strong>
                    </div>
                    <ul>
                      <li>Offer covers 90%+ of your documented losses</li>
                      <li>Remaining gap is less than appraisal/attorney cost</li>
                      <li>Offer is reasonable based on evidence and policy</li>
                      <li>You've exhausted negotiation and escalation tactics</li>
                      <li>Time/stress of continued fighting outweighs remaining gap</li>
                    </ul>
                  </div>
                  
                  <div class="decision-card negotiate">
                    <div class="decision-header">
                      <span class="decision-icon">↔</span>
                      <strong>Continue Negotiating When:</strong>
                    </div>
                    <ul>
                      <li>Gap is $5,000-$20,000 and you have strong supporting evidence</li>
                      <li>You haven't used all escalation levels yet</li>
                      <li>Independent contractor estimates support your position</li>
                      <li>Insurer is responding and increasing offers (showing movement)</li>
                      <li>Policy language clearly supports your position</li>
                    </ul>
                  </div>
                  
                  <div class="decision-card litigate">
                    <div class="decision-header">
                      <span class="decision-icon">⚖️</span>
                      <strong>Consider Litigation When:</strong>
                    </div>
                    <ul>
                      <li>Bad faith denial of clearly legitimate claim</li>
                      <li>Offer is less than 50% of well-documented losses</li>
                      <li>Policy violation is clear and egregious</li>
                      <li>Attorney consultation indicates strong case</li>
                      <li>Gap is $30,000+ with solid evidence to support claim</li>
                      <li>State law provides attorney fees/bad faith damages</li>
                    </ul>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Attorney Consultation:</strong>
                  <p style="margin: 8px 0 0 0;">Most insurance attorneys offer free consultations. Get professional opinion on claim strength before deciding to litigate. Attorney can review your file and advise if lawsuit is worth pursuing.</p>
                </div>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Accepting first offer and losing $15,000-$40,000+ in legitimate recovery</li>
              <li>Negotiating without strategy, evidence, or leverage</li>
              <li>Missing escalation tactics that could increase settlement</li>
              <li>Going to litigation prematurely before exhausting negotiation</li>
              <li>Settling too quickly without using all available pressure points</li>
              <li>Emotional negotiation that weakens your position</li>
            </ul>
          </div>

          <div class="step-completion">
            <h3 style="font-size: 16px; font-weight: 700; color: var(--navy-dark); margin-bottom: 16px;">Negotiation Completion Checklist</h3>
            
            <div class="completion-checklist">
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Prepared and sent written counter-offer with evidence</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Responded professionally to insurer's counter-offers</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Used appropriate escalation tactics when needed</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Maintained detailed negotiation log with all exchanges</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Reached fair settlement OR decided to escalate further</span>
              </div>
            </div>
            
            <div class="info-box" style="margin: 20px 0;">
              <strong>Next Steps:</strong>
              If you've reached acceptable settlement, proceed to Step 12 (Proof of Loss submission) and Step 13 (payment tracking). If still negotiating, continue this process until resolution.
            </div>
            
            <button class="btn-complete-step" onclick="completeAndNext(11)">✓ Negotiation Complete - Continue to Step 12</button>
          </div>
        `
      },
      12: {
        label: 'STEP 12 OF 13',
        title: 'Submit Your Formal Proof of Loss Statement',
        subtitle: 'File the sworn legal claim document with complete supporting evidence by the policy deadline.',
        whatThisPrevents: 'This step prevents claim denial for late filing—THE most common reason valid claims are voided with no recourse.',
        guardrail: 'Do not miss the Proof of Loss deadline. This is not optional. Missing this deadline voids your entire claim permanently.',
        skipWarning: 'Missing the Proof of Loss deadline (typically 60 days) voids your entire claim with NO exceptions—you lose all rights forever.',
        customContent: true,
        htmlContent: `
          <div class="urgent-deadline-banner">
            <div class="deadline-icon">⚠️</div>
            <div class="deadline-content">
              <div class="deadline-title">CRITICAL LEGAL DEADLINE</div>
              <div class="deadline-date">Proof of Loss Due: <span id="polDeadlineDate">Check Your Policy</span></div>
              <div class="deadline-countdown">⏰ Typically 60 days from date of loss</div>
              <div class="deadline-warning">Missing this deadline voids your entire claim permanently—no exceptions.</div>
            </div>
          </div>

          <div class="value-statement">
            <strong>Why This Is THE Most Critical Step:</strong>
            The Proof of Loss is your formal sworn statement listing all damages and their value—required by your policy (typically within 60 days). Missing this deadline voids your entire claim with NO exceptions. This document becomes the legal basis for your claim and any future litigation. It must be complete, accurate, and submitted on time with all supporting documentation.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Understand the Deadline -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Understand the Proof of Loss Requirement</h4>
                  <p>Know exactly what's required and when it's due</p>
                </div>
              </div>
              
              <div class="phase-content">
                <div class="pol-requirements">
                  <div class="requirement-item">
                    <span class="req-icon">📋</span>
                    <div>
                      <strong>What It Is:</strong>
                      <p>Sworn legal statement of your losses signed under oath/penalty of perjury</p>
                    </div>
                  </div>
                  
                  <div class="requirement-item">
                    <span class="req-icon">📜</span>
                    <div>
                      <strong>Required By:</strong>
                      <p>Your insurance policy contract (not optional—mandatory)</p>
                    </div>
                  </div>
                  
                  <div class="requirement-item">
                    <span class="req-icon">⏰</span>
                    <div>
                      <strong>Typical Deadline:</strong>
                      <p>60 days from date of loss (check YOUR specific policy)</p>
                    </div>
                  </div>
                  
                  <div class="requirement-item urgent-item">
                    <span class="req-icon">🚨</span>
                    <div>
                      <strong>Your Deadline:</strong>
                      <p><span id="yourPolDeadline">Check Step 1 Policy Analysis</span></p>
                    </div>
                  </div>
                  
                  <div class="requirement-item critical-item">
                    <span class="req-icon">❌</span>
                    <div>
                      <strong>Consequence of Missing:</strong>
                      <p>Entire claim void—you lose ALL rights forever, no appeal, no recourse</p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box" style="background: #fee2e2; border-left-color: #dc2626; margin-top: 24px;">
                  <strong style="color: #991b1b;">⚠️ THIS IS NOT OPTIONAL</strong>
                  <p style="color: #991b1b; margin: 8px 0 0 0;">This is the #1 reason valid claims are denied. More claims are voided for missing this deadline than any other reason. Even if you have perfect documentation and legitimate losses, missing this deadline means the insurer owes you NOTHING.</p>
                </div>
              </div>
            </div>
            
            <!-- PHASE 2: Compile Complete Package -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>Compile Your Complete Claim Package</h4>
                  <p>Everything from Steps 1-11 must be included</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Your Proof of Loss submission must include ALL supporting documentation. This is your ONE formal submission—it must be complete.</p>
                
                <div class="package-checklist">
                  <div class="checklist-category">
                    <strong>Core Documentation (Required):</strong>
                    <div class="checklist-items">
                      <div class="package-item">
                        <input type="checkbox" class="package-checkbox" id="pkg-inventory">
                        <label for="pkg-inventory">
                          <strong>Complete Itemized Inventory</strong>
                          <span class="item-detail">From Step 8 - All damaged items with values</span>
                        </label>
                      </div>
                      
                      <div class="package-item">
                        <input type="checkbox" class="package-checkbox" id="pkg-photos">
                        <label for="pkg-photos">
                          <strong>All Damage Photos</strong>
                          <span class="item-detail">From Step 3 - Comprehensive photo documentation</span>
                        </label>
                      </div>
                      
                      <div class="package-item">
                        <input type="checkbox" class="package-checkbox" id="pkg-estimates">
                        <label for="pkg-estimates">
                          <strong>Contractor Estimates</strong>
                          <span class="item-detail">From Step 4 - Independent professional estimates</span>
                        </label>
                      </div>
                      
                      <div class="package-item">
                        <input type="checkbox" class="package-checkbox" id="pkg-ownership">
                        <label for="pkg-ownership">
                          <strong>Proof of Ownership</strong>
                          <span class="item-detail">From Step 3 - Receipts, statements, pre-loss photos</span>
                        </label>
                      </div>
                      
                      <div class="package-item">
                        <input type="checkbox" class="package-checkbox" id="pkg-ale">
                        <label for="pkg-ale">
                          <strong>ALE Receipts & Documentation</strong>
                          <span class="item-detail">From Step 7 - Additional living expense claims</span>
                        </label>
                      </div>
                    </div>
                  </div>
                  
                  <div class="checklist-category">
                    <strong>Supporting Analysis (Recommended):</strong>
                    <div class="checklist-items">
                      <div class="package-item">
                        <input type="checkbox" class="package-checkbox" id="pkg-policy">
                        <label for="pkg-policy">
                          <strong>Policy Coverage Analysis</strong>
                          <span class="item-detail">From Step 1 - Confirms coverage for claimed items</span>
                        </label>
                      </div>
                      
                      <div class="package-item">
                        <input type="checkbox" class="package-checkbox" id="pkg-comparison">
                        <label for="pkg-comparison">
                          <strong>Estimate Comparison</strong>
                          <span class="item-detail">From Step 5 - Your estimate vs adjuster estimate</span>
                        </label>
                      </div>
                      
                      <div class="package-item">
                        <input type="checkbox" class="package-checkbox" id="pkg-correspondence">
                        <label for="pkg-correspondence">
                          <strong>All Correspondence</strong>
                          <span class="item-detail">Letters, emails, negotiation records from Steps 2, 10, 11</span>
                        </label>
                      </div>
                    </div>
                  </div>
                  
                  <div class="checklist-category">
                    <strong>Additional Evidence (If Applicable):</strong>
                    <div class="checklist-items">
                      <div class="package-item">
                        <input type="checkbox" class="package-checkbox" id="pkg-mitigation">
                        <label for="pkg-mitigation">
                          <strong>Emergency Mitigation Receipts</strong>
                          <span class="item-detail">From Step 2 - Emergency repairs to prevent further damage</span>
                        </label>
                      </div>
                      
                      <div class="package-item">
                        <input type="checkbox" class="package-checkbox" id="pkg-expert">
                        <label for="pkg-expert">
                          <strong>Expert Opinions</strong>
                          <span class="item-detail">Engineer reports, mold inspector, other professional assessments</span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/claim-package-assembly.html'">📦 Assemble Complete Package</button>
              </div>
            </div>
            
            <!-- PHASE 3: Generate & Sign POL -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Generate & Sign Your Proof of Loss</h4>
                  <p>Create formal sworn statement with legal formatting</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">AI generates a professional Proof of Loss document that meets all legal requirements. YOU must review, verify accuracy, and sign under oath.</p>
                
                <div class="pol-generation-steps">
                  <div class="gen-step">
                    <div class="gen-number">1</div>
                    <div class="gen-content">
                      <strong>AI Generates POL Document</strong>
                      <p>System creates formal sworn statement including:</p>
                      <ul>
                        <li>Your claim information and policy details</li>
                        <li>Complete itemized list of losses by category</li>
                        <li>Dollar values for each item and total claim</li>
                        <li>References to supporting documentation</li>
                        <li>Policy sections mandating coverage</li>
                        <li>Proper legal formatting for your state</li>
                      </ul>
                    </div>
                  </div>
                  
                  <div class="gen-step">
                    <div class="gen-number">2</div>
                    <div class="gen-content">
                      <strong>YOU Review for Accuracy</strong>
                      <p>This is AI-generated—YOUR responsibility to verify:</p>
                      <ul>
                        <li>All amounts are correct</li>
                        <li>All items are included</li>
                        <li>No errors or omissions</li>
                        <li>Policy numbers and dates are accurate</li>
                      </ul>
                    </div>
                  </div>
                  
                  <div class="gen-step">
                    <div class="gen-number">3</div>
                    <div class="gen-content">
                      <strong>Sign Under Oath</strong>
                      <p>Your signature certifies under penalty of perjury that:</p>
                      <ul>
                        <li>All statements are true and accurate</li>
                        <li>You own/owned the claimed property</li>
                        <li>Loss amounts are properly calculated</li>
                        <li>No false or fraudulent claims are included</li>
                      </ul>
                    </div>
                  </div>
                  
                  <div class="gen-step">
                    <div class="gen-number">4</div>
                    <div class="gen-content">
                      <strong>Notarization (If Required)</strong>
                      <p>Check your policy—some states/policies require notary:</p>
                      <ul>
                        <li>Bring signed POL to notary public</li>
                        <li>Notary witnesses your signature</li>
                        <li>Notary seal validates document</li>
                        <li>Cost: typically $5-$15</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="info-box" style="background: #fee2e2; border-left-color: #dc2626;">
                  <strong style="color: #991b1b;">⚠️ False Statements = Criminal Penalties</strong>
                  <p style="color: #991b1b; margin: 8px 0 0 0;">Signing a false Proof of Loss can result in claim denial, policy cancellation, and criminal prosecution for insurance fraud. Review carefully before signing.</p>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/proof-of-loss-tracker.html'">📝 Generate Proof of Loss Document</button>
              </div>
            </div>
            
            <!-- PHASE 4: Submit via Multiple Methods -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">4</span>
                <div>
                  <h4>Submit Using Multiple Methods</h4>
                  <p>Belt and suspenders—create multiple proof points</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Submit using THREE methods simultaneously to ensure timely filing and create multiple proof points.</p>
                
                <div class="submission-methods">
                  <div class="method-card method-required">
                    <div class="method-badge">REQUIRED</div>
                    <div class="method-header">
                      <span class="method-icon">📮</span>
                      <strong>Method 1: Certified Mail with Return Receipt</strong>
                    </div>
                    <div class="method-content">
                      <p class="method-why"><strong>Why:</strong> Creates legal proof of timely filing with date stamp and delivery confirmation</p>
                      <div class="method-steps">
                        <strong>How to Submit:</strong>
                        <ol>
                          <li>Print complete Proof of Loss with all attachments</li>
                          <li>Mail to: Claims Department address (from your policy)</li>
                          <li>Use USPS Certified Mail with Return Receipt Requested</li>
                          <li>Keep tracking number and receipt</li>
                          <li>Keep copy of certified mail receipt showing mailing date</li>
                        </ol>
                      </div>
                      <div class="method-cost">Cost: ~$8-$12 for certified mail + return receipt</div>
                    </div>
                  </div>
                  
                  <div class="method-card method-recommended">
                    <div class="method-badge">RECOMMENDED</div>
                    <div class="method-header">
                      <span class="method-icon">📧</span>
                      <strong>Method 2: Email with Delivery Confirmation</strong>
                    </div>
                    <div class="method-content">
                      <p class="method-why"><strong>Why:</strong> Immediate date stamp and faster delivery than mail</p>
                      <div class="method-steps">
                        <strong>How to Submit:</strong>
                        <ol>
                          <li>Convert complete package to PDF files</li>
                          <li>Email to: Adjuster email + claims department email</li>
                          <li>Subject: "Proof of Loss - Claim #[your number]"</li>
                          <li>Request read receipt/delivery confirmation</li>
                          <li>Save sent email and any delivery confirmations</li>
                        </ol>
                      </div>
                      <div class="method-cost">Cost: Free</div>
                    </div>
                  </div>
                  
                  <div class="method-card method-optional">
                    <div class="method-badge">IF AVAILABLE</div>
                    <div class="method-header">
                      <span class="method-icon">💻</span>
                      <strong>Method 3: Online Claims Portal</strong>
                    </div>
                    <div class="method-content">
                      <p class="method-why"><strong>Why:</strong> Creates submission record in insurer's own system</p>
                      <div class="method-steps">
                        <strong>How to Submit:</strong>
                        <ol>
                          <li>Log into insurer's online portal</li>
                          <li>Navigate to your claim</li>
                          <li>Upload complete POL package as PDFs</li>
                          <li>Take screenshots of submission confirmation</li>
                          <li>Print/save confirmation page with date/time</li>
                        </ol>
                      </div>
                      <div class="method-cost">Cost: Free (if portal available)</div>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Keep Copies of EVERYTHING:</strong>
                  <p style="margin: 8px 0 0 0;">Save copies of the POL, all attachments, certified mail receipt, email confirmations, portal screenshots. You need proof you submitted on time if insurer later claims they "never received it."</p>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/claim-submitter.html'">📤 Track Submission Status</button>
              </div>
            </div>
            
            <!-- PHASE 5: Confirm Receipt & Track Response -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">5</span>
                <div>
                  <h4>Confirm Receipt & Track Response</h4>
                  <p>Follow up immediately and document everything</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Don't assume they received it. Follow up within 3 days to confirm receipt and track their response timeline.</p>
                
                <div class="followup-timeline">
                  <div class="timeline-item">
                    <div class="timeline-marker day-3">Day 3</div>
                    <div class="timeline-content">
                      <strong>Immediate Follow-Up</strong>
                      <p>Call adjuster to confirm receipt of POL. Document:</p>
                      <ul>
                        <li>Who you spoke with and when</li>
                        <li>Confirmation they received POL</li>
                        <li>Any reference number assigned</li>
                        <li>When you should expect response</li>
                      </ul>
                    </div>
                  </div>
                  
                  <div class="timeline-item">
                    <div class="timeline-marker day-15">Day 15</div>
                    <div class="timeline-content">
                      <strong>Written Acknowledgment</strong>
                      <p>Insurer should acknowledge receipt within 15 days. If not:</p>
                      <ul>
                        <li>Send follow-up email requesting acknowledgment</li>
                        <li>Reference your submission date and method</li>
                        <li>Request confirmation of receipt and review timeline</li>
                      </ul>
                    </div>
                  </div>
                  
                  <div class="timeline-item">
                    <div class="timeline-marker day-30">Day 30-60</div>
                    <div class="timeline-content">
                      <strong>Substantive Response</strong>
                      <p>Most states require response within 30-60 days. Insurer may:</p>
                      <ul>
                        <li>Provide settlement offer</li>
                        <li>Request clarification or additional documentation</li>
                        <li>Deny specific items with explanation</li>
                        <li>Request examination under oath (EUO)</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="state-law-tracker">
                  <strong>Your State's Prompt Payment Requirements:</strong>
                  <div class="state-requirement">
                    <p>Most states require insurers to acknowledge POL within 15 days and provide substantive response within 30-60 days. Check Step 1 (State-Specific Rights) for YOUR state's exact timeline.</p>
                    <p><strong>Document any violations</strong> for potential bad faith claim or DOI complaint.</p>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>What Happens After POL Submission:</strong>
                  <p style="margin: 8px 0 0 0;">Your POL establishes the legal basis for your claim. Insurer reviews and either pays, requests more info, or denies with explanation. Continue negotiation (Step 11) if needed, but your POL filing protects your legal rights and preserves your ability to litigate if necessary.</p>
                </div>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Claim void for late filing—THE #1 reason valid claims are denied</li>
              <li>Loss of all legal rights including right to sue</li>
              <li>Exclusion of items not formally claimed in sworn POL</li>
              <li>Weak legal position from incomplete or poorly documented POL</li>
              <li>Missing THE deadline that terminates all coverage forever</li>
              <li>Insurer claiming "you never formally submitted Proof of Loss"</li>
            </ul>
          </div>

          <div class="step-completion">
            <h3 style="font-size: 16px; font-weight: 700; color: var(--navy-dark); margin-bottom: 16px;">Proof of Loss Submission Checklist</h3>
            
            <div class="completion-checklist">
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Confirmed my Proof of Loss deadline (within 60 days of loss)</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Compiled complete claim package with all supporting documentation</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Generated, reviewed, and signed Proof of Loss under oath</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Submitted via certified mail, email, and online portal (if available)</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Confirmed receipt with adjuster and documented follow-up</span>
              </div>
              <div class="completion-item" onclick="toggleCompletion(this)">
                <span class="completion-checkbox"></span>
                <span>Kept copies of all submission records and confirmations</span>
              </div>
            </div>
            
            <div class="info-box" style="margin: 20px 0; background: #f0fdf4; border-left-color: #22c55e;">
              <strong style="color: #166534;">✓ Congratulations!</strong>
              <p style="color: #166534; margin: 8px 0 0 0;">By submitting your Proof of Loss on time, you've protected your legal rights and established the formal basis for your claim. Continue to Step 13 to track payment status and recover depreciation holdback.</p>
            </div>
            
            <button class="btn-complete-step" onclick="completeAndNext(12)">✓ Proof of Loss Submitted - Continue to Step 13</button>
          </div>
        `
      },
      13: {
        label: 'STEP 13 OF 13 - FINAL STEP',
        title: 'Track Payment & Recover Depreciation Holdback',
        subtitle: 'Monitor all payments, complete repairs, and submit for withheld depreciation recovery.',
        whatThisPrevents: 'This step prevents forfeiting $10k-$40k+ in depreciation holdback that most policyholders leave on the table by not completing repairs or missing RCV deadlines.',
        guardrail: 'Do not begin repairs before receiving initial ACV payment. Do not miss the RCV recovery deadline (typically 180-365 days).',
        skipWarning: 'Most policyholders forfeit $10k-$40k+ by not understanding the two-payment system and missing the depreciation recovery deadline.',
        customContent: true,
        htmlContent: `
          <div class="final-step-banner">
            <div class="banner-icon">🎯</div>
            <div class="banner-content">
              <div class="banner-title">FINAL STEP: Receive All Money & Close Out</div>
              <div class="banner-message">You're almost done! But don't stop now—you're still owed the depreciation holdback (typically $10k-$40k+) after completing repairs.</div>
            </div>
          </div>

          <div class="value-statement">
            <strong>Why This Final Step Is Critical:</strong>
            Most policyholders think they're done when they get the first check—but that's only 50-70% of the total (ACV payment). You're still owed the depreciation holdback, which requires completing repairs within the policy deadline and submitting receipts. This step ensures you receive ALL money owed and properly close out your claim with complete documentation for future reference.
          </div>

          <div class="process-phases">
            
            <!-- PHASE 1: Receive & Verify Initial Payment -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                  <h4>Receive & Verify Initial ACV Payment</h4>
                  <p>Confirm you received correct amount and it matches settlement</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Your first payment is the Actual Cash Value (ACV)—this is your total settlement minus depreciation. Verify accuracy before depositing.</p>
                
                <div class="payment-verification">
                  <div class="verify-section">
                    <strong>Expected Payment Timeline:</strong>
                    <div class="timeline-info">
                      <div class="timeline-point">
                        <span class="point-label">Settlement Agreement:</span>
                        <span class="point-value" id="settlementDate">Check Step 11</span>
                      </div>
                      <div class="timeline-point">
                        <span class="point-label">Expected Payment:</span>
                        <span class="point-value">7-14 days after settlement</span>
                      </div>
                      <div class="timeline-point">
                        <span class="point-label">Your Payment Date:</span>
                        <span class="point-value" id="actualPaymentDate">Not received yet</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="verify-section">
                    <strong>Payment Verification Checklist:</strong>
                    <div class="verify-checklist">
                      <div class="verify-item">
                        <input type="checkbox" class="verify-checkbox" id="verify-amount">
                        <label for="verify-amount">
                          <strong>Check Amount Matches Settlement Agreement</strong>
                          <span class="verify-detail">Expected: ACV only (not RCV) - Check Step 9 calculations</span>
                        </label>
                      </div>
                      
                      <div class="verify-item">
                        <input type="checkbox" class="verify-checkbox" id="verify-breakdown">
                        <label for="verify-breakdown">
                          <strong>Breakdown Matches by Category</strong>
                          <span class="verify-detail">Dwelling + Contents + ALE - Verify against settlement</span>
                        </label>
                      </div>
                      
                      <div class="verify-item">
                        <input type="checkbox" class="verify-checkbox" id="verify-deductible">
                        <label for="verify-deductible">
                          <strong>Deductible Applied Correctly</strong>
                          <span class="verify-detail">Your deductible (should only be applied once per claim)</span>
                        </label>
                      </div>
                      
                      <div class="verify-item">
                        <input type="checkbox" class="verify-checkbox" id="verify-mortgagee">
                        <label for="verify-mortgagee">
                          <strong>Check Payees Are Correct</strong>
                          <span class="verify-detail">Should be payable to: You + Mortgage Company (if applicable)</span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="payment-discrepancy">
                  <strong>❌ Payment Doesn't Match Settlement?</strong>
                  <div class="discrepancy-actions">
                    <p>DO NOT deposit check if amount is wrong. Instead:</p>
                    <ol>
                      <li>Document exact discrepancy (what was agreed vs what you received)</li>
                      <li>Contact adjuster immediately in writing</li>
                      <li>Demand corrected payment with written explanation</li>
                      <li>If not resolved, file DOI complaint</li>
                    </ol>
                  </div>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/payment-tracker.html'">💰 Log Payment Receipt</button>
              </div>
            </div>
            
            <!-- PHASE 2: Complete Repairs & Document Everything -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                  <h4>Complete Repairs & Document Everything</h4>
                  <p>Hire contractors, get itemized invoices, save all receipts</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">To recover the depreciation holdback, you MUST complete actual repairs and provide proof. Documentation requirements are strict.</p>
                
                <div class="repair-requirements">
                  <div class="requirement-card">
                    <div class="req-header">
                      <span class="req-icon">👷</span>
                      <strong>Hire Licensed Contractors</strong>
                    </div>
                    <div class="req-content">
                      <p>Insurer typically requires licensed, insured contractors (not DIY)</p>
                      <ul>
                        <li>Get multiple bids before hiring</li>
                        <li>Verify contractor license and insurance</li>
                        <li>Use contractors who pull permits</li>
                        <li>Get written contract with scope and timeline</li>
                      </ul>
                    </div>
                  </div>
                  
                  <div class="requirement-card">
                    <div class="req-header">
                      <span class="req-icon">📄</span>
                      <strong>Get Itemized Invoices</strong>
                    </div>
                    <div class="req-content">
                      <p>Generic "labor and materials" invoices will be rejected</p>
                      <ul>
                        <li>Line-item breakdown of all work performed</li>
                        <li>Specific materials used (brand, model, quantity)</li>
                        <li>Labor hours and rates</li>
                        <li>Match invoice line items to original estimate categories</li>
                      </ul>
                    </div>
                  </div>
                  
                  <div class="requirement-card">
                    <div class="req-header">
                      <span class="req-icon">🧾</span>
                      <strong>Save All Receipts</strong>
                    </div>
                    <div class="req-content">
                      <p>Proof of payment is mandatory for RCV recovery</p>
                      <ul>
                        <li>Cancelled checks or credit card statements</li>
                        <li>Material receipts from suppliers</li>
                        <li>Subcontractor invoices</li>
                        <li>Permit fees and inspection certificates</li>
                      </ul>
                    </div>
                  </div>
                  
                  <div class="requirement-card">
                    <div class="req-header">
                      <span class="req-icon">📸</span>
                      <strong>Take Completion Photos</strong>
                    </div>
                    <div class="req-content">
                      <p>Prove repairs were actually completed to professional standards</p>
                      <ul>
                        <li>Before, during, and after photos of each area</li>
                        <li>Close-ups of completed work</li>
                        <li>Wide shots showing overall restoration</li>
                        <li>Date-stamped if possible</li>
                      </ul>
                    </div>
                  </div>
                  
                  <div class="requirement-card">
                    <div class="req-header">
                      <span class="req-icon">✅</span>
                      <strong>Get Permits & Certificates</strong>
                    </div>
                    <div class="req-content">
                      <p>Official proof that work meets code and passed inspection</p>
                      <ul>
                        <li>Building permits for structural work</li>
                        <li>Inspection certificates showing final approval</li>
                        <li>Certificate of occupancy (if required)</li>
                        <li>Warranty documentation from contractors</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>⚠️ RCV Recovery Deadline Starts Now:</strong>
                  <p style="margin: 8px 0 0 0;">Most policies require completion within 180-365 days from date of loss. Check YOUR specific policy. Miss this deadline and you forfeit the entire depreciation holdback ($10k-$40k+) permanently.</p>
                </div>
              </div>
            </div>
            
            <!-- PHASE 3: Submit RCV Recovery Claim -->
            <div class="phase-card rcv-recovery-card">
              <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                  <h4>Submit Depreciation Holdback Recovery (RCV)</h4>
                  <p>THIS IS THE BIG ONE - Recover $10k-$40k+ in withheld depreciation</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">This is the money you're ALREADY ENTITLED TO but was withheld until repairs were complete. Don't leave it on the table!</p>
                
                <div class="rcv-recovery-breakdown">
                  <div class="recovery-header">
                    <strong>Your Depreciation Holdback Recovery:</strong>
                  </div>
                  <div class="recovery-calculation">
                    <div class="calc-line">
                      <span class="calc-label">Original RCV (Replacement Cost):</span>
                      <span class="calc-amount" id="totalRCV">Check Step 9</span>
                    </div>
                    <div class="calc-line subtract">
                      <span class="calc-label">Initial ACV Payment Received:</span>
                      <span class="calc-amount" id="totalACV">Check Step 9</span>
                    </div>
                    <div class="calc-line total">
                      <span class="calc-label"><strong>Depreciation Holdback You're Owed:</strong></span>
                      <span class="calc-amount" id="totalHoldback"><strong>Check Step 9</strong></span>
                    </div>
                  </div>
                </div>
                
                <div class="rcv-deadline-warning">
                  <div class="deadline-warn-icon">⏰</div>
                  <div class="deadline-warn-content">
                    <strong>CRITICAL DEADLINE:</strong>
                    <p>RCV recovery must be claimed within <span id="rcvDeadlineDays">180-365 days</span> of loss date</p>
                    <p>Your deadline: <span id="rcvDeadlineDate">Check your policy</span></p>
                    <p class="deadline-consequence">Miss this = lose entire holdback permanently (no extensions, no appeals)</p>
                  </div>
                </div>
                
                <div class="rcv-submission-package">
                  <strong>What to Submit for RCV Recovery:</strong>
                  <div class="submission-list">
                    <div class="submission-item">
                      <span class="submit-icon">✓</span>
                      <div>
                        <strong>Completed Invoices (Itemized)</strong>
                        <p>From all contractors showing work completed and paid</p>
                      </div>
                    </div>
                    
                    <div class="submission-item">
                      <span class="submit-icon">✓</span>
                      <div>
                        <strong>Proof of Payment</strong>
                        <p>Cancelled checks, credit card statements, wire transfer confirmations</p>
                      </div>
                    </div>
                    
                    <div class="submission-item">
                      <span class="submit-icon">✓</span>
                      <div>
                        <strong>Completion Photos</strong>
                        <p>Before/after showing all repairs completed to professional standards</p>
                      </div>
                    </div>
                    
                    <div class="submission-item">
                      <span class="submit-icon">✓</span>
                      <div>
                        <strong>Permits & Certificates</strong>
                        <p>Building permits, inspection approvals, certificate of occupancy</p>
                      </div>
                    </div>
                    
                    <div class="submission-item">
                      <span class="submit-icon">✓</span>
                      <div>
                        <strong>RCV Recovery Request Letter</strong>
                        <p>Formal request citing policy provision for depreciation recovery</p>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>How Long Until RCV Payment?</strong>
                  <p style="margin: 8px 0 0 0;">Insurer must pay within 30 days of receiving complete RCV documentation (varies by state). If delayed, request interest on late payment per state law.</p>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/rcv-recovery-submitter.html'">📤 Submit RCV Recovery Claim</button>
              </div>
            </div>
            
            <!-- PHASE 4: Track Payment Timing -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">4</span>
                <div>
                  <h4>Track Payment Timing & State Law Compliance</h4>
                  <p>Hold insurer accountable to prompt payment deadlines</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Most states have prompt payment laws requiring insurers to pay within specific timeframes. Track compliance and demand interest on delays.</p>
                
                <div class="payment-timeline-tracker">
                  <div class="tracker-row">
                    <div class="tracker-label">Settlement Agreement Date:</div>
                    <div class="tracker-value" id="settlementDateTracker">Check Step 11</div>
                    <div class="tracker-status">⏳ Track</div>
                  </div>
                  
                  <div class="tracker-row">
                    <div class="tracker-label">ACV Payment Due:</div>
                    <div class="tracker-value">Within 30 days of settlement</div>
                    <div class="tracker-status" id="acvPaymentStatus">⏳ Pending</div>
                  </div>
                  
                  <div class="tracker-row">
                    <div class="tracker-label">RCV Submission Date:</div>
                    <div class="tracker-value" id="rcvSubmissionDate">Not submitted yet</div>
                    <div class="tracker-status" id="rcvSubmissionStatus">⏳ Pending</div>
                  </div>
                  
                  <div class="tracker-row">
                    <div class="tracker-label">RCV Payment Due:</div>
                    <div class="tracker-value">Within 30 days of RCV submission</div>
                    <div class="tracker-status" id="rcvPaymentStatus">⏳ Pending</div>
                  </div>
                </div>
                
                <div class="state-law-requirements">
                  <strong>Your State's Prompt Payment Law:</strong>
                  <div class="state-law-box">
                    <p>Most states require payment within 30 days of settlement or complete documentation submission. Check Step 1 (State-Specific Rights) for YOUR state's exact requirements.</p>
                    <p><strong>Late Payment Penalties:</strong> Many states require insurers to pay interest on delayed payments (typically 10-18% annual rate).</p>
                  </div>
                </div>
                
                <div class="delay-action">
                  <strong>Payment Delayed Beyond State Deadline?</strong>
                  <div class="delay-steps">
                    <ol>
                      <li>Send written demand for immediate payment with interest</li>
                      <li>Cite your state's prompt payment statute (from Step 1)</li>
                      <li>Calculate interest owed on late payment</li>
                      <li>File DOI complaint if not resolved within 7 days</li>
                      <li>Add late payment claim to any bad faith litigation</li>
                    </ol>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- PHASE 5: Handle Payment Shortfalls -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">5</span>
                <div>
                  <h4>Resolve Any Payment Discrepancies</h4>
                  <p>Catch and correct errors before closing out</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Even after settlement, insurers sometimes make payment errors. Verify every payment matches agreements before accepting as final.</p>
                
                <div class="common-discrepancies">
                  <div class="discrepancy-card">
                    <div class="disc-header">
                      <span class="disc-icon">💰</span>
                      <strong>Payment Less Than Agreed Amount</strong>
                    </div>
                    <div class="disc-content">
                      <p><strong>What happened:</strong> Check is for less than settlement agreement stated</p>
                      <p><strong>Your action:</strong> Do not deposit. Contact adjuster with settlement agreement showing correct amount. Demand corrected check.</p>
                    </div>
                  </div>
                  
                  <div class="discrepancy-card">
                    <div class="disc-header">
                      <span class="disc-icon">📋</span>
                      <strong>Missing Coverage Categories</strong>
                    </div>
                    <div class="disc-content">
                      <p><strong>What happened:</strong> Settlement included dwelling + contents + ALE, but check only covers dwelling</p>
                      <p><strong>Your action:</strong> Request separate checks for missing categories or supplemental payment to cover all agreed categories.</p>
                    </div>
                  </div>
                  
                  <div class="discrepancy-card">
                    <div class="disc-header">
                      <span class="disc-icon">➖</span>
                      <strong>Deductible Applied Twice</strong>
                    </div>
                    <div class="disc-content">
                      <p><strong>What happened:</strong> Deductible subtracted from dwelling AND contents (should only apply once per claim)</p>
                      <p><strong>Your action:</strong> Cite policy showing single deductible per occurrence. Demand refund of duplicate deduction.</p>
                    </div>
                  </div>
                  
                  <div class="discrepancy-card">
                    <div class="disc-header">
                      <span class="disc-icon">🏦</span>
                      <strong>Mortgagee Endorsement Issues</strong>
                    </div>
                    <div class="disc-content">
                      <p><strong>What happened:</strong> Check requires mortgage company signature but they're slow to endorse or demanding incorrect amount</p>
                      <p><strong>Your action:</strong> Contact mortgage servicer immediately. Some allow electronic endorsement. May need to negotiate directly with them.</p>
                    </div>
                  </div>
                </div>
                
                <div class="info-box">
                  <strong>Don't Sign Final Release Until All Payments Received:</strong>
                  <p style="margin: 8px 0 0 0;">Some insurers send "final release" forms with partial payments. DO NOT SIGN until you've received ACV + RCV + any supplements + interest on delays. Signing closes claim and waives further recovery.</p>
                </div>
              </div>
            </div>
            
            <!-- PHASE 6: Close Out & Archive -->
            <div class="phase-card">
              <div class="phase-header">
                <span class="phase-number">6</span>
                <div>
                  <h4>Close Out Claim & Archive All Documentation</h4>
                  <p>Verify total recovery and preserve records permanently</p>
                </div>
              </div>
              
              <div class="phase-content">
                <p class="phase-intro">Once all payments are received and verified, close out your claim and create permanent archive for future reference.</p>
                
                <div class="final-recovery-summary">
                  <div class="recovery-header">
                    <strong>Your Total Claim Recovery:</strong>
                  </div>
                  <div class="recovery-breakdown">
                    <div class="recovery-line">
                      <span class="recovery-label">Initial ACV Payment:</span>
                      <span class="recovery-amount">+ Check records</span>
                    </div>
                    <div class="recovery-line">
                      <span class="recovery-label">RCV Depreciation Recovery:</span>
                      <span class="recovery-amount">+ Check records</span>
                    </div>
                    <div class="recovery-line">
                      <span class="recovery-label">Supplemental Payments:</span>
                      <span class="recovery-amount">+ Check records</span>
                    </div>
                    <div class="recovery-line">
                      <span class="recovery-label">Interest on Delayed Payments:</span>
                      <span class="recovery-amount">+ Check records</span>
                    </div>
                    <div class="recovery-line subtract">
                      <span class="recovery-label">Policy Deductible:</span>
                      <span class="recovery-amount">- Check policy</span>
                    </div>
                    <div class="recovery-line total">
                      <span class="recovery-label"><strong>TOTAL RECEIVED:</strong></span>
                      <span class="recovery-amount"><strong>Calculate total</strong></span>
                    </div>
                  </div>
                </div>
                
                <div class="archive-importance">
                  <strong>📁 Why You Must Keep This File Forever:</strong>
                  <div class="archive-reasons">
                    <div class="archive-reason">
                      <span class="reason-icon">🏠</span>
                      <div>
                        <strong>Property Sale Disclosures</strong>
                        <p>Some states require disclosing prior claims when selling property</p>
                      </div>
                    </div>
                    
                    <div class="archive-reason">
                      <span class="reason-icon">🔍</span>
                      <div>
                        <strong>Future Damage Discovery</strong>
                        <p>Hidden damage found years later may still be covered if related to original loss</p>
                      </div>
                    </div>
                    
                    <div class="archive-reason">
                      <span class="reason-icon">📋</span>
                      <div>
                        <strong>Insurance Underwriting</strong>
                        <p>Future insurers will ask about claims history - you need accurate records</p>
                      </div>
                    </div>
                    
                    <div class="archive-reason">
                      <span class="reason-icon">💰</span>
                      <div>
                        <strong>Tax Deductions</strong>
                        <p>Casualty losses may be tax deductible - you need documentation for IRS</p>
                      </div>
                    </div>
                    
                    <div class="archive-reason">
                      <span class="reason-icon">⚖️</span>
                      <div>
                        <strong>Future Disputes</strong>
                        <p>If insurer reopens claim or disputes coverage later, you need proof</p>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="archive-checklist">
                  <strong>What to Save in Your Permanent Claim Archive:</strong>
                  <ul>
                    <li>Complete insurance policy with all endorsements</li>
                    <li>All correspondence (emails, letters) with insurer</li>
                    <li>Settlement agreement and payment records</li>
                    <li>All contractor estimates, invoices, and receipts</li>
                    <li>Before/after photos and videos</li>
                    <li>Proof of Loss and all supporting documents</li>
                    <li>Any DOI complaints or legal filings</li>
                    <li>This complete claim guide with your notes</li>
                  </ul>
                </div>
                
                <button class="btn-phase-action" onclick="window.location.href='app/tools/claim-archive-generator.html'">💾 Generate Complete Claim Archive</button>
              </div>
            </div>
            
          </div>

          <div class="prevents-box">
            <strong>🛡️ What This Step Prevents:</strong>
            <ul>
              <li>Forfeiting $10k-$40k+ depreciation holdback by missing RCV deadline</li>
              <li>Accepting incorrect payments without catching errors</li>
              <li>Losing documentation needed for future reference or disputes</li>
              <li>Missing interest payments on delayed claim payments</li>
              <li>Signing final release before receiving all money owed</li>
              <li>Having no records for property sale disclosures or tax purposes</li>
            </ul>
          </div>

          <div class="claim-completion-celebration">
            <div class="celebration-icon">🎉</div>
            <div class="celebration-content">
              <h2>Claim Process Complete!</h2>
              <p>You've successfully navigated all 13 steps of the insurance claim process. You documented your losses professionally, negotiated strategically, and ensured you received all money owed including depreciation recovery.</p>
              
              <div class="completion-stats">
                <div class="completion-stat">
                  <div class="stat-number">13/13</div>
                  <div class="stat-label">Steps Completed</div>
                </div>
                <div class="completion-stat">
                  <div class="stat-number">100%</div>
                  <div class="stat-label">Process Complete</div>
                </div>
                <div class="completion-stat">
                  <div class="stat-number">✓</div>
                  <div class="stat-label">Fully Recovered</div>
                </div>
              </div>
              
              <p class="final-message">Keep your complete claim archive forever. This documentation protects you for property sales, future claims, tax deductions, and any potential disputes. You did it!</p>
            </div>
          </div>
        `
      }
    };

    let currentStep = 1;
    let completedSteps = [];
    let taskCompletion = {}; // Track which tasks are completed per step

    // Load saved state from storage
    function loadSavedState() {
      const state = getClaimData('claimNavigatorState');
      if (state) {
        currentStep = state.currentStep || 1;
        completedSteps = state.completedSteps || [];
        taskCompletion = state.taskCompletion || {};
        
        // Load claim info
        if (state.claimInfo) {
          document.getElementById('claimNumber').textContent = state.claimInfo.claimNumber || 'Not set';
          document.getElementById('dateOfLoss').textContent = state.claimInfo.dateOfLoss || 'Not set';
          document.getElementById('daysSinceLoss').textContent = state.claimInfo.daysSinceLoss || '0 days';
          document.getElementById('insurerName').textContent = state.claimInfo.insurerName || 'Not set';
          document.getElementById('adjusterName').textContent = state.claimInfo.adjusterName || 'Not set';
          document.getElementById('claimStatus').textContent = state.claimInfo.claimStatus || 'Not started';
        }
        
        // Inventory is loaded from localStorage when needed by calculate functions
        console.log('Loaded inventory items:', (state.inventory || []).length);
      }
    }

    // Save state to storage
    function saveState() {
      const saved = localStorage.getItem('claimNavigatorState');
      const existingState = saved ? JSON.parse(saved) : {};
      
      const state = {
        currentStep: currentStep,
        completedSteps: completedSteps,
        taskCompletion: taskCompletion,
        claimInfo: {
          claimNumber: document.getElementById('claimNumber').textContent,
          dateOfLoss: document.getElementById('dateOfLoss').textContent,
          daysSinceLoss: document.getElementById('daysSinceLoss').textContent,
          insurerName: document.getElementById('insurerName').textContent,
          adjusterName: document.getElementById('adjusterName').textContent,
          claimStatus: document.getElementById('claimStatus').textContent
        },
        inventory: existingState.inventory || [], // Preserve existing inventory data
        lastSaved: new Date().toISOString()
      };
      saveClaimData('claimNavigatorState', state);
    }

    // Calculate total RCV, depreciation, ACV, and holdback from inventory
    function calculateInventoryTotals() {
      const saved = localStorage.getItem('claimNavigatorState');
      if (!saved) {
        return {
          totalRCV: 0,
          totalDepreciation: 0,
          totalACV: 0,
          holdbackAmount: 0
        };
      }
      
      const state = JSON.parse(saved);
      const inventory = state.inventory || [];
      
      let totalRCV = 0;
      let totalDepreciation = 0;
      
      inventory.forEach(item => {
        const rcv = parseFloat(item.rcv) || 0;
        const depreciationPercent = parseFloat(item.depreciationPercent) || 0;
        const depreciation = rcv * (depreciationPercent / 100);
        
        totalRCV += rcv;
        totalDepreciation += depreciation;
      });
      
      const totalACV = totalRCV - totalDepreciation;
      const holdbackAmount = totalDepreciation;
      
      return {
        totalRCV: totalRCV,
        totalDepreciation: totalDepreciation,
        totalACV: totalACV,
        holdbackAmount: holdbackAmount
      };
    }

    // Format currency for display
    function formatCurrency(amount) {
      return '$' + amount.toLocaleString('en-US', {
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      });
    }

    // Update the ACV/RCV breakdown display in Step 9
    function updateACVRCVBreakdown() {
      const totals = calculateInventoryTotals();
      
      // Update all breakdown amounts in Step 9
      const breakdownItems = document.querySelectorAll('.breakdown-item');
      
      breakdownItems.forEach(item => {
        const amountEl = item.querySelector('.breakdown-amount');
        if (!amountEl) return;
        
        if (item.classList.contains('total-rcv')) {
          amountEl.textContent = formatCurrency(totals.totalRCV);
        } else if (item.classList.contains('depreciation')) {
          amountEl.textContent = formatCurrency(totals.totalDepreciation);
        } else if (item.classList.contains('initial-acv')) {
          amountEl.textContent = formatCurrency(totals.totalACV);
        } else if (item.classList.contains('holdback-recovery')) {
          amountEl.textContent = formatCurrency(totals.holdbackAmount);
        }
      });
      
      // Show message if no inventory data
      if (totals.totalRCV === 0) {
        breakdownItems.forEach(item => {
          const amountEl = item.querySelector('.breakdown-amount');
          if (amountEl) {
            amountEl.textContent = '$0';
          }
        });
        
        // Show helper message
        showInventoryWarning();
      } else {
        hideInventoryWarning();
      }
    }

    // Show warning if no inventory data exists
    function showInventoryWarning() {
      const paymentBreakdown = document.querySelector('.payment-breakdown');
      if (!paymentBreakdown) return;
      
      let warningEl = document.getElementById('inventory-warning');
      if (!warningEl) {
        warningEl = document.createElement('div');
        warningEl.id = 'inventory-warning';
        warningEl.className = 'info-box';
        warningEl.style.marginTop = '16px';
        warningEl.innerHTML = `
          <strong>⚠️ No Inventory Data Found</strong>
          <p style="margin: 8px 0 0 0;">Complete Step 8 (Contents Inventory) to calculate your ACV/RCV breakdown. Once you've documented your damaged items with values, return here to see your payment structure.</p>
        `;
        paymentBreakdown.insertAdjacentElement('afterend', warningEl);
      }
    }

    // Hide inventory warning
    function hideInventoryWarning() {
      const warningEl = document.getElementById('inventory-warning');
      if (warningEl) {
        warningEl.remove();
      }
    }

    // Manual calculate function called by button
    function calculateACVRCV() {
      updateACVRCVBreakdown();
      
      // Show success message
      const totals = calculateInventoryTotals();
      if (totals.totalRCV > 0) {
        alert(`✓ Calculation Complete!\n\nTotal RCV: ${formatCurrency(totals.totalRCV)}\nDepreciation: ${formatCurrency(totals.totalDepreciation)}\nInitial ACV Payment: ${formatCurrency(totals.totalACV)}\nHoldback Recovery: ${formatCurrency(totals.holdbackAmount)}`);
      } else {
        alert('⚠️ No inventory data found.\n\nPlease complete Step 8 (Contents Inventory) first, then return to Step 9 to calculate your ACV/RCV breakdown.');
      }
    }

    // Function to add sample inventory data for testing
    function addSampleInventory() {
      const sampleItems = [
        { name: 'Samsung 55" TV', rcv: 899, depreciationPercent: 30 },
        { name: 'Sectional Sofa', rcv: 1899, depreciationPercent: 50 },
        { name: 'Queen Mattress Set', rcv: 1200, depreciationPercent: 40 },
        { name: 'Dining Table & Chairs', rcv: 950, depreciationPercent: 35 },
        { name: 'Kitchen Appliances', rcv: 3500, depreciationPercent: 45 },
        { name: 'Laptop Computer', rcv: 1299, depreciationPercent: 60 },
        { name: 'Clothing Collection', rcv: 5000, depreciationPercent: 70 },
        { name: 'Tools & Equipment', rcv: 2800, depreciationPercent: 25 }
      ];
      
      const saved = localStorage.getItem('claimNavigatorState');
      const state = saved ? JSON.parse(saved) : {
        currentStep: 1,
        completedSteps: [],
        taskCompletion: {},
        inventory: []
      };
      
      state.inventory = sampleItems;
      localStorage.setItem('claimNavigatorState', JSON.stringify(state));
      
      console.log('Sample inventory added:', sampleItems);
      alert('✓ Sample inventory data added for testing!\n\nGo to Step 9 to see calculated ACV/RCV breakdown.');
    }

    // Calculate real progress based on completed tasks
    function calculateProgress() {
      let totalTasks = 0;
      let completedTasks = 0;
      
      // Count all tasks across all steps
      Object.values(stepData).forEach(step => {
        totalTasks += step.tasks.length;
      });
      
      // Count completed tasks
      Object.values(taskCompletion).forEach(stepTasks => {
        completedTasks += stepTasks.filter(t => t).length;
      });
      
      return Math.round((completedTasks / totalTasks) * 100);
    }

    function navigateToStep(stepNum) {
      currentStep = stepNum;
      updateUI();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function saveProgress() {
      saveState();
      const timestamp = new Date().toLocaleTimeString();
      alert(`✅ Progress saved at ${timestamp}!\n\nAll your progress is automatically saved.`);
    }

    // Step 1 Enhanced Functions
    function toggleCompletion(element) {
      element.classList.toggle('checked');
      saveState();
      
      // Check if all items are checked to enable complete button
      const allChecked = document.querySelectorAll('.completion-item.checked').length === 
                         document.querySelectorAll('.completion-item').length;
      
      if (allChecked) {
        const completeBtn = document.querySelector('.btn-complete-step');
        if (completeBtn) {
          completeBtn.style.animation = 'pulse 1s ease-in-out';
        }
      }
    }

    function completeAndNext(stepNum) {
      // Mark step as complete
      if (!completedSteps.includes(stepNum)) {
        completedSteps.push(stepNum);
      }
      
      // Save state
      saveState();
      
      // Move to next step
      currentStep = stepNum + 1;
      
      // Close current step and open next
      const currentItem = document.querySelector(`.accordion-item[data-step="${stepNum}"]`);
      if (currentItem) {
        currentItem.classList.remove('active');
      }
      
      // Open next step
      openStep(stepNum + 1);
      
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function editClaimInfo() {
      const claimNumber = prompt('Claim Number:', document.getElementById('claimNumber').textContent);
      if (claimNumber !== null) document.getElementById('claimNumber').textContent = claimNumber;
      
      const dateOfLoss = prompt('Date of Loss:', document.getElementById('dateOfLoss').textContent);
      if (dateOfLoss !== null) {
        document.getElementById('dateOfLoss').textContent = dateOfLoss;
        // Calculate days since loss
        const lossDate = new Date(dateOfLoss);
        const today = new Date();
        const daysDiff = Math.floor((today - lossDate) / (1000 * 60 * 60 * 24));
        document.getElementById('daysSinceLoss').textContent = daysDiff + ' days';
      }
      
      const insurerName = prompt('Insurance Company:', document.getElementById('insurerName').textContent);
      if (insurerName !== null) document.getElementById('insurerName').textContent = insurerName;
      
      const adjusterName = prompt('Adjuster Name:', document.getElementById('adjusterName').textContent);
      if (adjusterName !== null) document.getElementById('adjusterName').textContent = adjusterName;
      
      const claimStatus = prompt('Claim Status:', document.getElementById('claimStatus').textContent);
      if (claimStatus !== null) document.getElementById('claimStatus').textContent = claimStatus;
      
      saveState();
    }

    function showExample(docName) {
      // Map document names to examples
      const exampleMap = {
        'Complete Insurance Policy (Declarations + Full Contract)': 'policy',
        'All Policy Endorsements & Riders': 'endorsements',
        'Premium Payment Records': 'payments',
        'Prior Claim History (if applicable)': 'history'
      };
      
      const examples = {
        'policy': 'This would show a sample insurance policy declarations page with coverage amounts, deductibles, and named insured information.',
        'endorsements': 'This would show what endorsements/riders look like - extra pages that modify your base policy coverage.',
        'payments': 'This would show a sample payment history statement showing your premium payments.',
        'history': 'This would show a sample prior claims history document (CLUE report or similar).',
        'default': 'Sample document example would be displayed here. In production, this would show an actual annotated example with explanations of each section.'
      };
      
      const key = exampleMap[docName] || 'default';
      alert('📄 EXAMPLE DOCUMENT\n\n' + examples[key]);
    }

    function toggleProblems(header) {
      const content = header.nextElementSibling;
      const isOpen = content.style.display === 'block';
      
      content.style.display = isOpen ? 'none' : 'block';
      header.classList.toggle('open');
    }

    function toggleSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.classList.toggle('expanded');
      }
    }

    // Get tool file path from tool ID
    function getToolPath(toolId) {
      // Comprehensive tool ID to file path mapping
      const toolMapping = {
        // Step 1 - Policy Review (Updated to use comprehensive analyzer)
        'policy-uploader': 'app/tools/policy-analyzer-complete.html',
        'policy-intelligence-engine': 'app/tools/policy-analyzer-complete.html',
        'policy-report-viewer': 'app/tools/policy-analyzer-complete.html',
        'coverage-qa-chat': 'app/tools/coverage-qa-chat.html',
        'coverage-clarification-letter': 'app/tools/coverage-clarification-letter.html',
        'policy-interpretation-letter': 'app/tools/policy-interpretation-letter.html',
        'download-policy-report': 'app/tools/download-policy-report.html',
        
        // Step 2 - Compliance
        'compliance-review': 'app/tools/compliance-review.html',
        'compliance-report-viewer': 'app/tools/compliance-report-viewer.html',
        'compliance-auto-import': 'app/tools/compliance-auto-import.html',
        'deadline-calculator': 'app/tools/deadline-calculator.html',
        'mitigation-documentation-tool': 'app/tools/mitigation-documentation-tool.html',
        'proof-of-loss-tracker': 'app/tools/proof-of-loss-tracker.html',
        'euo-sworn-statement-guide': 'app/tools/euo-sworn-statement-guide.html',
        
        // Step 3 - FNOL
        'fnol-generator': 'app/document-library/first-notice-of-loss.html',
        'fnol-email-generator': 'app/document-library/first-notice-of-loss.html',
        'loss-report-viewer': 'app/claim-journal.html',
        'loss-description-assistant': 'app/tools/first-notice-of-loss.html',
        'adjuster-contact-log': 'app/tools/carrier-request-logger.html',
        'fnol-follow-up-tracker': 'app/tools/deadline-response-tracker.html',
        
        // Step 4 - Damage Documentation
        'damage-documentation': 'app/tools/damage-documentation-tool.html',
        'damage-documentation-tool': 'app/tools/damage-documentation-tool.html',
        'damage-report-viewer': 'app/tools/damage-report-viewer.html',
        'damage-report-engine': 'app/tools/damage-report-engine.html',
        'photo-upload-organizer': 'app/tools/photo-upload-organizer.html',
        'damage-labeling-tool': 'app/tools/damage-labeling-tool.html',
        'room-by-room-prompt-tool': 'app/tools/room-by-room-prompt-tool.html',
        'missing-evidence-identifier': 'app/tools/missing-evidence-identifier.html',
        
        // Step 5 - Estimate Review
        'estimate-review': 'app/tools/estimate-review.html',
        'estimate-review-tool': 'app/tools/estimate-review.html',
        'estimate-quality-viewer': 'app/tools/estimate-review.html',
        'contractor-scope-checklist': 'app/tools/contractor-scope-checklist.html',
        'missing-trade-detector': 'app/tools/missing-trade-detector.html',
        'code-upgrade-identifier': 'app/tools/code-upgrade-identifier.html',
        'scope-omission-detector': 'app/tools/scope-omission-detector.html',
        
        // Step 6 - Estimate Comparison
        'estimate-comparison': 'app/tools/estimate-comparison.html',
        'estimate-comparison-viewer': 'app/tools/estimate-comparison.html',
        'line-item-discrepancy-finder': 'app/tools/line-item-discrepancy-finder.html',
        'pricing-deviation-analyzer': 'app/tools/pricing-deviation-analyzer.html',
        'estimate-revision-request-generator': 'app/tools/estimate-revision-request-generator.html',
        
        // Step 7 - Coverage Alignment
        'coverage-alignment': 'app/tools/coverage-alignment.html',
        'alignment-report-viewer': 'app/tools/coverage-alignment.html',
        'coverage-mapping-visualizer': 'app/tools/coverage-mapping-visualizer.html',
        'sublimit-impact-analyzer': 'app/tools/sublimit-impact-analyzer.html',
        'coverage-gap-detector': 'app/tools/coverage-gap-detector.html',
        'category-coverage-checker': 'app/tools/category-coverage-checker.html',
        
        // Step 8 - ALE Tracking
        'ale-tracker': 'app/tools/ale-tracker.html',
        'ale-report-viewer': 'app/tools/ale-tracker.html',
        'ale-eligibility-checker': 'app/tools/ale-eligibility-checker.html',
        'temporary-housing-documentation-helper': 'app/tools/temporary-housing-documentation-helper.html',
        'expense-upload-tool': 'app/tools/expense-upload-tool.html',
        'remaining-ale-limit-calculator': 'app/tools/remaining-ale-limit-calculator.html',
        
        // Step 9 - Contents Inventory
        'contents-inventory': 'app/tools/contents-inventory.html',
        'inventory-report-viewer': 'app/tools/contents-inventory.html',
        'contents-documentation-helper': 'app/tools/contents-documentation-helper.html',
        'comparable-item-finder': 'app/tools/comparable-item-finder.html',
        
        // Step 10 - Contents Valuation
        'contents-valuation': 'app/tools/contents-valuation.html',
        'valuation-report-viewer': 'app/tools/contents-valuation.html',
        'depreciation-calculator': 'app/tools/depreciation-calculator.html',
        'replacement-cost-justification-tool': 'app/tools/replacement-cost-justification-tool.html',
        
        // Step 11 - Claim Package Assembly
        'claim-package-assembly': 'app/tools/claim-package-assembly.html',
        'readiness-report-viewer': 'app/tools/claim-package-assembly.html',
        'missing-document-identifier': 'app/tools/missing-document-identifier.html',
        'document-production-checklist': 'app/tools/document-production-checklist.html',
        'pre-submission-risk-review-tool': 'app/tools/pre-submission-risk-review-tool.html',
        
        // Step 12 - Claim Submission
        'claim-submitter': 'app/tools/claim-submitter.html',
        'submission-report-viewer': 'app/tools/submission-report-engine.html',
        'submission-method': 'app/tools/submission-method.html',
        'submission-checklist-generator': 'app/tools/submission-checklist-generator.html',
        'carrier-submission-cover-letter-generator': 'app/tools/carrier-submission-cover-letter-generator.html',
        'submission-confirmation-email': 'app/tools/submission-confirmation-email.html',
        'submission-report-engine': 'app/tools/submission-report-engine.html',
        'download-submission-report': 'app/tools/download-submission-report.html',
        
        // Step 13 - Carrier Response
        'carrier-response': 'app/tools/carrier-response.html',
        'response-report-viewer': 'app/tools/carrier-response.html',
        'carrier-request-logger': 'app/tools/carrier-request-logger.html',
        'response-letter-generator': 'app/tools/response-letter-generator.html',
        'escalation-readiness-checker': 'app/tools/escalation-readiness-checker.html',
        
        // Step 14 - Supplement Analysis
        'supplement-analysis': 'app/tools/supplement-analysis.html',
        'supplement-report-viewer': 'app/tools/supplement-analysis.html',
        'supplement-calculation-tool': 'app/tools/supplement-calculation-tool.html',
        'supplement-cover-letter-generator': 'app/tools/supplement-cover-letter-generator.html',
        'negotiation-strategy-generator': 'app/tools/negotiation-strategy-generator.html',
        'negotiation-language-generator': 'app/tools/negotiation-language-generator.html',
        
        // Acknowledgment tools (stay on page)
        'step1-acknowledgment': 'acknowledgment',
        'step2-acknowledgment': 'acknowledgment',
        'step3-acknowledgment': 'acknowledgment',
        'step11-acknowledgment': 'acknowledgment',
        'step11-next-moves': 'acknowledgment',
        
        // Additional tools
        'expert-opinion': 'app/tools/expert-opinion.html',
        'acknowledgment-status-view': 'app/tools/acknowledgment-status-view.html',
        'followup-schedule-view': 'app/tools/followup-schedule-view.html',
        'followup-status-letter': 'app/tools/followup-status-letter.html',
        'method-timestamp-view': 'app/tools/method-timestamp-view.html',
        'endorsement-opportunity-identifier': 'app/tools/endorsement-opportunity-identifier.html'
      };
      
      return toolMapping[toolId] || '#';
    }
    
    // Acknowledge step completion
    function acknowledgeStep(stepNum) {
      // Check if primary tool output exists
      const hasPrimaryOutput = hasPrimaryToolOutput(stepNum);
      
      if (!hasPrimaryOutput && stepNum !== 11) {
        alert(`⚠️ Cannot acknowledge Step ${stepNum}\n\nYou must complete the primary tool and generate a report before acknowledging this step.`);
        return;
      }
      
      // Mark step as acknowledged
      if (!taskCompletion[stepNum]) {
        taskCompletion[stepNum] = [];
      }
      
      // Mark all tasks as complete
      const step = stepData[stepNum];
      if (step && step.tasks) {
        taskCompletion[stepNum] = step.tasks.map(() => true);
      }
      
      // Add to completed steps
      if (!completedSteps.includes(stepNum)) {
        completedSteps.push(stepNum);
      }
      
      // SB-3: Log step completion to timeline
      (async () => {
        try {
          const { addTimelineEvent } = await import('./app/assets/js/utils/timeline-autosync.js');
          await addTimelineEvent({
            type: 'step_completed',
            date: new Date().toISOString().split('T')[0],
            source: 'step-guide',
            title: `Step ${stepNum} Completed`,
            description: step.title || `Completed step ${stepNum}`,
            metadata: {
              step_id: stepNum,
              step_name: step.title,
              actor: 'user'
            }
          });
        } catch (error) {
          console.warn('Failed to log step completion:', error);
        }
      })();
      
      // Save state
      saveState();
      
      // Update UI
      updateUI();
      updateProgressIndicator();
      
      // Show confirmation
      alert(`✅ Step ${stepNum} Acknowledged!\n\nYou can now proceed to Step ${stepNum + 1}.`);
      
      // Auto-open next step if not on Step 13
      if (stepNum < 13) {
        setTimeout(() => {
          openStep(stepNum + 1);
        }, 500);
      }
    }
    
    // Get stored tool output
    function getToolOutput(stepNum, toolId) {
      const key = `claim_step_${stepNum}_${toolId}_output`;
      return getClaimData(key);
    }
    
    // Save tool output
    function saveToolOutput(stepNum, toolId, output) {
      const key = `claim_step_${stepNum}_${toolId}_output`;
      saveClaimData(key, output);
    }
    
    // Check if primary tool output exists
    function hasPrimaryToolOutput(stepNum) {
      const step = stepData[stepNum];
      if (!step || !step.tasks) return false;
      
      // Define primary tools by step
      const primaryToolIds = {
        1: 'policy-intelligence-engine',
        2: 'compliance-review',
        3: 'damage-documentation',
        4: 'estimate-review',
        5: 'estimate-comparison',
        6: 'ale-tracker',
        7: 'contents-inventory',
        8: 'contents-valuation',
        9: 'coverage-alignment',
        10: 'claim-package-assembly',
        12: 'carrier-response',
        13: 'supplement-analysis'
      };
      
      const primaryToolId = primaryToolIds[stepNum];
      if (!primaryToolId) return false;
      
      const output = getToolOutput(stepNum, primaryToolId);
      return output !== null;
    }
    
    // Render tool outputs in step
    function renderToolOutputs(stepNum, contentElement) {
      const step = stepData[stepNum];
      if (!step) return;
      
      let outputsHtml = '';
      
      // Check for primary report
      const primaryToolId = getPrimaryToolId(stepNum);
      
      if (primaryToolId) {
        const output = getToolOutput(stepNum, primaryToolId);
        if (output) {
          const reportName = getReportName(stepNum);
          outputsHtml += `
            <div id="primary-report-${stepNum}" style="background: #f0fdf4; border: 2px solid #86efac; border-radius: 8px; padding: 16px; margin: 20px 0;">
              <div style="font-size: 14px; font-weight: 700; color: #166534; margin-bottom: 8px;">
                ✅ Primary Step Report Generated
              </div>
              <div style="font-size: 13px; color: #166534; margin-bottom: 12px;">
                ${output.summary || 'Report completed successfully.'}
              </div>
              <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                <button onclick="openTool('${primaryToolId}', ${stepNum})" style="padding: 8px 16px; background: #22c55e; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600;">
                  View Full Report →
                </button>
                <button onclick="exportReportPDF(${stepNum})" style="padding: 8px 16px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600;">
                  📥 Download PDF
                </button>
                <button onclick="exportReportDOC(${stepNum})" style="padding: 8px 16px; background: #8b5cf6; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600;">
                  📄 Download DOC
                </button>
              </div>
            </div>
          `;
        }
      }
      
      // Check for supporting tool outputs
      const supportingOutputs = [];
      if (step.additionalTools) {
        step.additionalTools.forEach(tool => {
          const output = getToolOutput(stepNum, tool.id);
          if (output) {
            supportingOutputs.push({
              title: tool.title,
              id: tool.id,
              output: output
            });
          }
        });
      }
      
      if (supportingOutputs.length > 0) {
        outputsHtml += `
          <div style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 8px; padding: 16px; margin: 20px 0;">
            <div style="font-size: 13px; font-weight: 700; color: #1e40af; margin-bottom: 12px;">
              Supporting Tool Outputs
            </div>
        `;
        
        supportingOutputs.forEach(item => {
          outputsHtml += `
            <div style="background: white; border: 1px solid #bfdbfe; border-radius: 6px; padding: 12px; margin-bottom: 8px;">
              <div style="font-size: 12px; font-weight: 600; color: #1e3a5f; margin-bottom: 4px;">
                ${item.title}
              </div>
              <div style="font-size: 11px; color: #64748b;">
                ${item.output.summary || 'Completed'}
              </div>
              <button onclick="openTool('${item.id}', ${stepNum})" style="margin-top: 6px; padding: 6px 12px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 600;">
                View →
              </button>
            </div>
          `;
        });
        
        outputsHtml += `</div>`;
      }
      
      if (outputsHtml) {
        const existingOutputs = contentElement.querySelector('.tool-outputs-container');
        if (existingOutputs) {
          existingOutputs.innerHTML = outputsHtml;
        } else {
          const container = document.createElement('div');
          container.className = 'tool-outputs-container';
          container.innerHTML = outputsHtml;
          contentElement.insertBefore(container, contentElement.firstChild);
        }
      }
    }

    function updateProgressIndicator() {
      const stageEl = document.querySelector('.progress-stage');
      if (stageEl) {
        stageEl.textContent = `Step ${currentStep} of 14`;
      }
      
      // Update quiet progress bar
      const quietProgressText = document.getElementById('quietProgressText');
      const quietProgressFill = document.getElementById('quietProgressFill');
      if (quietProgressText) {
        quietProgressText.textContent = `Step ${currentStep} of 14`;
      }
      if (quietProgressFill) {
        const progressPercent = (currentStep / 14) * 100;
        quietProgressFill.style.width = `${progressPercent}%`;
      }
    }

    // Helper function to load step content without toggling
    function loadStepContent(stepNum) {
      const selectedItem = document.querySelector(`.accordion-item[data-step="${stepNum}"]`);
      if (!selectedItem) {
        console.warn('Could not find item for step:', stepNum);
        return;
      }
      
      const content = selectedItem.querySelector('.accordion-content');
      if (!content) {
        console.warn('Could not find content element for step:', stepNum);
        return;
      }
      
      // Check if content already loaded (skip if it has substantial content)
      const currentContent = content.innerHTML.trim();
      if (currentContent && 
          !currentContent.includes('Content will be inserted') &&
          currentContent.length > 100) {
        console.log('Content already loaded for step:', stepNum);
        return;
      }
      
      console.log('Loading content for step:', stepNum);
      buildStepContent(stepNum, content);
    }

    function openStep(stepNum) {
      console.log('Toggling step:', stepNum);
      
      // Get selected item
      const selectedItem = document.querySelector(`.accordion-item[data-step="${stepNum}"]`);
      if (!selectedItem) {
        console.error('Could not find accordion item for step:', stepNum);
        return;
      }
      
      // Check if already active
      const isActive = selectedItem.classList.contains('active');
      
      // Toggle the selected item (don't close others - allow multiple open)
      if (isActive) {
        // Close this item
        selectedItem.classList.remove('active');
        console.log('Step closed:', stepNum);
        return;
      }
      
      // Open this item
      selectedItem.classList.add('active');
      console.log('Step opened:', stepNum);
      
      // Load content if not already loaded
      loadStepContent(stepNum);
      
      // Update current step
      currentStep = stepNum;
    }

    // Build step content HTML
    function buildStepContent(stepNum, content) {
      const data = stepData[stepNum];
      if (!data) {
        console.error('No data found for step:', stepNum);
        return;
      }
      
      // Build content HTML
      let html = '';
      
      // CHECK FOR CUSTOM CONTENT FIRST
      if (data.customContent && data.htmlContent) {
        html = data.htmlContent;
        content.innerHTML = html;
        
        // AUTO-CALCULATE ACV/RCV when Step 9 opens
        if (stepNum === 9) {
          setTimeout(() => {
            updateACVRCVBreakdown();
          }, 100);
        }
        
        console.log('Step content loaded successfully (custom content)');
        return;
      }
      
      // ALL STEPS now use the unified structure
      if (data.primaryAction) {
        // Step 7 Critical Warning (if applicable)
        if (data.isCritical) {
          html += `
            <div class="step-critical-warning">
              This is where most claims lose money if handled incorrectly.
            </div>
          `;
        }
        
        // Primary action - upload and analyze
        html += `
          <div class="primary-action-container">
            <h3 class="primary-action-title">${data.primaryAction.title}</h3>
            <p class="primary-action-description">${data.primaryAction.description}</p>
        `;
        
        if (data.primaryAction.tool) {
          const classification = data.primaryAction.tool.classification || 'required';
          const toolPath = getToolPath(data.primaryAction.tool.id);
          html += `
            <a href="${toolPath}" class="task-tool-inline">
              <span class="task-tool-arrow">→</span>
              <span class="task-tool-label">Use:</span>
              <span class="task-tool-title">${data.primaryAction.tool.title}</span>
              <span class="task-tool-classification ${classification}">${classification}</span>
            </a>
          `;
        }
        
        html += '</div>';
        
        // Report Sections
        if (data.reportSections) {
          html += `
            <div class="report-sections-container">
              <h3 class="report-sections-title">${data.reportSections.title}</h3>
              <p class="report-sections-description">${data.reportSections.description}</p>
          `;
          
          if (data.reportSections.viewTool) {
            const classification = data.reportSections.viewTool.classification || 'required';
            html += `
              <a href="${getToolPath(data.reportSections.viewTool.id)}" class="task-tool-inline">
                <span class="task-tool-arrow">→</span>
                <span class="task-tool-label">View:</span>
                <span class="task-tool-title">${data.reportSections.viewTool.title}</span>
                <span class="task-tool-classification ${classification}">${classification}</span>
              </a>
            `;
          }
          
          // Report sections list
          html += '<div class="report-sections-list"><strong>Report Sections:</strong><ul>';
          data.reportSections.sections.forEach(section => {
            html += `<li>${section}</li>`;
          });
          html += '</ul></div>';
          
          html += '</div>';
        }
        
        // Informational note at bottom
        if (data.infoNote) {
          html += `
            <div class="step-info-note">
              <span class="step-info-note-icon">ℹ️</span>${data.infoNote}
            </div>
          `;
        }
      }
      // LEGACY FORMAT (should not be used anymore)
      else if (data.beforeYouContinue) {
        // Before You Continue block
        html += `
          <div class="before-you-continue">
            <div class="before-you-continue-title">Before You Continue</div>
            <ul class="before-you-continue-list">
              <li class="before-you-continue-item"><strong>If skipped:</strong> ${data.beforeYouContinue.ifSkipped}</li>
              <li class="before-you-continue-item"><strong>Prevents:</strong> ${data.beforeYouContinue.prevents}</li>
              <li class="before-you-continue-item"><strong>Do not:</strong> ${data.beforeYouContinue.doNot}</li>
            </ul>
          </div>
        `;
        
        // Tasks intro
        if (data.tasksIntro) {
          html += `<div class="tasks-intro">${data.tasksIntro}</div>`;
        }
        
        // Step 7 Critical Warning
        if (data.isCritical) {
          html += `
            <div class="step-critical-warning">
              This is where most claims lose money if handled incorrectly.
            </div>
          `;
        }
        
        // Minimum Proof Check
        if (data.minProofRequired) {
          const proofMet = checkMinProofRequirement(stepNum, data.minProofRequired);
          if (!proofMet) {
            html += `
              <div class="guardrail-warning">
                <strong>🔒 Proof Required:</strong>
                ${data.minProofRequired.message}
              </div>
            `;
          }
        }
        
        // HIERARCHY FIX: Section anchor for tasks
        html += '<div class="section-anchor-tasks">What you need to do now</div>';
        
        // Sequential task list with inline tools
        html += '<ul class="task-list-sequential">';
        data.tasks.forEach((task, index) => {
          html += `
            <li class="task-item-sequential">
              <div class="task-header-sequential">
                <div class="task-number">${index + 1}</div>
                <div class="task-title-sequential">${task.title}</div>
              </div>
              <div class="task-description-sequential">${task.description}</div>
          `;
          
          // Inline tool if present
          if (task.tool) {
            const classification = task.tool.classification || 'optional';
            html += `
              <a href="${getToolPath(task.tool.id)}" class="task-tool-inline">
                <span class="task-tool-arrow">→</span>
                <span class="task-tool-label">Use:</span>
                <span class="task-tool-title">${task.tool.title}</span>
                <span class="task-tool-classification ${classification}">${classification}</span>
              </a>
            `;
          }
          
          html += '</li>';
        });
        html += '</ul>';
        
        // HIERARCHY FIX: Section anchor for tools
        // Additional Tools section
        if (data.additionalTools && data.additionalTools.length > 0) {
          html += '<div class="section-anchor-tools">Tools that help with this step</div>';
          html += `
            <div class="additional-tools-section">
              <div class="additional-tools-title">Additional Tools (Optional)</div>
              <ul class="additional-tools-list">
          `;
          data.additionalTools.forEach(tool => {
            html += `
              <li class="additional-tool-item">
                <a href="${getToolPath(tool.id)}" style="display: flex; align-items: center; gap: 8px; text-decoration: none; color: inherit;">
                  <span class="additional-tool-arrow">→</span>
                  <span class="additional-tool-title">${tool.title}</span>
                </a>
              </li>
            `;
          });
          html += `
              </ul>
            </div>
          `;
        }
        
        // Step 1 Policy Flags: Coinsurance Warning
        if (stepNum === 1 && data.policyFlags && data.policyFlags.coinsurance && data.policyFlags.coinsurance.detected) {
          const coinsurance = data.policyFlags.coinsurance;
          html += `
            <div class="coinsurance-warning">
              <div class="coinsurance-title">⚠️ Coinsurance Requirement Detected</div>
              <div class="coinsurance-content">
                Your policy requires coverage of at least <span class="coinsurance-requirement">${coinsurance.requirement}</span> of replacement cost. ${coinsurance.explanation}
              </div>
            </div>
          `;
        }
        
        // Step 1 Policy Flags: Policyholder Duties
        if (stepNum === 1 && data.policyFlags && data.policyFlags.policyholderDuties && data.policyFlags.policyholderDuties.length > 0) {
          html += `
            <div class="policyholder-duties">
              <div class="duties-title">📋 Your Policy Duties After a Loss</div>
              <ul class="duties-list">
          `;
          data.policyFlags.policyholderDuties.forEach(duty => {
            html += `
              <li class="duty-item">
                <div class="duty-icon">✓</div>
                <div class="duty-content">
                  <div class="duty-text">${duty.duty}</div>
                  <div class="duty-meta">
                    <span class="duty-deadline">⏱️ ${duty.deadline}</span>
                    <span>•</span>
                    <a class="duty-link" onclick="navigateToStep(${duty.linkedStep})">→ Go to Step ${duty.linkedStep}</a>
                  </div>
                </div>
              </li>
            `;
          });
          html += `
              </ul>
            </div>
          `;
        }
        
        // Expert Guidance (Steps 4 & 5)
        if ((stepNum === 4 || stepNum === 5) && data.expertGuidance && data.expertGuidance.show) {
          const guidance = data.expertGuidance;
          html += `
            <div class="expert-guidance">
              <div class="expert-guidance-title">💡 ${guidance.title}</div>
              <div class="expert-conditions">
                <ul>
          `;
          guidance.conditions.forEach(condition => {
            html += `<li>${condition}</li>`;
          });
          html += `
                </ul>
              </div>
              <div class="expert-types">
                <div class="expert-types-title">Common Experts</div>
                <div class="expert-type-list">
          `;
          guidance.experts.forEach(expert => {
            html += `
              <div class="expert-type-item">
                <span class="expert-type-name">${expert.type}</span>
                <span class="expert-type-when">${expert.when}</span>
              </div>
            `;
          });
          html += `
                </div>
              </div>
            </div>
          `;
        }
        
        // Mitigation Guidance (Step 2)
        if (stepNum === 2 && data.mitigationGuidance && data.mitigationGuidance.show) {
          const mitigation = data.mitigationGuidance;
          html += `
            <div class="mitigation-guidance">
              <div class="mitigation-guidance-title">🚨 ${mitigation.title}</div>
              <div class="mitigation-explanation">${mitigation.explanation}</div>
              
              <div class="mitigation-section">
                <div class="mitigation-section-title">Immediate Actions Required</div>
                <ul>
          `;
          mitigation.immediateActions.forEach(action => {
            html += `<li>${action}</li>`;
          });
          html += `
                </ul>
              </div>
              
              <div class="mitigation-section">
                <div class="mitigation-section-title">What to Document</div>
                <ul>
          `;
          mitigation.documentationRequired.forEach(doc => {
            html += `<li>${doc}</li>`;
          });
          html += `
                </ul>
              </div>
              
              <div class="mitigation-reimbursement">
                💰 ${mitigation.reimbursement}
              </div>
            </div>
          `;
        }
        
        // Mitigation Capture (Step 3)
        if (stepNum === 3 && data.mitigationCapture && data.mitigationCapture.show) {
          const capture = data.mitigationCapture;
          html += `
            <div class="mitigation-capture">
              <div class="mitigation-capture-title">📋 ${capture.title}</div>
              <div class="mitigation-instructions">${capture.instructions}</div>
              
              <div class="mitigation-upload-types">
          `;
          capture.uploadTypes.forEach(upload => {
            html += `
              <div class="mitigation-upload-item">
                <div class="mitigation-upload-type">${upload.type}</div>
                <div class="mitigation-upload-desc">${upload.description}</div>
              </div>
            `;
          });
          html += `
              </div>
              
              <div class="mitigation-flow-note">
                ✓ ${capture.willFlowTo}
              </div>
            </div>
          `;
        }
      }
      
      // Step Reassurance (before actions)
      const stepReassurance = {
        1: "If you've completed this step, you understand your coverage and are ready to proceed.",
        2: "Most claim issues originate when compliance requirements are missed.",
        3: "Timely notice protects your claim rights.",
        4: "Proper documentation is the foundation of every successful claim.",
        5: "A complete contractor estimate establishes the true cost of repairs.",
        6: "Identifying estimate discrepancies early prevents underpayment.",
        7: "This step ensures all documented losses are properly applied to available coverage.",
        8: "ALE tracking remains active throughout your claim.",
        9: "Insurance companies only pay for items that are properly listed and documented.",
        10: "Accurate valuation ensures proper contents reimbursement.",
        11: "A complete, well-organized package strengthens your claim.",
        12: "Document your submission method to establish your claim timeline.",
        13: "This step remains active throughout your claim.",
        14: "This step may be repeated as needed until your claim is fully paid."
      };
      
      if (stepReassurance[stepNum]) {
        html += `
          <div style="background: #eff6ff; border-left: 3px solid #3b82f6; padding: 12px 16px; margin: 20px 0; font-size: 0.875rem; color: #1e40af;">
            ${stepReassurance[stepNum]}
          </div>
        `;
      }
      
      // Actions (for all steps)
      html += `
        <div class="step-actions">
          <button class="btn btn-primary" onclick="completeAndNext(${stepNum})">
            ${stepNum === 10 ? '✅ Complete Claim' : 'Mark Complete & Continue →'}
          </button>
        </div>
      `;
      
      // HIERARCHY FIX: Quiet next step preview (only for steps 1-9)
      if (stepNum < 10) {
        const nextStep = stepData[stepNum + 1];
        if (nextStep) {
          html += `
            <div class="next-step-preview">
              <div class="next-step-preview-label">Next Step</div>
              <div class="next-step-preview-title">${nextStep.title}</div>
            </div>
          `;
        }
      }
      
      content.innerHTML = html;
      
      console.log('Step content loaded successfully');
      
      // Render tool outputs
      renderToolOutputs(stepNum, content);
      
      // Save state
      saveState();
      
      // Scroll to accordion item
      setTimeout(() => {
        selectedItem.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }, 100);
    }

    function toggleTask(stepNum, taskIndex, checkbox) {
      checkbox.classList.toggle('checked');
      
      if (!taskCompletion[stepNum]) {
        taskCompletion[stepNum] = [];
      }
      
      taskCompletion[stepNum][taskIndex] = checkbox.classList.contains('checked');
      saveState();
      updateProgressIndicator();
    }

    function completeAndNext(stepNum) {
      // Check if primary tool output exists
      if (!hasPrimaryToolOutput(stepNum)) {
        alert('⚠️ Cannot proceed: Primary step report required.\n\nYou must complete the primary tool for this step before proceeding.');
        return;
      }
      
      // Show disclaimer modal before completing step
      if (window.CNDisclaimer) {
        window.CNDisclaimer.showModal(function() {
          // Proceed with completion after acknowledgment
          proceedWithStepCompletion(stepNum);
        });
      } else {
        // Fallback if disclaimer not loaded
        proceedWithStepCompletion(stepNum);
      }
    }
    
    function proceedWithStepCompletion(stepNum) {
      // Mark step as completed
      if (!completedSteps.includes(stepNum)) {
        completedSteps.push(stepNum);
      }
      
      // SB-3: Log step completion to timeline
      (async () => {
        try {
          const step = stepData[stepNum];
          const { addTimelineEvent } = await import('./app/assets/js/utils/timeline-autosync.js');
          await addTimelineEvent({
            type: 'step_completed',
            date: new Date().toISOString().split('T')[0],
            source: 'step-guide',
            title: `Step ${stepNum} Completed`,
            description: step.title || `Completed step ${stepNum}`,
            metadata: {
              step_id: stepNum,
              step_name: step.title,
              actor: 'user'
            }
          });
        } catch (error) {
          console.warn('Failed to log step completion:', error);
        }
      })();
      
      // Update visual state
      const item = document.querySelector(`.accordion-item[data-step="${stepNum}"]`);
      item.classList.add('completed');
      
      // Update readiness status
      updateReadinessStatus();
      
      // Update financial summary
      updateFinancialSummary();
      
      // Open next step or show completion
      if (stepNum < 13) {
        openStep(stepNum + 1);
      } else {
        // Show post-claim asset section
        const postClaimSection = document.getElementById('postClaimSection');
        if (postClaimSection) {
          postClaimSection.style.display = 'block';
          
          // Add disclaimer to completion screen
          if (window.CNDisclaimer) {
            setTimeout(() => {
              window.CNDisclaimer.addToCompletion('postClaimSection');
            }, 100);
          }
          
          setTimeout(() => {
            postClaimSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }, 300);
        }
        alert('🎉 Congratulations! You have completed your entire claim process. Your claim archive is now available below.');
      }
      
      saveState();
    }

    function navigateToStep(stepNum) {
      openStep(stepNum);
    }

    function previousStep() {
      if (currentStep > 1) {
        openStep(currentStep - 1);
      }
    }

    // Check if minimum proof requirement is met
    function checkMinProofRequirement(stepNum, requirement) {
      // This is a placeholder - in production, this would check actual uploads
      // For now, return true to not block progression in demo
      return true;
      
      // Example implementation:
      // if (requirement.type === 'photos') {
      //   const uploadedPhotos = getUploadedPhotos(stepNum);
      //   return uploadedPhotos.length >= requirement.count;
      // }
      // return true;
    }

    // Update Claim Readiness Status Indicator
    function updateReadinessStatus() {
      const icon = document.getElementById('readinessIcon');
      const status = document.getElementById('readinessStatus');
      
      if (!icon || !status) return;
      
      // Define critical steps for readiness
      const criticalSteps = [3, 5, 6]; // Photos, Estimate, Proof of Loss
      const criticalCompleted = criticalSteps.filter(s => completedSteps.includes(s)).length;
      
      if (criticalCompleted === 0) {
        // Not Ready
        icon.textContent = '⚠️';
        status.textContent = 'Not Ready';
      } else if (criticalCompleted < criticalSteps.length) {
        // Partially Ready
        icon.textContent = '⚙️';
        status.textContent = 'Partial';
      } else {
        // Ready to Submit
        icon.textContent = '✅';
        status.textContent = 'Ready';
      }
    }

    // Claim Financial Summary Calculation and Update
    function calculateFinancialSummary() {
      // This is a simulated calculation based on step completion
      // In production, this would pull from actual uploaded data and analysis results
      
      const financialData = {
        // Default values
        structure: 0,
        contents: 0,
        ale: 0,
        mitigationCosts: 0, // Emergency mitigation expenses
        deductible: 1000, // Default deductible
        depreciation: 0,
        
        // Policy data (Step 1)
        dwellingLimit: 250000,
        contentsLimit: 100000,
        aleLimit: 50000,
        coinsuranceRequirement: 0.80, // 80% requirement
        replacementCost: 300000, // Actual replacement cost
        insuredAmount: 250000, // Amount of insurance
        
        // Documentation status
        docStatus: 'incomplete',
        submissionStatus: 'not submitted',
        negotiationStatus: 'inactive',
        depreciationStatus: 'pending',
        
        // Estimates (Step 5)
        contractorEstimate: 0,
        insurerEstimate: 0,
        
        // Proof of Loss (Step 6)
        submittedAmount: 0,
        
        // Negotiation (Steps 7-9)
        carrierOffer: 0,
        counterDemand: 0,
        
        // Payments (Steps 9-10)
        paymentsReceived: 0,
        lastPaymentDate: null
      };
      
      // Derive values based on completed steps
      if (completedSteps.includes(1)) {
        // Step 1 completed: Policy analyzed
        // Use default policy limits set above
      }
      
      if (completedSteps.includes(2) || completedSteps.includes(3)) {
        // Steps 2-3: Mitigation costs documented
        // Simulate emergency mitigation expenses (tarps, water extraction, board-up, etc.)
        financialData.mitigationCosts = 2500;
      }
      
      if (completedSteps.includes(3)) {
        // Step 3 completed: Damage documented
        // Simulate documented damage values
        financialData.structure = 45000;
        financialData.contents = 15000;
        financialData.ale = 5000;
        financialData.docStatus = 'preliminary';
      }
      
      if (completedSteps.includes(5)) {
        // Step 5 completed: Estimates compared
        financialData.contractorEstimate = 58000;
        financialData.insurerEstimate = 42000;
        // Use contractor estimate as documented value
        financialData.structure = 48000;
        financialData.contents = 10000;
        financialData.docStatus = 'complete';
      }
      
      if (completedSteps.includes(6)) {
        // Step 6 completed: Proof of Loss filed
        financialData.submittedAmount = financialData.structure + financialData.contents + financialData.ale;
        financialData.submissionStatus = 'submitted';
      }
      
      if (completedSteps.includes(7) || completedSteps.includes(8)) {
        // Steps 7-8: Negotiation active
        financialData.negotiationStatus = 'active';
        financialData.carrierOffer = 42000;
        financialData.counterDemand = 58000;
      }
      
      if (completedSteps.includes(9)) {
        // Step 9: Settlement accepted, initial payment received
        financialData.paymentsReceived = 49000; // Initial payment (net after deductible, less depreciation)
        financialData.lastPaymentDate = new Date('2024-12-15');
      }
      
      if (completedSteps.includes(10)) {
        // Step 10 completed: Depreciation tracked
        financialData.depreciation = 8000;
        financialData.depreciationStatus = 'recoverable';
      }
      
      // Calculate totals (include mitigation costs in ALE/Additional category)
      const documentedTotal = financialData.structure + financialData.contents + financialData.ale + financialData.mitigationCosts;
      const afterDeductible = Math.max(0, documentedTotal - financialData.deductible);
      const netPayable = afterDeductible - financialData.depreciation;
      
      // Calculate remaining gap
      const remainingGap = Math.max(0, netPayable - financialData.paymentsReceived + financialData.depreciation);
      
      // Apply policy limits (mitigation costs are typically covered under ALE)
      const structureCapped = Math.min(financialData.structure, financialData.dwellingLimit);
      const contentsCapped = Math.min(financialData.contents, financialData.contentsLimit);
      const aleCapped = Math.min(financialData.ale + financialData.mitigationCosts, financialData.aleLimit);
      
      // Check for coinsurance penalty
      const requiredInsurance = financialData.replacementCost * financialData.coinsuranceRequirement;
      let coinsurancePenalty = 0;
      let coverageAdjustedTotal = (structureCapped + contentsCapped + aleCapped) - financialData.deductible;
      
      if (financialData.insuredAmount < requiredInsurance) {
        // Apply coinsurance penalty: (Insurance Carried / Insurance Required) × Loss
        const coinsuranceFactor = financialData.insuredAmount / requiredInsurance;
        coinsurancePenalty = coverageAdjustedTotal * (1 - coinsuranceFactor);
        coverageAdjustedTotal = Math.max(0, coverageAdjustedTotal - coinsurancePenalty);
      }
      
      return {
        documentedTotal,
        coverageAdjustedTotal,
        structure: financialData.structure,
        contents: financialData.contents,
        ale: financialData.ale,
        deductible: financialData.deductible,
        depreciation: financialData.depreciation,
        netPayable,
        paymentsReceived: financialData.paymentsReceived,
        lastPaymentDate: financialData.lastPaymentDate,
        remainingGap,
        docStatus: financialData.docStatus,
        submissionStatus: financialData.submissionStatus,
        negotiationStatus: financialData.negotiationStatus,
        depreciationStatus: financialData.depreciationStatus
      };
    }
    
    function updateFinancialSummary() {
      const summary = calculateFinancialSummary();
      
      // Format currency
      const formatCurrency = (amount) => {
        return '$' + Math.round(amount).toLocaleString('en-US');
      };
      
      // Update top line metrics
      const docValue = document.getElementById('documentedClaimValue');
      const covValue = document.getElementById('coverageAdjustedValue');
      if (docValue) docValue.textContent = formatCurrency(summary.documentedTotal);
      if (covValue) covValue.textContent = formatCurrency(summary.coverageAdjustedTotal);
      
      // Update breakdown
      const updateElement = (id, value) => {
        const el = document.getElementById(id);
        if (el) el.textContent = formatCurrency(value);
      };
      
      updateElement('structureValue', summary.structure);
      updateElement('contentsValue', summary.contents);
      updateElement('aleValue', summary.ale);
      updateElement('deductibleValue', summary.deductible);
      updateElement('depreciationValue', summary.depreciation);
      updateElement('netPayableValue', summary.netPayable);
      
      // Update payments section
      updateElement('paymentsReceivedValue', summary.paymentsReceived);
      updateElement('remainingGapValue', summary.remainingGap);
      
      const lastPaymentEl = document.getElementById('lastPaymentDate');
      if (lastPaymentEl) {
        if (summary.lastPaymentDate) {
          const dateStr = summary.lastPaymentDate.toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric' 
          });
          lastPaymentEl.textContent = dateStr;
        } else {
          lastPaymentEl.textContent = '—';
        }
      }
      
      // Update status indicators
      const updateStatus = (indicatorId, valueId, status, statusText) => {
        const indicator = document.getElementById(indicatorId);
        const valueEl = document.getElementById(valueId);
        
        if (indicator && valueEl) {
          // Remove all status classes
          indicator.classList.remove('incomplete', 'preliminary', 'complete', 'active', 'inactive');
          
          // Add appropriate status class
          indicator.classList.add(status);
          valueEl.textContent = statusText;
        }
      };
      
      // Documentation status
      const docStatusMap = {
        'incomplete': 'Incomplete',
        'preliminary': 'Preliminary',
        'complete': 'Complete'
      };
      updateStatus('docStatusIndicator', 'docStatusValue', summary.docStatus, docStatusMap[summary.docStatus]);
      
      // Submission status
      const submissionStatusMap = {
        'not submitted': 'Not Submitted',
        'submitted': 'Submitted'
      };
      const submissionClass = summary.submissionStatus === 'submitted' ? 'complete' : 'incomplete';
      updateStatus('submissionStatusIndicator', 'submissionStatusValue', submissionClass, submissionStatusMap[summary.submissionStatus]);
      
      // Negotiation status
      const negotiationStatusMap = {
        'inactive': 'Inactive',
        'active': 'Active'
      };
      updateStatus('negotiationStatusIndicator', 'negotiationStatusValue', summary.negotiationStatus, negotiationStatusMap[summary.negotiationStatus]);
      
      // Depreciation status
      const depreciationStatusMap = {
        'pending': 'Pending',
        'recoverable': 'Recoverable',
        'recovered': 'Recovered'
      };
      const depreciationClass = summary.depreciationStatus === 'recovered' ? 'complete' : (summary.depreciationStatus === 'recoverable' ? 'active' : 'inactive');
      updateStatus('depreciationStatusIndicator', 'depreciationStatusValue', depreciationClass, depreciationStatusMap[summary.depreciationStatus]);
    }

    // Post-claim asset functions
    function downloadClaimFile() {
      alert('Your complete claim file will be downloaded as a ZIP archive containing all documents, photos, and correspondence.');
      // In production: trigger actual download
    }

    function viewClaimArchive() {
      alert('Opening your claim archive viewer...');
      // In production: navigate to archive interface
    }

    // Calculate days between two dates
    function daysBetween(date1, date2) {
      const oneDay = 24 * 60 * 60 * 1000;
      return Math.round((date2 - date1) / oneDay);
    }

    // Update deadline urgency based on days remaining
    function updateDeadlineUrgency() {
      // This would normally calculate based on actual dates
      // For demo purposes, deadlines are static in HTML
      // In production, this would:
      // 1. Calculate days remaining for each deadline
      // 2. Apply .urgent class if < 30 days
      // 3. Apply .critical class if < 7 days
      // 4. Update deadline text dynamically
      
      // Example production implementation:
      /*
      const today = new Date();
      const proofOfLossDate = new Date('2025-01-14');
      const daysUntilPOL = daysBetween(today, proofOfLossDate);
      
      const polItem = document.querySelector('.deadline-item[data-deadline="proof-of-loss"]');
      if (polItem) {
        polItem.classList.remove('urgent', 'critical');
        if (daysUntilPOL <= 7) {
          polItem.classList.add('critical');
        } else if (daysUntilPOL <= 30) {
          polItem.classList.add('urgent');
        }
        
        // Update text
        const dateEl = polItem.querySelector('.deadline-date');
        dateEl.textContent = `Proof of Loss due in ${daysUntilPOL} days (${proofOfLossDate.toLocaleDateString()})`;
      }
      */
    }

    // Get report name for step
    function getReportName(stepNum) {
      const reportNames = {
        1: 'Policy_Intelligence_Report',
        2: 'Compliance_Status_Report',
        3: 'Damage_Documentation_Report',
        4: 'Estimate_Quality_Report',
        5: 'Estimate_Comparison_Report',
        6: 'ALE_Compliance_Report',
        7: 'Inventory_Completeness_Report',
        8: 'Contents_Valuation_Report',
        9: 'Coverage_Alignment_Report',
        10: 'Claim_Package_Readiness_Report',
        12: 'Carrier_Response_Analysis_Report',
        13: 'Supplement_Strategy_Report'
      };
      return reportNames[stepNum] || `Step_${stepNum}_Report`;
    }
    
    // Log export activity
    function logExportActivity(stepNum, reportName, type) {
      const log = getClaimData('exportActivityLog') || [];
      log.push({
        step: stepNum,
        reportName: reportName,
        type: type,
        timestamp: new Date().toISOString()
      });
      saveClaimData('exportActivityLog', log);
    }
    
    // Export report as PDF
    function exportReportPDF(stepNum) {
      const output = getToolOutput(stepNum, getPrimaryToolId(stepNum));
      if (!output) {
        alert('No report data available to export.');
        return;
      }
      
      const reportName = getReportName(stepNum);
      const step = stepData[stepNum];
      const claimNumber = document.getElementById('claimNumber').textContent;
      const dateGenerated = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
      
      // Create PDF content
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      
      let yPos = 20;
      const lineHeight = 7;
      const pageHeight = doc.internal.pageSize.height;
      const margin = 20;
      
      // Header
      doc.setFontSize(18);
      doc.setFont(undefined, 'bold');
      doc.text('ClaimNavigator AI', margin, yPos);
      yPos += lineHeight + 3;
      
      doc.setFontSize(14);
      doc.text(`Step ${stepNum} Report`, margin, yPos);
      yPos += lineHeight + 2;
      
      doc.setFontSize(12);
      doc.setFont(undefined, 'normal');
      doc.text(step.title, margin, yPos);
      yPos += lineHeight + 5;
      
      // Metadata
      doc.setFontSize(10);
      doc.text(`Claim Number: ${claimNumber}`, margin, yPos);
      yPos += lineHeight;
      doc.text(`Date Generated: ${dateGenerated}`, margin, yPos);
      yPos += lineHeight + 5;
      
      // Separator
      doc.setDrawColor(200, 200, 200);
      doc.line(margin, yPos, doc.internal.pageSize.width - margin, yPos);
      yPos += 10;
      
      // Report content
      doc.setFontSize(11);
      
      if (output.sections && Array.isArray(output.sections)) {
        output.sections.forEach(section => {
          // Check page break
          if (yPos > pageHeight - 40) {
            doc.addPage();
            yPos = margin;
          }
          
          // Section header
          doc.setFont(undefined, 'bold');
          doc.text(section.title || 'Section', margin, yPos);
          yPos += lineHeight;
          
          // Section content
          doc.setFont(undefined, 'normal');
          const content = section.content || section.text || '';
          const lines = doc.splitTextToSize(content, doc.internal.pageSize.width - 2 * margin);
          
          lines.forEach(line => {
            if (yPos > pageHeight - 30) {
              doc.addPage();
              yPos = margin;
            }
            doc.text(line, margin, yPos);
            yPos += lineHeight;
          });
          
          yPos += 5;
        });
      } else if (output.content) {
        const lines = doc.splitTextToSize(output.content, doc.internal.pageSize.width - 2 * margin);
        lines.forEach(line => {
          if (yPos > pageHeight - 30) {
            doc.addPage();
            yPos = margin;
          }
          doc.text(line, margin, yPos);
          yPos += lineHeight;
        });
      } else if (output.summary) {
        const lines = doc.splitTextToSize(output.summary, doc.internal.pageSize.width - 2 * margin);
        lines.forEach(line => {
          if (yPos > pageHeight - 30) {
            doc.addPage();
            yPos = margin;
          }
          doc.text(line, margin, yPos);
          yPos += lineHeight;
        });
      }
      
      // Save PDF
      const filename = `ClaimNavigator_Step_${stepNum}_${reportName}.pdf`;
      doc.save(filename);
      
      // Log export activity
      logExportActivity(stepNum, reportName, 'PDF');
    }
    
    // Export report as DOC
    function exportReportDOC(stepNum) {
      const output = getToolOutput(stepNum, getPrimaryToolId(stepNum));
      if (!output) {
        alert('No report data available to export.');
        return;
      }
      
      const reportName = getReportName(stepNum);
      const step = stepData[stepNum];
      const claimNumber = document.getElementById('claimNumber').textContent;
      const dateGenerated = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
      
      // Build DOC content
      let docContent = '';
      
      // Header
      docContent += `ClaimNavigator AI\n`;
      docContent += `Step ${stepNum} Report\n`;
      docContent += `${step.title}\n\n`;
      docContent += `Claim Number: ${claimNumber}\n`;
      docContent += `Date Generated: ${dateGenerated}\n`;
      docContent += `${'='.repeat(80)}\n\n`;
      
      // Report content
      if (output.sections && Array.isArray(output.sections)) {
        output.sections.forEach(section => {
          docContent += `${section.title || 'Section'}\n`;
          docContent += `${'-'.repeat((section.title || 'Section').length)}\n`;
          docContent += `${section.content || section.text || ''}\n\n`;
        });
      } else if (output.content) {
        docContent += output.content + '\n\n';
      } else if (output.summary) {
        docContent += output.summary + '\n\n';
      }
      
      // Create blob and download
      const blob = new Blob([docContent], { type: 'application/msword' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `ClaimNavigator_Step_${stepNum}_${reportName}.doc`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      // Log export activity
      logExportActivity(stepNum, reportName, 'DOC');
    }
    
    // Get primary tool ID for step
    function getPrimaryToolId(stepNum) {
      const primaryToolIds = {
        1: 'policy-intelligence-engine',
        2: 'compliance-review',
        3: 'damage-documentation',
        4: 'estimate-review',
        5: 'estimate-comparison',
        6: 'ale-tracker',
        7: 'contents-inventory',
        8: 'contents-valuation',
        9: 'coverage-alignment',
        10: 'claim-package-assembly',
        11: 'claim-submitter',
        12: 'carrier-response',
        13: 'supplement-analysis'
      };
      
      return primaryToolIds[stepNum] || null;
    }
    
    // Handle return from tool
    function handleToolReturn() {
      const urlParams = new URLSearchParams(window.location.search);
      const stepNum = parseInt(urlParams.get('step'), 10);
      const saved = urlParams.get('saved');
      
      if (saved === 'true' && stepNum) {
        // Ensure step content loads and renders outputs
        openStep(stepNum);
        
        // Optional: visual confirmation
        setTimeout(() => {
          highlightStepCompletion(stepNum);
        }, 300);
        
        // Clean URL
        window.history.replaceState({}, document.title, window.location.pathname);
      }
    }
    
    // Visual confirmation of step completion
    function highlightStepCompletion(stepNum) {
      const stepEl = document.querySelector(`[data-step="${stepNum}"]`);
      if (!stepEl) return;
      
      stepEl.classList.add('step-complete-flash');
      setTimeout(() => {
        stepEl.classList.remove('step-complete-flash');
      }, 2000);
    }
    
    // Initialize on load
    // Calculate Proof of Loss deadline based on date of loss
    function calculatePOLDeadline() {
      // Get date of loss from claim info panel
      const dateOfLossText = document.getElementById('dateOfLoss')?.textContent;
      
      if (dateOfLossText && dateOfLossText !== 'Not set') {
        const lossDate = new Date(dateOfLossText);
        
        // Add 60 days (standard POL deadline - adjust based on policy)
        const polDate = new Date(lossDate);
        polDate.setDate(polDate.getDate() + 60);
        
        // Calculate days remaining
        const today = new Date();
        const daysRemaining = Math.ceil((polDate - today) / (1000 * 60 * 60 * 24));
        
        // Update deadline display in Step 2 if it exists
        const polDeadlineEl = document.getElementById('polDeadline');
        if (polDeadlineEl) {
          if (daysRemaining > 0) {
            polDeadlineEl.textContent = `${polDate.toLocaleDateString()} (${daysRemaining} days remaining)`;
            polDeadlineEl.style.color = daysRemaining <= 14 ? '#dc2626' : '#f59e0b';
          } else {
            polDeadlineEl.textContent = `OVERDUE by ${Math.abs(daysRemaining)} days`;
            polDeadlineEl.style.color = '#dc2626';
            polDeadlineEl.style.fontWeight = '700';
          }
        }
      }
    }

    // Add keyboard shortcut to load sample data (for testing)
    // Press Ctrl+Shift+I to load sample inventory
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.shiftKey && e.key === 'I') {
        addSampleInventory();
      }
    });

    // Open Contents Valuation Tool (called by button clicks)
    function openTool(toolId) {
      if (toolId === 'contents-valuation') {
        // In production, this would navigate to the actual tool
        // For now, show instructions
        alert('📊 Contents Valuation Tool\n\nThis tool helps you:\n• Enter all damaged items from Step 8\n• Calculate replacement cost values (RCV)\n• Apply depreciation based on age/condition\n• Generate ACV and holdback amounts\n\nOnce you complete your inventory, your ACV/RCV breakdown will automatically update in Step 9.');
        
        // Simulate opening the tool - in production this would be:
        // window.location.href = 'app/tools/contents-valuation.html';
      } else {
        alert('Opening tool: ' + toolId + '\n\nIn production, this would navigate to the actual tool page.');
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      console.log('Page initialized');
      
      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        const dropdown = document.getElementById('uploadDropdown');
        if (!dropdown) return;
        
        // Check if click was inside the dropdown
        const clickedInside = dropdown.contains(e.target);
        
        // If clicked outside and dropdown is open, close it
        if (!clickedInside && dropdown.classList.contains('open')) {
          dropdown.classList.remove('open');
          console.log('Dropdown closed (outside click)');
        }
      });
      
      // MAIN PAGE INITIALIZATION
      loadSavedState();
      
      // Calculate POL deadline
      calculatePOLDeadline();
      
      // Handle tool return
      handleToolReturn();
      
      completedSteps.forEach(stepNum => {
        const item = document.querySelector(`.accordion-item[data-step="${stepNum}"]`);
        if (item) item.classList.add('completed');
      });
      
      if (!currentStep) {
        currentStep = 1;
      }
      
      // Update readiness status on load
      updateReadinessStatus();
      
      // Update deadline urgency on load
      updateDeadlineUrgency();
      
      // Update financial summary on load
      updateFinancialSummary();
      
      // Show post-claim section if Step 13 is completed
      if (completedSteps.includes(13)) {
        const postClaimSection = document.getElementById('postClaimSection');
        if (postClaimSection) {
          postClaimSection.style.display = 'block';
        }
      }
      
      // All steps closed by default - user must click to open
      console.log('All steps closed by default - click to expand');
    });
  </script>

  <!-- DOCUMENT GENERATOR MODALS -->
  <div id="documentGeneratorModal" class="doc-gen-modal" style="display: none;">
    <div class="doc-gen-modal-overlay" onclick="closeDocumentGenerator()"></div>
    <div class="doc-gen-modal-content">
      <div class="doc-gen-modal-header">
        <h2 id="docGenTitle">Document Generator</h2>
        <button class="doc-gen-close-btn" onclick="closeDocumentGenerator()">×</button>
      </div>
      <div class="doc-gen-modal-body" id="docGenBody">
        <!-- Content will be inserted dynamically -->
      </div>
    </div>
  </div>

  <style>
    .doc-gen-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .doc-gen-modal-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
    }

    .doc-gen-modal-content {
      position: relative;
      background: white;
      border-radius: 12px;
      width: 90%;
      max-width: 800px;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: modalSlideIn 0.3s ease-out;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .doc-gen-modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 24px;
      border-bottom: 1px solid #e5e7eb;
    }

    .doc-gen-modal-header h2 {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
      color: var(--navy-primary);
    }

    .doc-gen-close-btn {
      background: none;
      border: none;
      font-size: 32px;
      color: #6b7280;
      cursor: pointer;
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      transition: all 0.2s;
    }

    .doc-gen-close-btn:hover {
      background: #f3f4f6;
      color: #1f2937;
    }

    .doc-gen-modal-body {
      padding: 24px;
      overflow-y: auto;
      flex: 1;
    }

    .doc-gen-form-group {
      margin-bottom: 20px;
    }

    .doc-gen-form-group label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 8px;
    }

    .doc-gen-form-group input,
    .doc-gen-form-group textarea,
    .doc-gen-form-group select {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
      font-family: inherit;
      transition: border-color 0.2s;
    }

    .doc-gen-form-group input:focus,
    .doc-gen-form-group textarea:focus,
    .doc-gen-form-group select:focus {
      outline: none;
      border-color: var(--teal-primary);
      box-shadow: 0 0 0 3px rgba(23, 190, 187, 0.1);
    }

    .doc-gen-form-group textarea {
      min-height: 100px;
      resize: vertical;
    }

    .doc-gen-form-group small {
      display: block;
      margin-top: 4px;
      font-size: 12px;
      color: #6b7280;
    }

    .doc-gen-actions {
      display: flex;
      gap: 12px;
      margin-top: 24px;
      padding-top: 24px;
      border-top: 1px solid #e5e7eb;
    }

    .doc-gen-btn {
      flex: 1;
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .doc-gen-btn-primary {
      background: var(--teal-primary);
      color: white;
    }

    .doc-gen-btn-primary:hover {
      background: var(--teal-hover);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(23, 190, 187, 0.3);
    }

    .doc-gen-btn-primary:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
    }

    .doc-gen-btn-secondary {
      background: #f3f4f6;
      color: #1f2937;
    }

    .doc-gen-btn-secondary:hover {
      background: #e5e7eb;
    }

    .doc-gen-output {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
    }

    .doc-gen-output-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--navy-primary);
      margin-bottom: 16px;
    }

    .doc-gen-output-content {
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      padding: 16px;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre-wrap;
      max-height: 400px;
      overflow-y: auto;
    }

    .doc-gen-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
      color: #6b7280;
    }

    .doc-gen-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #e5e7eb;
      border-top-color: var(--teal-primary);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-right: 12px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .doc-gen-success {
      background: #f0fdf4;
      border: 1px solid #86efac;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      color: #166534;
      font-size: 14px;
    }

    .doc-gen-error {
      background: #fef2f2;
      border: 1px solid #fca5a5;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      color: #991b1b;
      font-size: 14px;
    }
  </style>

  <script>
    // Document Generator System
    const documentGenerators = {
      'carrier-submission-cover-letter-generator': {
        title: 'Carrier Submission Cover Letter Generator',
        description: 'Generate a professional cover letter for your claim package submission',
        fields: [
          { name: 'insurerName', label: 'Insurance Company Name', type: 'text', required: true },
          { name: 'policyNumber', label: 'Policy Number', type: 'text', required: true },
          { name: 'claimNumber', label: 'Claim Number (if assigned)', type: 'text', required: false },
          { name: 'dateOfLoss', label: 'Date of Loss', type: 'date', required: true },
          { name: 'propertyAddress', label: 'Property Address', type: 'textarea', required: true },
          { name: 'lossType', label: 'Type of Loss', type: 'select', options: ['Fire', 'Water Damage', 'Wind/Hail', 'Theft', 'Other'], required: true },
          { name: 'documentsIncluded', label: 'Documents Included in Package', type: 'textarea', required: true, placeholder: 'List all documents being submitted (e.g., Proof of Loss, estimates, photos, receipts)' },
          { name: 'totalClaimAmount', label: 'Total Claim Amount', type: 'number', required: true },
          { name: 'additionalNotes', label: 'Additional Notes or Special Circumstances', type: 'textarea', required: false }
        ]
      },
      'coverage-clarification-letter': {
        title: 'Coverage Clarification Letter',
        description: 'Request clarification on policy coverage and interpretation',
        fields: [
          { name: 'insurerName', label: 'Insurance Company Name', type: 'text', required: true },
          { name: 'policyNumber', label: 'Policy Number', type: 'text', required: true },
          { name: 'claimNumber', label: 'Claim Number', type: 'text', required: false },
          { name: 'coverageQuestion', label: 'Coverage Question or Issue', type: 'textarea', required: true, placeholder: 'Describe what coverage aspect needs clarification' },
          { name: 'policySection', label: 'Relevant Policy Section/Endorsement', type: 'text', required: false },
          { name: 'specificLanguage', label: 'Specific Policy Language in Question', type: 'textarea', required: false },
          { name: 'yourInterpretation', label: 'Your Understanding of Coverage', type: 'textarea', required: true },
          { name: 'requestedAction', label: 'What You\'re Requesting', type: 'textarea', required: true }
        ]
      },
      'estimate-revision-request-generator': {
        title: 'Estimate Revision Request Generator',
        description: 'Request revisions to the insurance company\'s estimate',
        fields: [
          { name: 'insurerName', label: 'Insurance Company Name', type: 'text', required: true },
          { name: 'adjusterName', label: 'Adjuster Name', type: 'text', required: true },
          { name: 'claimNumber', label: 'Claim Number', type: 'text', required: true },
          { name: 'estimateDate', label: 'Date of Original Estimate', type: 'date', required: true },
          { name: 'estimateAmount', label: 'Original Estimate Amount', type: 'number', required: true },
          { name: 'discrepancies', label: 'Specific Discrepancies or Omissions', type: 'textarea', required: true, placeholder: 'List specific line items, omissions, or pricing issues' },
          { name: 'supportingEvidence', label: 'Supporting Evidence Available', type: 'textarea', required: true, placeholder: 'Photos, contractor estimates, expert opinions, etc.' },
          { name: 'requestedAmount', label: 'Requested Revised Amount', type: 'number', required: false },
          { name: 'urgencyReason', label: 'Reason for Urgency (if applicable)', type: 'textarea', required: false }
        ]
      },
      'euo-sworn-statement-guide': {
        title: 'EUO Sworn Statement Guide',
        description: 'Prepare for Examination Under Oath with guidance document',
        fields: [
          { name: 'insurerName', label: 'Insurance Company Name', type: 'text', required: true },
          { name: 'claimNumber', label: 'Claim Number', type: 'text', required: true },
          { name: 'euoDate', label: 'Scheduled EUO Date', type: 'date', required: false },
          { name: 'euoLocation', label: 'EUO Location', type: 'text', required: false },
          { name: 'lossType', label: 'Type of Loss', type: 'text', required: true },
          { name: 'dateOfLoss', label: 'Date of Loss', type: 'date', required: true },
          { name: 'keyFacts', label: 'Key Facts About Your Claim', type: 'textarea', required: true, placeholder: 'Important facts you need to remember and communicate' },
          { name: 'concernAreas', label: 'Areas of Concern or Complex Issues', type: 'textarea', required: false },
          { name: 'documentsToReview', label: 'Documents to Review Before EUO', type: 'textarea', required: false }
        ]
      },
      'followup-status-letter': {
        title: 'Follow-Up Status Request Letter',
        description: 'Request status update on your claim',
        fields: [
          { name: 'insurerName', label: 'Insurance Company Name', type: 'text', required: true },
          { name: 'claimNumber', label: 'Claim Number', type: 'text', required: true },
          { name: 'adjusterName', label: 'Adjuster Name', type: 'text', required: false },
          { name: 'submissionDate', label: 'Date Claim/Documents Submitted', type: 'date', required: true },
          { name: 'daysSinceSubmission', label: 'Days Since Submission', type: 'number', required: true },
          { name: 'lastContact', label: 'Date of Last Contact', type: 'date', required: false },
          { name: 'pendingItems', label: 'Items Pending Response', type: 'textarea', required: true, placeholder: 'What are you waiting for? (e.g., estimate review, payment, coverage decision)' },
          { name: 'stateDeadline', label: 'State-Mandated Response Deadline (if applicable)', type: 'text', required: false },
          { name: 'urgencyReason', label: 'Reason for Urgency', type: 'textarea', required: false }
        ]
      },
      'policy-interpretation-letter': {
        title: 'Policy Interpretation Letter',
        description: 'Document your interpretation of policy language',
        fields: [
          { name: 'insurerName', label: 'Insurance Company Name', type: 'text', required: true },
          { name: 'policyNumber', label: 'Policy Number', type: 'text', required: true },
          { name: 'claimNumber', label: 'Claim Number', type: 'text', required: false },
          { name: 'policySection', label: 'Policy Section/Provision', type: 'text', required: true },
          { name: 'policyLanguage', label: 'Exact Policy Language', type: 'textarea', required: true },
          { name: 'yourInterpretation', label: 'Your Interpretation', type: 'textarea', required: true },
          { name: 'insurerPosition', label: 'Insurer\'s Interpretation (if stated)', type: 'textarea', required: false },
          { name: 'supportingAuthority', label: 'Supporting Authority', type: 'textarea', required: false, placeholder: 'Case law, state regulations, or other policy provisions that support your interpretation' },
          { name: 'requestedAction', label: 'Requested Action', type: 'textarea', required: true }
        ]
      },
      'submission-confirmation-email': {
        title: 'Submission Confirmation Email',
        description: 'Confirm receipt of your claim submission',
        fields: [
          { name: 'insurerName', label: 'Insurance Company Name', type: 'text', required: true },
          { name: 'recipientName', label: 'Recipient Name', type: 'text', required: false },
          { name: 'recipientEmail', label: 'Recipient Email', type: 'email', required: false },
          { name: 'claimNumber', label: 'Claim Number', type: 'text', required: false },
          { name: 'submissionDate', label: 'Submission Date', type: 'date', required: true },
          { name: 'submissionMethod', label: 'Submission Method', type: 'select', options: ['Email', 'Certified Mail', 'Online Portal', 'In Person', 'Fax'], required: true },
          { name: 'trackingNumber', label: 'Tracking Number (if applicable)', type: 'text', required: false },
          { name: 'documentsSubmitted', label: 'Documents Submitted', type: 'textarea', required: true, placeholder: 'List all documents included in submission' },
          { name: 'requestedResponse', label: 'Requested Response Timeframe', type: 'text', required: false }
        ]
      },
      'supplement-cover-letter-generator': {
        title: 'Supplement Cover Letter Generator',
        description: 'Generate cover letter for supplemental claim submission',
        fields: [
          { name: 'insurerName', label: 'Insurance Company Name', type: 'text', required: true },
          { name: 'claimNumber', label: 'Claim Number', type: 'text', required: true },
          { name: 'adjusterName', label: 'Adjuster Name', type: 'text', required: false },
          { name: 'originalClaimDate', label: 'Original Claim Date', type: 'date', required: true },
          { name: 'originalAmount', label: 'Original Claim Amount', type: 'number', required: true },
          { name: 'supplementReason', label: 'Reason for Supplement', type: 'textarea', required: true, placeholder: 'Why are you filing a supplement? (e.g., additional damage discovered, omitted items, pricing corrections)' },
          { name: 'supplementAmount', label: 'Supplement Amount', type: 'number', required: true },
          { name: 'newDocumentation', label: 'New Documentation Included', type: 'textarea', required: true },
          { name: 'totalRevisedAmount', label: 'Total Revised Claim Amount', type: 'number', required: true }
        ]
      }
    };

    function openDocumentGenerator(toolId) {
      const generator = documentGenerators[toolId];
      if (!generator) {
        console.error('Document generator not found:', toolId);
        return;
      }

      const modal = document.getElementById('documentGeneratorModal');
      const title = document.getElementById('docGenTitle');
      const body = document.getElementById('docGenBody');

      title.textContent = generator.title;
      
      let html = `
        <p style="color: #6b7280; margin-bottom: 24px;">${generator.description}</p>
        <form id="docGenForm" onsubmit="generateDocument(event, '${toolId}'); return false;">
      `;

      generator.fields.forEach(field => {
        html += `<div class="doc-gen-form-group">`;
        html += `<label for="${field.name}">${field.label}${field.required ? ' <span style="color: #ef4444;">*</span>' : ''}</label>`;
        
        if (field.type === 'textarea') {
          html += `<textarea id="${field.name}" name="${field.name}" ${field.required ? 'required' : ''} placeholder="${field.placeholder || ''}"></textarea>`;
        } else if (field.type === 'select') {
          html += `<select id="${field.name}" name="${field.name}" ${field.required ? 'required' : ''}>`;
          html += `<option value="">Select...</option>`;
          field.options.forEach(opt => {
            html += `<option value="${opt}">${opt}</option>`;
          });
          html += `</select>`;
        } else {
          html += `<input type="${field.type}" id="${field.name}" name="${field.name}" ${field.required ? 'required' : ''} placeholder="${field.placeholder || ''}">`;
        }
        
        if (field.placeholder && field.type !== 'textarea') {
          html += `<small>${field.placeholder}</small>`;
        }
        html += `</div>`;
      });

      html += `
          <div class="doc-gen-actions">
            <button type="button" class="doc-gen-btn doc-gen-btn-secondary" onclick="closeDocumentGenerator()">Cancel</button>
            <button type="submit" class="doc-gen-btn doc-gen-btn-primary">
              <span>✨ Generate with AI</span>
            </button>
          </div>
        </form>
        <div id="docGenOutput"></div>
      `;

      body.innerHTML = html;
      modal.style.display = 'flex';
    }

    function closeDocumentGenerator() {
      const modal = document.getElementById('documentGeneratorModal');
      modal.style.display = 'none';
    }

    async function generateDocument(event, toolId) {
      event.preventDefault();
      
      const form = event.target;
      const formData = new FormData(form);
      const data = {};
      
      for (let [key, value] of formData.entries()) {
        data[key] = value;
      }

      const outputDiv = document.getElementById('docGenOutput');
      outputDiv.innerHTML = `
        <div class="doc-gen-loading">
          <div class="doc-gen-spinner"></div>
          <span>Generating your document with AI...</span>
        </div>
      `;

      try {
        const generator = documentGenerators[toolId];
        
        // Call AI generation endpoint
        const response = await fetch('/netlify/functions/ai-document-generator', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            template_type: toolId,
            document_type: generator.title,
            user_inputs: data
          })
        });

        if (!response.ok) {
          throw new Error('Failed to generate document');
        }

        const result = await response.json();
        
        if (result.success && result.data && result.data.document_text) {
          outputDiv.innerHTML = `
            <div class="doc-gen-success">
              ✅ Document generated successfully!
            </div>
            <div class="doc-gen-output">
              <div class="doc-gen-output-title">${generator.title}</div>
              <div class="doc-gen-output-content">${result.data.document_text}</div>
              <div class="doc-gen-actions">
                <button type="button" class="doc-gen-btn doc-gen-btn-primary" onclick="copyToClipboard()">
                  📋 Copy to Clipboard
                </button>
                <button type="button" class="doc-gen-btn doc-gen-btn-primary" onclick="downloadDocument('${generator.title}')">
                  📥 Download as PDF
                </button>
                <button type="button" class="doc-gen-btn doc-gen-btn-secondary" onclick="resetForm()">
                  🔄 Generate Another
                </button>
              </div>
            </div>
          `;
          
          // Store the generated document
          window.currentGeneratedDocument = result.data.document_text;
        } else {
          throw new Error(result.error?.message || 'Unknown error');
        }
      } catch (error) {
        console.error('Document generation error:', error);
        outputDiv.innerHTML = `
          <div class="doc-gen-error">
            ❌ Error generating document: ${error.message}
          </div>
          <div class="doc-gen-actions">
            <button type="button" class="doc-gen-btn doc-gen-btn-primary" onclick="resetForm()">
              🔄 Try Again
            </button>
          </div>
        `;
      }
    }

    function copyToClipboard() {
      const content = document.querySelector('.doc-gen-output-content').textContent;
      navigator.clipboard.writeText(content).then(() => {
        alert('✅ Document copied to clipboard!');
      }).catch(err => {
        console.error('Copy failed:', err);
        alert('❌ Failed to copy to clipboard');
      });
    }

    function downloadDocument(title) {
      const content = window.currentGeneratedDocument || document.querySelector('.doc-gen-output-content').textContent;
      
      // Create a simple PDF-like download (text file for now)
      const blob = new Blob([content], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${title.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      alert('✅ Document downloaded! You can copy this text into a Word document for further formatting.');
    }

    function resetForm() {
      const outputDiv = document.getElementById('docGenOutput');
      outputDiv.innerHTML = '';
      document.getElementById('docGenForm').reset();
    }

    // Override the openTool function to handle document generators
    const originalOpenTool = window.openTool;
    window.openTool = function(toolId, stepNum) {
      // Check if this is a document generator
      if (documentGenerators[toolId]) {
        openDocumentGenerator(toolId);
        return;
      }
      
      // Otherwise use original function
      if (originalOpenTool) {
        originalOpenTool(toolId, stepNum);
      }
    };
  </script>
</body>
</html>